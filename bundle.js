(()=>{"use strict";const e=e=>{let a=1779033703,t=3144134277,n=1013904242,r=2773480762;for(let i,s=0;s<e.length;s++)i=e.charCodeAt(s),a=t^Math.imul(a^i,597399067),t=n^Math.imul(t^i,2869860233),n=r^Math.imul(n^i,951274213),r=a^Math.imul(r^i,2716044179);return a=Math.imul(n^a>>>18,597399067),t=Math.imul(r^t>>>22,2869860233),n=Math.imul(a^n>>>17,951274213),r=Math.imul(t^r>>>19,2716044179),[(a^t^n^r)>>>0,(t^a)>>>0,(n^a)>>>0,(r^a)>>>0]},a=e=>function(){var a=e+=1831565813;return a=Math.imul(a^a>>>15,1|a),(((a^=a+Math.imul(a^a>>>7,61|a))^a>>>14)>>>0)/4294967296};e("bananas");class t{constructor(){this.seed=e("bananas"),this.rand=a(this.seed[0]),this.game=window.game}setGameSeed(t){n.seed=e(t),n.rand=a(n.seed[0])}isTouchDevice(){return"ontouchstart"in window||window.navigator.msMaxTouchPoints>0}randDecimal(){return n.rand()}randIntFromInterval(e){return Math.floor(n.rand()*(10-e+1)+e)}randFromRange(e,a){return Math.round(n.rand()*(a-e)+e)}chance(e){return n.rand()<=e/100}monsterNumChance(e=0,a=10){return Math.round(game.floor/game.monsterGroup)*a+e}randFromArray(e){return e[Math.floor(n.rand()*e.length)]}randArrayIndex(e){return Math.floor(n.rand()*e.length)}randString(){return(Math.random()+1).toString(36).substring(2)}shuffle(e){let a,t=e.length;for(;0!=t;)a=Math.floor(Math.random()*t),t--,[e[t],e[a]]=[e[a],e[t]];return e}sort(e){return e.sort(((e,a)=>e.name.localeCompare(a.name)))}buildCardSlots(e){let a="";for(let t=0;t<e.slots;t++){let n="",r="",i=e.slots>1?" multiple":"";null!=e.shards[t]&&(n='<span class="shard '+e.shards[t]+'" data-id="'+e.shards[t]+'"></span>',r=" filled"),a+='<div class="slot'+i+r+'" data-id="'+t+'">'+n+"</div>"}return a}appendCard(e,a,t=""){if(!e)return;let r="";r=n.buildCardSlots(e);let i=n.getCardAttribute(e,"mana"),s="";s='<div class="card-mana tooltip" data-powertip="<span class=\'highlight\'>Mana:</span> energy cost to play this card"><span class="mana amount" data-amount="'+i+'">'+i+"</span></div>";let o=-1;o=n.getCardAttribute(e,"age");let d="",l="",c="";o>-1&&(c=1==o?"":"s",l="<span class='highlight'>Age:</span> Card has been retained for "+o+" turn"+c+" this combat",d+='<div class="card-age tooltip" data-powertip="'+l+'"><span class="age amount" data-amount="'+o+'">'+o+"</span></div>");let m=-1;m=n.getCardAttribute(e,"use");let u="",h="";m>-1&&(c=1==m?"":"s",h="<span class='highlight'>Use:</span> Number of times this card can be used before vanishing",u+='<span class="amount use tooltip" data-powertip="'+h+'" data-amount="'+m+'">'+m+"</span>");let g=-1;g=n.getCardAttribute(e,"expire");let p="",f="";g>-1&&(c=1==g?"":"s",f="<span class='highlight'>Expire:</span> Number of turns this card remains in your deck before vanishing",p+='<span class="amount expire tooltip" data-powertip="'+f+'" data-amount="'+g+'">'+g+"</span>");let y=-1;y=n.getCardAttribute(e,"linger");let w="",b="";y>-1&&(c=1==y?"":"s",b="<span class='highlight'>Linger:</span> Number of times this card can be played before it leaves your hand",w+='<span class="amount linger tooltip" data-powertip="'+b+'" data-amount="'+y+'">'+y+"</span>");let v=!1;v=n.getCardAttribute(e,"vanish");let C="",k="";v&&(k="<span class='highlight'>Vanish:</span> Becomes a dead card when played",C+='<div class="vanish tooltip" data-powertip="'+k+'"><span></span></div>');let x=!1;x=n.getCardAttribute(e,"retain");let _="",S="";x&&(S="<span class='highlight'>Retain:</span> Does not discard at the end of your turn",_+='<div class="retain tooltip" data-powertip="'+S+'"><span></span></div>');let G=!1;G=n.getCardAttribute(e,"ephemeral");let R="",L="";G&&(L="<span class='highlight'>Ephemeral:</span> Becomes a dead card if drawn but not played",R+='<div class="ephemeral tooltip" data-powertip="'+L+'"><span></span></div>');let A=!1;A=n.getCardAttribute(e,"breakable");let B="",D="";A&&(D="<span class='highlight'>Breakable:</span> When used up, card is permanently removed from your deck",B+='<div class="breakable tooltip" data-powertip="'+D+'"><span></span></div>');let M=e.combine?" combinable":"",T="",Y="";""!=M&&(Y="<span class='highlight'>Combinable:</span> When in hand, this card can be combined with another identical card to create a new more powerful card.",T+='<div class="combinable tooltip" data-powertip="'+Y+'"><span></span></div>');let P=!1;P=!n.getCardAttribute(e,"addable");let q="",F="";P&&(F="<span class='highlight'>Unaddable:</span> This card is not available in card reward screens or the market",q+='<div class="unaddable tooltip" data-powertip="'+F+'"><span></span></div>'),q="";let I=!1;I=n.getCardAttribute(e,"natural");let E="",O="";I&&(O="<span class='highlight'>Natural:</span> This card starts on the top of your draw pile each combat",E+='<div class="natural tooltip" data-powertip="'+O+'"><span></span></div>');let U=!1;U=n.getCardAttribute(e,"aura");let H="",z="";""!=U&&(z="<span class='highlight'>Stance:</span> Triggers extra effects when in <span class='aura'>Aura</span> stance",H+='<div class="card-stance aura-stance tooltip" data-powertip="'+z+'"><span></span></div>');let W=!1;W=n.getCardAttribute(e,"shimmer");let N="",j="";""!=W&&(j="<span class='highlight'>Stance:</span> Triggers extra effects when in <span class='shimmer'>Shimmer</span> stance",N+='<div class="card-stance shimmer-stance tooltip" data-powertip="'+j+'"><span></span></div>');let K=!1;K=n.getCardAttribute(e,"sparkle");let V="",Q="";""!=K&&(Q="<span class='highlight'>Stance:</span> Triggers extra effects when in <span class='sparkle'>Sparkle</span> stance",V+='<div class="card-stance sparkle-stance tooltip" data-powertip="'+Q+'"><span></span></div>');let J=!1;J=n.getCardAttribute(e,"trade");let X="",Z="";""!=J&&(Z="<span class='highlight'>Tradeable:</span> Can be traded at the market",X+='<div class="tradeable tooltip" data-powertip="'+Z+'"><span></span></div>');let ee=!1;ee=n.getCardAttribute(e,"weapon");let ae="",te="";""!=ee&&(te="<span class='highlight'>Weapon:</span> This is a weapon class card",ae+='<div class="weapon tooltip" data-powertip="'+te+'"><span></span></div>');let ne=!1;ne=n.getCardAttribute(e,"target");let re="",ie="";"all"==ne&&(ie="<span class='highlight'>AOE:</span> Targets all monsters",re+='<div class="aoe tooltip" data-powertip="'+ie+'"><span></span></div>');let se=!1;se=n.getCardAttribute(e,"pack");let oe="",de="";se&&"basic"!=se&&(de="From the <span class='highlight'>"+se+"</span> Pack",oe+='<div class="pack tooltip" data-powertip="'+de+'"><span></span></div>');let le=e.playable?"":" unplayable",ce=""!=r?" tooltip":"",me=""!=r?e.slotDesc:"";se=e.pack?" "+e.pack+"-pack":"",$("<div class='card-wrapper drawing'><div class='card "+e.tier+le+M+se+" "+e.type+" "+t+"' id='card-"+e.id+"' data-id='"+e.id+"' data-guid='"+e.guid+"' data-powertip='"+me+"'><div class='card-image'></div><div class='card-frame'></div><div class='card-type'>"+e.type+"</div><div class='card-rarity'></div>"+s+d+"<div class='bubbles-left'>"+u+p+w+"</div><div class='bubbles-right'>"+C+_+R+B+T+H+V+N+X+ae+re+q+E+"</div><div class='bubbles-bottom-left'>"+oe+"</div><div class='name'>"+e.name+"</div><div class='desc'><div class='desc-inner'>"+e.desc+"</div></div><div class='slots"+ce+"' data-powertip='"+me+"'>"+r+"</div><div class='card-courage tooltip' data-amount='"+e.courage+"' data-powertip='Courage coins'>"+e.courage+"</div></div></div>").appendTo(a).delay(1).queue((function(){$(this).removeClass("drawing").dequeue()})),n.setTooltips(a)}animateShowCards(){$(".show-cards").addClass("shown"),$(".show-cards .card").delay(1e3).queue((function(){$(this).addClass("disappearing").delay(500).queue((function(){$(".show-cards").removeClass("shown"),$(this).parent().remove().dequeue()})).dequeue()}))}appendMonster(e,a){$('<div class="monster '+e.id+" "+e.breed+'" data-id="'+a+'" data-guid="'+e.guid+'" data-tier="'+e.tier+'"><div class="monster-stats">'+e.statsDom+'</div><div class="sprite"></div><div class="combat-log"><div class="dmg-taken" data-amount="0"></div><div class="armor-lost" data-amount="0"></div><div class="health-gained" data-amount="0"></div><div class="health-lost" data-amount="0"></div><div class="status-text"></div></div><div class="monster-health creature-health"><div class="health-amount"><div class="armor-amount"><div class="armor-number"></div></div><div class="health-number"></div></div><div class="block-amount"><div class="block-number">'+e.block+'</div></div></div><div class="status-bar"></div></div>').appendTo(".monster-panel").hide().fadeIn(1500),n.setTooltips(".monster-panel")}appendTreasure(e,a){let t="";e.trigger.counter>-1&&(t="<span class='counter'>"+e.trigger.counter+"</span>");let r='<span class="highlight">'+e.name+":</span>";$("<div class='treasure tooltip "+e.id+"' style='background-position:"+1.5*e.x+"px "+1.5*e.y+"px;' data-id='"+e.id+"' data-powertip='"+r+"<br />"+e.desc+"'>"+t+"<div class='treasure-courage tooltip' data-amount='"+e.courage+"' data-powertip='Courage coins'>"+e.courage+"</div></div>").appendTo(a),n.setTooltips(a)}appendCandy(e,a,t){let r="trashable ";t&&(r+="clickable "),r+=""!=e.target?"targeted ":"";let i='<span class="highlight">'+e.name+":</span>";$("<div class='candy tooltip "+r+e.id+"' style='background-position:"+1.25*e.x+"px "+1.25*e.y+"px;' data-id='"+e.id+"' data-guid='"+e.guid+"' data-powertip='"+i+"<br />"+e.desc+"'><div class='candy-courage tooltip' data-amount='"+e.courage+"' data-powertip='Courage coins'>"+e.courage+"</div></div>").appendTo(a),n.setTooltips(a)}appendOption(e,a,t){let r=null!=e.desc?" ("+e.desc+")":"";$('<div class="button" data-option="'+e.id+'" data-quest="'+t+'">'+e.name+r+"</div>").appendTo(a),n.setTooltips(a)}appendStartingBonuses(){let e=n.shuffle(game.startingOptions);for(let a=0;a<4;a++){let t=e[a].att,n=e[a].amount,r=e[a].key,i=e[a].name,s=e[a].entity,o=e[a].action;$('<div class="button"'+(null!=t?' data-att="'+t+'"':"")+(null!=n?' data-amount="'+n+'"':"")+(null!=r?' data-key="'+r+'"':"")+(null!=s?' data-entity="'+s+'"':"")+(null!=o?' data-action="'+o+'"':"")+">"+i+"</div>").appendTo(".starting-options")}n.setTooltips(".starting-options")}appendBoosterPacks(){let e=game.boosterPacks;for(let a=0;a<e.length;a++)$('<div class="pack-button tooltip" data-pack="'+e[a]+'" data-powertip="View cards in this booster pack"><span>'+e[a]+" Pack</span></div>").appendTo(".starting-booster-packs");n.setTooltips(".starting-booster-packs")}getFirstEmptyElement(e){let a;return $(e).each((function(){if(0==$(this).children().length)return a=$(this),!1})),a}appendShard(e,a){let t='<span class="'+e.id+'">'+e.name+"</span> shard. Permanently attach this to a card with an empty shard slot";$("<div class='shard tooltip "+e.id+"' data-id='"+e.id+"' data-powertip='"+t+"'></div>").appendTo(a),n.setTooltips(a)}appendEssence(e,a){$("<div class='essence tooltip "+e+"' data-id='"+e+"' data-powertip='Increases your <span class=\""+e+'">'+e+"</span> essence'></div>").appendTo(a),n.setTooltips(a)}appendConfirm(e,a){$('<div class="button play-card tooltip" data-powertip="Or you can click an identical card to combine them." data-guid="'+e.guid+'">Play This Card</div>').appendTo(a),n.setTooltips(a)}removeCard(e,a){$(a).children().eq(e).parent().remove()}removeCardByGuid(e,a="none"){switch(a){case"none":$(".card[data-guid="+e+"]").parent().remove();break;case"discarded":$(".card[data-guid="+e+"]").parent().addClass("discarded").delay(300).queue((function(){$(this).remove().dequeue()}));break;case"played":$(".card[data-guid="+e+"]").parent().addClass("discarding").delay(300).queue((function(){$(this).removeClass("discarding").addClass("discarded").delay(300).queue((function(){$(this).remove().dequeue()})).dequeue()}));break;case"destroyed":$(".card[data-guid="+e+"]").parent().addClass("destroying").delay(2e3).queue((function(){$(this).remove().dequeue()}));break;case"replaced":$(".card[data-guid="+e+"]").parent().addClass("replacing").delay(2e3).queue((function(){$(this).remove().dequeue()}))}}removeMonster(e){"ghost"==e.breed||"singularity"==game.mapType?$(".monster[data-guid="+e.guid+"]").addClass("hidden dead").removeClass("clickable"):$(".monster[data-guid="+e.guid+"]").addClass("dead").removeClass("clickable")}hasAttribute(e,a){return null!=e[a]&&0!=e[a]}getCardAttribute(e,a,t=!1){let r="";return t?(null!=e[t]&&null!=e[t][a]&&(r=e[t][a]),e.shards.length>0&&(null!=e.shardUpgrades[t]&&null!=e.shardUpgrades[t][a]&&(r=e.shardUpgrades[t][a]),n.getShardNum(e,"frost")>0&&null!=e.iceShardUpgrades[t]&&null!=e.iceShardUpgrades[t][a]&&(r=e.iceShardUpgrades[t][a]),n.getShardNum(e,"flame")>0&&null!=e.fireShardUpgrades[t]&&null!=e.fireShardUpgrades[t][a]&&(r=e.fireShardUpgrades[t][a]),e.shards.length>1&&(null!=e.bothShardUpgrades[t]&&null!=e.bothShardUpgrades[t][a]&&(r=e.bothShardUpgrades[t][a]),n.getShardNum(e,"frost")>1&&(null!=e.iceShardUpgrades[t]&&null!=e.iceShardUpgrades[t][a+"_2"]&&(r=e.iceShardUpgrades[t][a+"_2"]),null!=e.iceShardUpgrades[t+"_2"]&&null!=e.iceShardUpgrades[t+"_2"][a]&&(r=e.iceShardUpgrades[t+"_2"][a])),n.getShardNum(e,"flame")>1&&(null!=e.fireShardUpgrades[t]&&null!=e.fireShardUpgrades[t][a+"_2"]&&(r=e.fireShardUpgrades[t][a+"_2"]),null!=e.fireShardUpgrades[t+"_2"]&&null!=e.fireShardUpgrades[t+"_2"][a]&&(r=e.fireShardUpgrades[t+"_2"][a]))))):(null!=e[a]&&(r=e[a]),e.shards?.length>0&&(null!=e.shardUpgrades[a]&&(r=e.shardUpgrades[a]),n.getShardNum(e,"frost")>0&&null!=e.iceShardUpgrades[a]&&(r=e.iceShardUpgrades[a]),n.getShardNum(e,"flame")>0&&null!=e.fireShardUpgrades[a]&&(r=e.fireShardUpgrades[a]),e.shards.length>1&&(null!=e.bothShardUpgrades&&null!=e.bothShardUpgrades[a]&&(r=e.bothShardUpgrades[a]),n.getShardNum(e,"frost")>1&&null!=e.iceShardUpgrades&&null!=e.iceShardUpgrades[a+"_2"]&&(r=e.iceShardUpgrades[a+"_2"]),n.getShardNum(e,"flame")>1&&null!=e.fireShardUpgrades&&null!=e.fireShardUpgrades[a+"_2"]&&(r=e.fireShardUpgrades[a+"_2"])))),r}getShardAttribute(e,a,t,n=!1){let r="";return n?(null!=e.shardUpgrades[n]&&null!=e.shardUpgrades[n][t]&&(r=e.shardUpgrades[n][t]),"frost"==a&&null!=e.iceShardUpgrades[n]&&null!=e.iceShardUpgrades[n][t]&&(r=e.iceShardUpgrades[n][t]),"flame"==a&&null!=e.fireShardUpgrades[n]&&null!=e.fireShardUpgrades[n][t]&&(r=e.fireShardUpgrades[n][t]),e.shards.length>1&&(null!=e.bothShardUpgrades[n]&&null!=e.bothShardUpgrades[n][t]&&(r=e.bothShardUpgrades[n][t]),"frost_2"==a&&(null!=e.iceShardUpgrades[n]&&null!=e.iceShardUpgrades[n][t+"_2"]&&(r=e.iceShardUpgrades[n][t+"_2"]),null!=e.iceShardUpgrades[n+"_2"]&&null!=e.iceShardUpgrades[n+"_2"][t]&&(r=e.iceShardUpgrades[n+"_2"][t])),"flame_2"==a&&(null!=e.fireShardUpgrades[n]&&null!=e.fireShardUpgrades[n][t+"_2"]&&(r=e.fireShardUpgrades[n][t+"_2"]),null!=e.fireShardUpgrades[n+"_2"]&&null!=e.fireShardUpgrades[n+"_2"][t]&&(r=e.fireShardUpgrades[n+"_2"][t])))):(null!=e.shardUpgrades[t]&&(r=e.shardUpgrades[t]),"frost"==a&&null!=e.iceShardUpgrades[t]&&(r=e.iceShardUpgrades[t]),"flame"==a&&null!=e.fireShardUpgrades[t]&&(r=e.fireShardUpgrades[t]),e.shards.length>1&&(null!=e.bothShardUpgrades&&null!=e.bothShardUpgrades[t]&&(r=e.bothShardUpgrades[t]),"frost_2"==a&&null!=e.iceShardUpgrades&&null!=e.iceShardUpgrades[t+"_2"]&&(r=e.iceShardUpgrades[t+"_2"]),"flame_2"==a&&null!=e.fireShardUpgrades&&null!=e.fireShardUpgrades[t+"_2"]&&(r=e.fireShardUpgrades[t+"_2"]))),r}hasPlayAction(e){let a=!1;return(n.getCardAttribute(e,"blk").length>0||n.getCardAttribute(e,"armor").length>0||n.getCardAttribute(e,"magic").length>0||n.getCardAttribute(e,"effects").length>0||n.getCardAttribute(e,"abilities").length>0||n.getCardAttribute(e,"actions").length>0)&&(a=!0),a}getShardNum(e,a){let t=0;return t="any"==a?e.shards.length:e.shards.filter((e=>e===a)).length,t}getQuestSubOptions(e,a){if(e.id===a)return e;if(e.options)for(let t=0;t<e.options.length;t++){const r=n.getQuestSubOptions(e.options[t],a);if(r)return r}return!1}getCardById(e,a){return null==a.cards?a.find((({id:a})=>a===e)):a.cards.find((({id:a})=>a===e))}getTreasureById(e,a){return a.find((({id:a})=>a===e))}getCandyById(e,a){return a.find((({id:a})=>a===e))}getCardByGuid(e,a){return a.find((({guid:a})=>a===e))}getDomCardByGuid(e){return $(".card[data-guid="+e+"]:first")}getDomCardById(e){return $(".card[data-id="+e+"]:first")}getCardFromPile(e,a){return a.find((({guid:a})=>a===e.guid))}getStatPercentage(e,a){return Math.round(100*(e/a+Number.EPSILON)).toFixed(0)}pickAWinningItem(e){let a=n.rand(),t=0;for(let n=0;n<e.length;n++)if(t+=parseFloat(e[n].p),t>a)return n}weightedRandom(e){const a=e.reduce(((e,a)=>e+a.weight),0),t=Math.random()*a;let n=0;for(const a of e)if(n+=a.weight,t<n)return a;return null}wait(e){return new Promise((a=>{setTimeout((()=>{a()}),e)}))}async updateEssencePercentage(e){let a=game.essenceThresholds[player[e].level],t=game.essenceThresholds[player[e].level-1];null==t&&(t=0);let n=(player[e].current-t)/(a-t)*100,r="";player[e].level>game.essences.length&&(n=100,r="capped"),$(".essence-bar."+e+" .essence-bar-inner").css("width",n+"%"),$(".essence-bar."+e).addClass(r)}updateAggroPercentage(){let e=1==game.map?game.aggroThresholds:game.aggroThresholds2,a=e[player.aggro.level],t=e[player.aggro.level-1];null==t&&(t=0);let n=(player.aggro.current-t)/(a-t)*100;player.aggro.level>=e.length&&(n=100),$(".aggro-bar .aggro-bar-inner").css("width",n+"%")}setInitialTooltips(){$(".top-bar .tooltip").powerTip({followMouse:!0,placement:"s",offset:40,fadeInTime:50,fadeOutTime:30,closeDelay:100,intentPollInterval:30,intentSensitivity:5,popupClass:"tooltip-top-bar"}),$(".bottom-bar .tooltip").powerTip({followMouse:!1,smartPlacement:!0,placement:"n",offset:10,fadeInTime:0,fadeOutTime:0,closeDelay:0,intentPollInterval:0,intentSensitivity:100,popupClass:"tooltip-bottom-bar"}),$(".bottom-bar .tooltip-right").powerTip({followMouse:!1,smartPlacement:!0,placement:"nw",offset:5,fadeInTime:0,fadeOutTime:0,closeDelay:0,intentPollInterval:0,intentSensitivity:100,popupClass:"tooltip-bottom-bar"}),$(".magic-rainbow").powerTip({followMouse:!0,offset:5,fadeInTime:50,fadeOutTime:30,closeDelay:100,intentPollInterval:30,intentSensitivity:5,popupClass:"standard"})}setSplashTooltips(){$("#splash").find(".tooltip").powerTip({followMouse:!0,offset:40,fadeInTime:50,fadeOutTime:30,closeDelay:100,intentPollInterval:30,intentSensitivity:5,popupClass:"standard"})}setTooltips(e){$(e).find(".tooltip").powerTip({followMouse:!0,offset:40,fadeInTime:50,fadeOutTime:30,closeDelay:100,intentPollInterval:30,intentSensitivity:5,popupClass:"standard"})}setTooltip(e,a=!1){a?$(e).powerTip({followMouse:!1,smartPlacement:!0,placement:"n",offset:5,fadeInTime:0,fadeOutTime:0,closeDelay:0,intentPollInterval:0,intentSensitivity:100,popupClass:a}):$(e).powerTip({followMouse:!0,offset:5,fadeInTime:50,fadeOutTime:30,closeDelay:100,intentPollInterval:30,intentSensitivity:5,popupClass:"standard"})}clearTooltips(){$.powerTip.destroy(),n.setTooltips(".map-inner"),n.setTooltips(".buttons-wrapper"),n.setTooltips(".treasures"),n.setTooltips(".candies"),n.setInitialTooltips()}getFromDisplay(e){return"handCards"==e?e="hand cards":"drawCards"==e?e="draw pile":"discardCards"==e?e="discard pile":"deadCards"==e?e="dead cards":"allCards"==e&&(e="all cards"),e}sound(e){return new Howl({src:["audio/"+e],sprite:{arenaRewards:[0,7839],rewards:[7839,4540],loot:[12379,2405],gainArmor:[14757,839],attackCard:[15596,280],loseBlock:[15876,839],loseArmor:[16715,603],gainBlk:[17320,641],deselectCard:[17962,517],startingBonus:[18479,1521],viewCards:[2e4,483],drawCard:[20483,136],doneCards:[20597,535],takeDmg:[21132,858],toolCard:[21990,1e3],magicCard:[26309,1828],heal:[28135,1991],clickButton:[30127,668],choosePack:[31393,3999],clickShard:[35392,3e3],selectCard:[38389,660],removeCard:[39049,2e3],attachShard:[41049,2341],buyItem:[43390,984],addTreasure:[44374,1655],addCandy:[46029,1181],eatCandy:[47210,1787],shimmerAmount:[48997,1878],auraAmount:[50875,2125],sparkleAmount:[53e3,1717],essenceLevel:[54717,1283],trashCandy:[56e3,1e3],aggroLevel:[57e3,1959],frolic:[58959,2768],applyEffect:[61722,917],applyAbility:[61722,917],hex:[62639,1418],vex:[64057,961],death:[65020,1694],activateRainbow:[66719,1694],muddleMagic:[75243,1476],combineCards:[76719,1e3],transmuteCard:[77719,873],focus:[84874,2365],grow:[99425,2138],statUp:[101563,1238],statDown:[102801,920],courage:[146724,2755],jester:[22990,1e3],trade:[320737,1408],gate:[330767,10837],available:[23990,964],magic1:[78592,6282],magic2:[68413,1831],magic3:[70244,2523],magic4:[72767,1512],magic5:[74279,964],magic6:[87239,2264],magic7:[89503,3436],magic8:[92939,4064],magic9:[97003,2422],magic10:[103721,2612],magic11:[106333,2775],magic12:[109108,3487],magic13:[112595,3708],magic14:[116303,1079],magic15:[118382,1171],magic16:[119553,2616],magic17:[122169,4513],magic18:[276253,3424],magic19:[281880,7332],magic20:[289212,5873],magic21:[295085,7500],magic22:[302585,6212],magic23:[276253,5627],magic24:[308797,4591],attack1:[126682,876],attack2:[146236,488],attack3:[128024,1979],attack4:[130003,1810],attack5:[131813,2188],attack6:[134001,1006],attack7:[135007,785],attack8:[135792,1339],attack9:[137131,1350],attack10:[138481,1242],attack11:[139723,754],attack12:[140477,1242],attack13:[141719,2003],attack14:[143722,998],attack15:[144720,1520],attack16:[149479,2727],attack17:[152206,581],attack18:[241940,1791],attack19:[243731,5152],attack20:[248883,1595],attack21:[250478,2504],attack22:[252982,3296],attack23:[313375,1104],tool1:[152787,3615],tool2:[156402,1836],tool3:[158238,3179],tool4:[161417,973],tool5:[162390,2610],tool6:[165e3,2481],tool7:[167481,1186],tool8:[168667,1408],tool9:[170075,2163],tool10:[172238,871],tool11:[174e3,1483],tool12:[175483,951],tool13:[176434,902],tool14:[177336,810],tool15:[178146,622],tool16:[178768,1064],tool17:[179832,1649],tool18:[181481,1570],tool19:[183051,2249],tool20:[185300,1420],tool21:[186720,2114],tool22:[188834,2245],tool23:[191079,2e3],tool24:[256278,3202],tool25:[259480,2164],tool26:[261644,2387],tool27:[264031,3998],tool29:[268029,4850],tool28:[272829,3424],effect1:[193079,1163],effect2:[194242,437],effect3:[194679,802],effect4:[195481,540],effect5:[196021,885],effect6:[196906,1001],effect7:[197907,745],effect8:[198652,921],effect9:[199573,669],effect10:[200242,670],effect11:[200912,569],effect12:[201481,747],effect13:[202228,597],effect14:[202825,411],effect15:[203236,722],effect16:[203958,2284],effect17:[206242,1997],effect18:[208239,280],effect19:[208519,2699],effect20:[211218,2263],effect21:[213481,1519],effect22:[215e3,1e3],effect23:[216e3,2e3],effect24:[218e3,2e3],effect25:[22e4,624],effect26:[220624,427],effect27:[221051,2436],effect28:[223487,1951],effect29:[225438,2385],effect30:[227823,1041],effect31:[228863,1274],effect32:[230137,1863],effect33:[232e3,1725],effect34:[233725,1758],effect35:[235483,1999],effect36:[237482,2212],effect37:[239694,2246],effect38:[314485,994],effect39:[315480,3391],effect40:[318870,1882],effect41:[322149,3162],effect42:[325311,2970],effect43:[328285,2469],effect44:[341604,1331]}})}music(e,a=1){return new Howl({src:["audio/"+e],loop:!0,volume:a})}}const n=new t,r=new t,i=[{att:"courage",name:"+8 Courage Coins",amount:8},{att:"armor",name:"+40 Armor",amount:40},{att:"health",key:"max",name:"+20 Max Health",amount:20},{att:"aura",key:"current",name:"+5 Aura",amount:5},{att:"sparkle",key:"current",name:"+5 Sparkle",amount:5},{att:"shimmer",key:"current",name:"+5 Shimmer",amount:5},{att:"rainbow",key:"base",name:"+12 Rainbow Base",amount:12},{att:"aggro",key:"current",name:"-5 Aggro",entity:"game",amount:-5},{action:"addRare",name:"Add a random rare card, lose 12 health"},{action:"addCommonTreasure",name:"Add a random common treasure"},{action:"addUncommonTreasure",name:"Add a random uncommon treasure, lose 20 health"},{action:"addRareTreasure",name:"Add a random rare treasure, lose 10 max health"}],s=["combine","rainbow","cycle"],o=["sparkle","shimmer","aura"],d=[{id:"rainbow",name:"Rainbow",desc:"Base rainbow magic at the start of each combat",x:-384,y:-4992,hex:!1},{id:"speed",name:"Speed",desc:"Card draw per turn",x:-32,y:-5922},{id:"solid",name:"Solid",desc:"Gain x extra block each time you gain block",x:-256,y:-4672,sound:"effect5",hex:!1},{id:"might",name:"Might",desc:"Attack damage modifier",x:-288,y:-4960,sound:"effect30",hex:!1},{id:"punch",name:"Punch",desc:"Attack damage multiplier",x:-482,y:-7072,sound:"effect26",hex:!1},{id:"mend",name:"Mend",desc:"Gain x extra hit points each time you heal",x:-224,y:-6720,sound:"effect25",hex:!1},{id:"craft",name:"Craft",desc:"Gain x extra armor each time you gain armor",x:-288,y:-6048,sound:"effect9",hex:!1},{id:"cunning",name:"Cunning",desc:"Extra armor converts to x times block",x:-480,y:-6498,sound:"effect2",hex:!1},{id:"vigor",name:"Vigor",desc:"Extra armor converts to x times health",x:-288,y:-6368,sound:"effect3",hex:!1},{id:"stout",name:"Stout",desc:"Block gained at the start of each turn",x:-192,y:-15104,sound:"effect4",hex:!1},{id:"muster",name:"Muster",desc:"Armor gained at the start of each turn",x:-192,y:-15168,sound:"effect5",hex:!1},{id:"rowdy",name:"Rowdy",desc:"Add x to current crit chance",x:-320,y:-7136,sound:"effect1",hex:!1},{id:"fierce",name:"Fierce",desc:"Additional crit damage. Gets added to total extra damage of crit.",x:-96,y:-7264,sound:"effect24",hex:!1},{id:"mastery",name:"Mastery",desc:"Crit damage multiplier. 1 Mastery = +10% multiplier (150% default base + 10% = 160% total)",x:-320,y:-7200,sound:"effect22",hex:!1},{id:"heal",name:"Heal",desc:"Health gained at the end of combat",x:-32,y:-6592,sound:"effect7",hex:!1},{id:"conjure",name:"Conjure",desc:"When charging magic rainbow, charge it x amount more",x:-288,y:-4672,sound:"effect27",hex:!1},{id:"sorcery",name:"Sorcery",desc:"When charging magic rainbow, charge it x% more",x:-64,y:-6816,sound:"effect8",hex:!1},{id:"momentum",name:"Momentum",desc:"Increase attack damage x amount per attack this turn",x:-286,y:-6562,sound:"effect32",hex:!1},{id:"wield",name:"Wield",desc:"Every deck cycle charges magic rainbow to maximum x times",x:-96,y:-5120,hex:!1},{id:"resistance",name:"Resistance",desc:"Resists magic damage",x:-32,y:-5152,sound:"effect35",delay:!0,hex:!1},{id:"lemonade",name:"Lemonade",desc:"Gain x health at the start of each turn for each clutter card in draw pile",x:-224,y:-3904,hex:!1},{id:"spikes",name:"Spikes",desc:"Any armor lost as a result of attack damage does x dmg back to attacker",x:-384,y:-5184,sound:"effect15",delay:!0,hex:!1},{id:"vex",name:"Vex",desc:"Block the next x hexes this combat",x:-482,y:-5856,sound:"effect23",delay:!0,hex:!1},{id:"mage",name:"Mage",desc:"Each time you cycle rainbow, gain x lightning",x:-448,y:-6498,sound:"effect33",hex:!1},{id:"enchanter",name:"Enchanter",desc:"Each time you charge your rainbow without activating it, gain x% thunder",x:-448,y:-6466,sound:"effect34",hex:!1},{id:"summon",name:"Summon",desc:"Charge your magic rainbow x amount per turn",x:-448,y:-6434,sound:"effect29",hex:!1},{id:"arcane",name:"Arcane",desc:"Whenever you muddle your magic or summom muddled magic, charge rainbow x amount more",x:0,y:-5408,sound:"effect31",hex:!1},{id:"fatality",name:"Fatality",desc:"Your next attack card does x times your highest unblocked non-fatality hit",x:-288,y:-7232,sound:"effect17",hex:!1},{id:"retaliate",name:"Retaliate",desc:"Any attack damage taken does x dmg back to attacker",x:-256,y:-6784,delay:!0,hex:!1},{id:"mystery",name:"Mystery",desc:"? cards are played x extra times",x:-384,y:-32,sound:"effect20",hex:!1},{id:"regen",name:"Regen",desc:"Heal x each turn and decrease x by 1",x:-128,y:-5760,sound:"effect6",hex:!1},{id:"wisdom",name:"Wisdom",desc:"Card age boosts damage, block, armor, magic, and health amounts",x:-416,y:-6304,sound:"effect28",hex:!1},{id:"lightning",name:"Lightning",desc:"Your magic rainbow does x extra damage",x:-160,y:-6496,sound:"effect37",hex:!1},{id:"thunder",name:"Thunder",desc:"Magic damage multiplier",x:-160,y:-6528,sound:"effect36",hex:!1},{id:"retain",name:"Retain",desc:"Select x cards to keep in hand each turn",x:-352,y:-418,sound:"effect38",hex:!1},{id:"antimomentum",name:"Anti-Momentum",desc:"Receive x damage and increase it by x for every card played this turn",x:-480,y:-5440,hex:!0},{id:"marked",name:"Marked",desc:"Receive x damage for every card played",x:-384,y:-6528,hex:!0},{id:"insulate",name:"Insulate",desc:"Gain x block each time you play a card",x:-256,y:-6880,hex:!1},{id:"irradiate",name:"Irradiate",desc:"Deal x damage to all enemies at the start of your turn",x:-160,y:-7584,hex:!1},{id:"replenish",name:"Replenish",desc:"Draw x cards every time you destroy a card",x:-416,y:-385,hex:!1},{id:"combiner",name:"Combiner",desc:"Draw x cards every time you combine a card",x:-162,y:-4672,hex:!1},{id:"fatigued",name:"Fatigued",desc:"Lose x might each turn",x:-192,y:-6688,hex:!0},{id:"vulnerable",name:"Vulnerable",desc:"Lose x solid each turn",x:-128,y:-6688,hex:!0},{id:"stifled",name:"Stifled",desc:"Lose x conjure each turn",x:-96,y:-6688,hex:!0},{id:"angered",name:"Angered",desc:"Gain x might each time you are hexed",x:0,y:-5024,hex:!1},{id:"hardened",name:"Hardened",desc:"Gain x block each time you take damage",x:-448,y:-6560,hex:!1},{id:"shapeshifter",name:"Shapeshifter",desc:"Gain x block each time you change stances",x:-32,y:-5984,hex:!1},{id:"fend",name:"Fend",desc:"Gain x block each time you combine cards",x:-320,y:-5856,hex:!1},{id:"ward",name:"Ward",desc:"Gain x block each time you destroy a card",x:-162,y:-5856,hex:!1},{id:"cover",name:"Cover",desc:"Gain x block each time you activate your magic rainbow",x:-64,y:-5856,hex:!1},{id:"preserve",name:"Preserve",desc:"Gain x block each time you discard a card",x:-96,y:-7712,hex:!1},{id:"veil",name:"Veil",desc:"Gain x resistance each time you receive magic damage",x:-384,y:-6240,hex:!1}],l=[{id:"protection",name:"Protection",desc:"Retain block each turn",context:"turn",x:-160,y:-1182,sound:"effect10",offset:!0},{id:"unreachable",name:"Unreachable",desc:"All damage reduced to 1 per attack",context:"turn",x:-288,y:-7646,delay:!0},{id:"tank",name:"Tank",desc:"Damage only applies to armor",context:"turn",x:-224,y:-5856,sound:"effect11",delay:!0},{id:"toothache",name:"Toothache",desc:"Cannot eat candy",context:"turn",x:-288,y:-1856},{id:"prepared",name:"Prepared",desc:"If you draw 4 or less cards gain [6 - cards drawn] speed next turn",context:"turn",x:0,y:-32,sound:"effect12"},{id:"bless",name:"Bless",desc:"Whenever you play an ability a random card becomes free for the rest of combat",context:"turn",x:-256,y:-5696,sound:"effect16"},{id:"hypnotize",name:"Hypnotize",desc:"A random enemy targets itself",context:"turn",x:-448,y:-5248,sound:"effect19",delay:!0},{id:"stockpile",name:"Stockpile",desc:"Any block at the end of turn converts to armor",context:"turn",x:-160,y:-1118,sound:"effect14",delay:!0},{id:"sift",name:"Sift",desc:"Clutter cards become ephemeral",context:"turn",x:-96,y:-1632,sound:"effect18"},{id:"panic",name:"Panic",desc:"Deal damage + block but lose block",context:"turn",x:-416,y:-7136,sound:"effect21"},{id:"expirex",name:"Expire-X&trade;",desc:"Cards no longer expire",context:"turn",x:-480,y:-4544},{id:"magick",name:"Magick",desc:"Non-muddled magic rainbow charging has extra benefits based on magic type",context:"turn",x:-384,y:-5568,sound:"effect39"},{id:"amplify",name:"Amplify",desc:"Magick, Lightning, and Thunder effects are doubled",context:"turn",x:-224,y:-5728,sound:"effect40"},{id:"explode",name:"Explode",desc:"Your next attack does double damage",context:"card",x:-384,y:-7200},{id:"guild_member",name:"Guild Member",desc:"Unlimited weapon trading",context:"card",x:-352,y:0},{id:"resurrect",name:"Resurrect",desc:"Each time this creature receives damage, add one random monster to combat next turn",context:"turn",x:-416,y:-6592,offset:!0},{id:"supernatural",name:"Supernatural",desc:"Natural cards are always drawn first",context:"turn",x:-96,y:-5760},{id:"eternal",name:"Eternal",desc:"Cannot be debuffed",context:"turn",x:-448,y:-5760,offset:!0},{id:"frozen",name:"Frozen",desc:"Lose this turn",context:"turn",x:-384,y:-6560,offset:!0,hex:!0}],c=[{id:"draw",name:"Draw",desc:"Draw x cards"},{id:"discard",name:"Discard",desc:"Discard x cards"},{id:"destroy",name:"Destroy",desc:"Destroy x cards"},{id:"addCard",name:"Add Card",desc:"Add x copies of a specific card or types/tiers of cards to your draw/hand/discard/dead piles.",sound:"tool2"},{id:"findDrawCard",name:"Find Draw Card",desc:"Draw x cards from your draw pile"},{id:"findDiscardCard",name:"Find Discard Card",desc:"Draw x cards from your discard pile"},{id:"findDeadCard",name:"Find Dead Card",desc:"Draw x cards from your dead pile"},{id:"stat",name:"Stat",desc:"Increase/decrease specific stat by x amount"},{id:"removeHexes",name:"Remove Hexes",desc:"Remove all hexes",sound:"effect41"},{id:"removeBuffs",name:"Remove Buffs",desc:"Remove all buffs",sound:"effect43"},{id:"transmute",name:"Transmute",desc:"Transform x cards into random other cards"},{id:"ensharden",name:"Ensharden",desc:"Apply fire, ice, or random shards to x number of selected cards in x pile"},{id:"playOldest",name:"Play Oldest",desc:"Play your oldest card in hand for free"},{id:"playHand",name:"Play Your Entire Hand",desc:"Play all cards in your hand for free"},{id:"discardHand",name:"Discard Your Entire Hand",desc:"Discard all cards in your hand"},{id:"destroyHand",name:"Destroy Your Entire Hand",desc:"Destroy all cards in your hand"},{id:"summonMonster",name:"Summon",desc:"Summons a new monster",sound:"effect42"},{id:"kill",name:"Kill",desc:"Creature dies this turn"},{id:"rainbowShield",name:"Rainbow Shield",desc:"Gain block equal to x times your max rainbow"}],m=new t,u=new t;class h{constructor({guid:e,type:a="monster",block:t=0,armor:n=0,health:r,actions:i=[],solid:s={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},speed:o={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},might:d={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},punch:l={base:1,current:1,temp:[],turns:0,persist:!1,hexed:!1},mend:c={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},craft:m={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},cunning:u={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},vigor:h={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},stout:g={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},muster:p={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},rowdy:f={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},fierce:y={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},mastery:w={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},heal:b={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},conjure:v={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},sorcery:C={base:1,current:1,temp:[],turns:0,persist:!1,hexed:!1},rainbow:k={base:0,current:0,temp:[],turns:0,max:0,type:"rainbow"},momentum:x={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},wield:_={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},resistance:S={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},lemonade:$={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},spikes:G={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},vex:R={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},mage:L={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},enchanter:A={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},summon:B={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},arcane:D={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},fatality:M={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},retaliate:T={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},mystery:Y={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},regen:P={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},wisdom:q={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},lightning:F={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},thunder:I={base:1,current:1,temp:[],turns:0,persist:!1,hexed:!1},retain:E={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},antimomentum:O={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},marked:U={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},insulate:H={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},irradiate:z={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},replenish:W={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},combiner:N={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},fatigued:j={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},vulnerable:K={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},stifled:V={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},angered:Q={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},hardened:J={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},shapeshifter:X={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},fend:Z={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},ward:ee={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},cover:ae={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},preserve:te={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},veil:ne={base:0,current:0,temp:[],turns:0,persist:!1,hexed:!1},protection:re={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},unreachable:ie={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},tank:se={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},toothache:oe={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},prepared:de={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},bless:le={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},hypnotize:ce={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},stockpile:me={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},sift:ue={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},panic:he={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},expirex:ge={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},magick:pe={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},amplify:fe={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},explode:ye={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},guild_member:we={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},resurrect:be={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},supernatural:ve={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},eternal:Ce={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},frozen:ke={enabled:!1,baseTurns:0,turns:0,persist:!1,permanent:!1},id:xe,breed:_e,name:Se,pattern:$e="fixed",moveSet:Ge=[],tier:Re=1,context:Le="forest",category:Ae="normal",courage:Be=0,momentumAmount:De=0,antimomentumAmount:Me=0,mana:Te}){this.dead=!1,this.guid=e,this.type=a,this.block=t,this.armor=n,this.health=r,this.actions=i,this.actionsDom="",this.statsDom="",this.solid=s,this.might=d,this.punch=l,this.mend=c,this.craft=m,this.cunning=u,this.vigor=h,this.stout=g,this.muster=p,this.rowdy=f,this.fierce=y,this.mastery=w,this.heal=b,this.sorcery=C,this.conjure=v,this.momentum=x,this.wield=_,this.resistance=S,this.lemonade=$,this.spikes=G,this.vex=R,this.mage=L,this.enchanter=A,this.summon=B,this.arcane=D,this.fatality=M,this.retaliate=T,this.mystery=Y,this.regen=P,this.wisdom=q,this.lightning=F,this.thunder=I,this.retain=E,this.antimomentum=O,this.marked=U,this.insulate=H,this.irradiate=z,this.replenish=W,this.combiner=N,this.fatigued=j,this.vulnerable=K,this.stifled=V,this.angered=Q,this.hardened=J,this.shapeshifter=X,this.fend=Z,this.ward=ee,this.cover=ae,this.preserve=te,this.veil=ne,this.effectsDom="",this.protection=re,this.unreachable=ie,this.tank=se,this.toothache=oe,this.prepared=de,this.bless=le,this.hypnotize=ce,this.stockpile=me,this.sift=ue,this.panic=he,this.expirex=ge,this.magick=pe,this.amplify=fe,this.explode=ye,this.guild_member=we,this.resurrect=be,this.supernatural=ve,this.eternal=Ce,this.frozen=ke,this.abilitiesDom="",this.id=xe,this.breed=_e,this.name=Se,this.pattern=$e,this.moveSet=Ge,this.chosenMoveSetIndex=-1,this.tier=Re,this.context=Le,this.category=Ae,this.stance="none",this.sparkle={current:0,level:0},this.shimmer={current:0,level:0},this.aura={current:0,level:0},this.aggro={current:0,level:0},this.courage=Be,this.cardsOwned=0,this.treasures=[],this.candies=[],this.mana=Te,this.rainbow=k,this.speed=o,this.momentumAmount=De,this.antimomentumAmount=Me}}const g=[new h({type:"monster",id:"pixie",breed:"pixie",name:"Pixie",health:{base:32,current:0,max:32},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:2,turns:-1},{effect:"heal",amount:5,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:2,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:3,turns:-1},{effect:"heal",amount:5,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:4,turns:-1}]},{dmg:[1,1,1]}]}),new h({type:"monster",id:"mummy",breed:"mummy",name:"Mummy",health:{base:45,current:0,max:45},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:2,turns:-1},{effect:"might",amount:-1,turns:1,hex:!0}]},{dmg:[12]},{dmg:[6,6]},{blk:[10],effects:[{effect:"might",amount:-1,turns:1,hex:!0}]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"stone_walker",breed:"stone_walker",name:"Stone Walker",health:{base:34,current:0,max:34},armor:10,pattern:"random",moveSet:[{effects:[{effect:"might",amount:2,turns:2}],p:.2},{dmg:[8],blk:[4],p:.2},{dmg:[4],blk:[8],p:.2},{dmg:[11],p:.2},{armor:[8],p:.2}]}),new h({type:"monster",id:"sludge",breed:"sludge",name:"Sludge",health:{base:26,current:0,max:26},block:20,pattern:"fixed",moveSet:[{effects:[{effect:"punch",amount:-.1,turns:1,hex:!0}]},{effects:[{effect:"might",amount:1,turns:3}],actions:[{action:"addCard",value:1,what:"junk",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"chaff",to:"drawCards",hex:!0}]},{dmg:[15]},{blk:[10]},{dmg:[5,5]},{blk:[10],actions:[{action:"addCard",value:1,what:"debris",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"chaff",to:"drawCards",hex:!0}]},{dmg:[15]},{blk:[10]},{dmg:[5,5]},{blk:[10],actions:[{action:"addCard",value:1,what:"briars",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"mired",to:"drawCards",hex:!0}]}],stout:{base:2,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"imp",breed:"imp",name:"Imp",health:{base:40,current:0,max:40},pattern:"random",moveSet:[{effects:[{effect:"rainbow",amount:-5,hex:!0},{effect:"solid",amount:-2,turns:1,hex:!0}],p:.2},{dmg:[15],p:.2},{dmg:[9],blk:[5],p:.3},{abilities:[{ability:"tank",hex:!0}],dmg:[15],p:.3}]}),new h({type:"monster",context:"frost",id:"frost_pixie",breed:"pixie",name:"Frost Pixie",health:{base:64,current:0,max:64},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:2,turns:-1},{effect:"heal",amount:5,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:2,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:3,turns:-1},{effect:"heal",amount:5,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:4,turns:-1}]},{dmg:[1,1,1]}]}),new h({type:"monster",context:"frost",id:"frost_mummy",breed:"mummy",name:"Frost Mummy",health:{base:90,current:0,max:90},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:2,turns:-1},{effect:"might",amount:-1,turns:1,hex:!0}]},{dmg:[12]},{dmg:[6,6]},{blk:[10],effects:[{effect:"might",amount:-1,turns:1,hex:!0}]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_stone_walker",breed:"stone_walker",name:"Frost Stone Walker",health:{base:68,current:0,max:68},armor:20,pattern:"random",moveSet:[{effects:[{effect:"might",amount:2,turns:2}],p:.2},{dmg:[8],blk:[4],p:.2},{dmg:[4],blk:[8],p:.2},{dmg:[11],p:.2},{armor:[8],p:.2}]}),new h({type:"monster",context:"frost",id:"frost_sludge",breed:"sludge",name:"Frost Sludge",health:{base:52,current:0,max:52},block:40,pattern:"fixed",moveSet:[{effects:[{effect:"punch",amount:-.1,turns:1,hex:!0}]},{effects:[{effect:"might",amount:1,turns:3}],actions:[{action:"addCard",value:1,what:"junk",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"chaff",to:"drawCards",hex:!0}]},{dmg:[15]},{blk:[10]},{dmg:[5,5]},{blk:[10],actions:[{action:"addCard",value:1,what:"debris",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"chaff",to:"drawCards",hex:!0}]},{dmg:[15]},{blk:[10]},{dmg:[5,5]},{blk:[10],actions:[{action:"addCard",value:1,what:"briars",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"mired",to:"drawCards",hex:!0}]}],stout:{base:2,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_imp",breed:"imp",name:"Frost Imp",health:{base:80,current:0,max:80},pattern:"random",moveSet:[{effects:[{effect:"rainbow",amount:-5,hex:!0},{effect:"solid",amount:-2,turns:1,hex:!0}],p:.2},{dmg:[15],p:.2},{dmg:[9],blk:[5],p:.3},{abilities:[{ability:"tank",hex:!0}],dmg:[15],p:.3}]}),new h({type:"monster",context:"flame",id:"flame_pixie",breed:"pixie",name:"Flame Pixie",health:{base:32,current:0,max:32},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:2,turns:-1},{effect:"heal",amount:5,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:2,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:3,turns:-1},{effect:"heal",amount:5,turns:-1}]},{dmg:[1,1,1]},{effects:[{effect:"might",amount:4,turns:-1}]},{dmg:[1,1,1]}]}),new h({type:"monster",context:"flame",id:"flame_mummy",breed:"mummy",name:"Flame Mummy",health:{base:45,current:0,max:45},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:2,turns:-1},{effect:"might",amount:-1,turns:1,hex:!0}]},{dmg:[12]},{dmg:[6,6]},{blk:[10],effects:[{effect:"might",amount:-1,turns:1,hex:!0}]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_stone_walker",breed:"stone_walker",name:"Flame Stone Walker",health:{base:34,current:0,max:34},armor:10,pattern:"random",moveSet:[{effects:[{effect:"might",amount:2,turns:2}],p:.2},{dmg:[8],blk:[4],p:.2},{dmg:[4],blk:[8],p:.2},{dmg:[11],p:.2},{armor:[8],p:.2}]}),new h({type:"monster",context:"flame",id:"flame_sludge",breed:"sludge",name:"Flame Sludge",health:{base:26,current:0,max:26},block:20,pattern:"fixed",moveSet:[{effects:[{effect:"punch",amount:-.1,turns:1,hex:!0}]},{effects:[{effect:"might",amount:1,turns:3}],actions:[{action:"addCard",value:1,what:"junk",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"chaff",to:"drawCards",hex:!0}]},{dmg:[15]},{blk:[10]},{dmg:[5,5]},{blk:[10],actions:[{action:"addCard",value:1,what:"debris",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"chaff",to:"drawCards",hex:!0}]},{dmg:[15]},{blk:[10]},{dmg:[5,5]},{blk:[10],actions:[{action:"addCard",value:1,what:"briars",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"mired",to:"drawCards",hex:!0}]}],stout:{base:2,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_imp",breed:"imp",name:"Flame Imp",health:{base:40,current:0,max:40},pattern:"random",moveSet:[{effects:[{effect:"rainbow",amount:-5,hex:!0},{effect:"solid",amount:-2,turns:1,hex:!0}],p:.2},{dmg:[15],p:.2},{dmg:[9],blk:[5],p:.3},{abilities:[{ability:"tank",hex:!0}],dmg:[15],p:.3}]}),new h({type:"monster",id:"shatter",breed:"shatter",name:"Shatter",health:{base:50,current:0,max:50},tier:2,pattern:"fixed",moveSet:[{effects:[{effect:"retaliate",amount:2,turns:-1}]},{dmg:[20]},{dmg:[8,8],blk:[10]},{armor:[4],effects:[{effect:"retaliate",amount:3,turns:-1}]},{dmg:[1,2,3,4,5]}],retaliate:{base:4,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"void_fairy",breed:"void_fairy",name:"Void Fairy",health:{base:65,current:0,max:65},tier:2,pattern:"fixed",moveSet:[{dmg:[12],effects:[{effect:"resistance",amount:.5,turns:2}]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{dmg:[11,11]},{abilities:[{ability:"unreachable",hex:!0}],dmg:[1,1,1,1,1,1,1,1]},{blk:[12]},{dmg:[25],blk:[5]},{effects:[{effect:"punch",amount:-.4,turns:3,hex:!0}]},{abilities:[{ability:"unreachable",hex:!0},{ability:"tank",hex:!0}],dmg:[2,2,2,2,2]},{dmg:[35]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"enchantress",breed:"enchantress",name:"Enchantress",health:{base:48,current:0,max:48},tier:2,armor:5,pattern:"random",moveSet:[{actions:[{action:"addCard",value:1,what:"execrate",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"curse",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"flay",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:1,what:"execrate",to:"discardCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"curse",to:"discardCards",hex:!0}],p:.1},{dmg:[15],actions:[{action:"addCard",value:2,what:"flay",to:"discardCards",hex:!0}],p:.1},{armor:[15],dmg:[23],actions:[{action:"removeHexes",to:"self"}],p:.1},{blk:[15],dmg:[23],actions:[{action:"removeHexes",to:"self"}],p:.1},{actions:[{action:"summonMonster",what:["swirler","striker"],value:2}],p:.1},{actions:[{action:"summonMonster",what:["blob","flamehead"],value:2}],p:.1}],resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",id:"power_liche",breed:"power_liche",name:"Power Liche",health:{base:70,current:0,max:70},tier:2,pattern:"fixed",moveSet:[{dmg:[15]},{effects:[{effect:"might",amount:7,turns:-1},{effect:"resistance",amount:.3,turns:2},{effect:"vex",amount:1,turns:-1}]}]}),new h({type:"monster",id:"iron_walker",breed:"iron_walker",name:"Iron Walker",health:{base:92,current:0,max:92},tier:2,pattern:"fixed",moveSet:[{effects:[{effect:"stout",amount:2,turns:-1},{effect:"might",amount:3,turns:-1}]},{dmg:[28]}]}),new h({type:"monster",context:"frost",id:"frost_shatter",breed:"shatter",name:"Frost Shatter",health:{base:100,current:0,max:100},tier:2,pattern:"fixed",moveSet:[{effects:[{effect:"retaliate",amount:2,turns:-1}]},{dmg:[20]},{dmg:[8,8],blk:[10]},{armor:[4],effects:[{effect:"retaliate",amount:3,turns:-1}]},{dmg:[1,2,3,4,5]}],retaliate:{base:4,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_void_fairy",breed:"void_fairy",name:"Frost Void Fairy",health:{base:130,current:0,max:130},tier:2,pattern:"fixed",moveSet:[{dmg:[12],effects:[{effect:"resistance",amount:.5,turns:2}]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{dmg:[11,11]},{abilities:[{ability:"unreachable",hex:!0}],dmg:[1,1,1,1,1,1,1,1]},{blk:[12]},{dmg:[25],blk:[5]},{effects:[{effect:"punch",amount:-.4,turns:3,hex:!0}]},{abilities:[{ability:"unreachable",hex:!0},{ability:"tank",hex:!0}],dmg:[2,2,2,2,2]},{dmg:[35]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_enchantress",breed:"enchantress",name:"Frost Enchantress",health:{base:96,current:0,max:96},tier:2,armor:10,pattern:"random",moveSet:[{actions:[{action:"addCard",value:1,what:"execrate",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"curse",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"flay",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:1,what:"execrate",to:"discardCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"curse",to:"discardCards",hex:!0}],p:.1},{dmg:[15],actions:[{action:"addCard",value:2,what:"flay",to:"discardCards",hex:!0}],p:.1},{armor:[15],dmg:[23],actions:[{action:"removeHexes",to:"self"}],p:.1},{blk:[15],dmg:[23],actions:[{action:"removeHexes",to:"self"}],p:.1},{actions:[{action:"summonMonster",what:["swirler","striker"],value:2}],p:.1},{actions:[{action:"summonMonster",what:["blob","flamehead"],value:2}],p:.1}],resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",context:"frost",id:"frost_power_liche",breed:"power_liche",name:"Frost Power Liche",health:{base:140,current:0,max:140},tier:2,pattern:"fixed",moveSet:[{dmg:[15]},{effects:[{effect:"might",amount:7,turns:-1},{effect:"resistance",amount:.3,turns:2},{effect:"vex",amount:1,turns:-1}]}]}),new h({type:"monster",context:"frost",id:"frost_iron_walker",breed:"iron_walker",name:"Frost Iron Walker",health:{base:184,current:0,max:184},tier:2,pattern:"fixed",moveSet:[{effects:[{effect:"stout",amount:2,turns:-1},{effect:"might",amount:3,turns:-1}]},{dmg:[28]}]}),new h({type:"monster",context:"flame",id:"flame_shatter",breed:"shatter",name:"Flame Shatter",health:{base:50,current:0,max:50},tier:2,pattern:"fixed",moveSet:[{effects:[{effect:"retaliate",amount:2,turns:-1}]},{dmg:[20]},{dmg:[8,8],blk:[10]},{armor:[4],effects:[{effect:"retaliate",amount:3,turns:-1}]},{dmg:[1,2,3,4,5]}],retaliate:{base:4,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_void_fairy",breed:"void_fairy",name:"Flame Void Fairy",health:{base:65,current:0,max:65},tier:2,pattern:"fixed",moveSet:[{dmg:[12],effects:[{effect:"resistance",amount:.5,turns:2}]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{dmg:[11,11]},{abilities:[{ability:"unreachable",hex:!0}],dmg:[1,1,1,1,1,1,1,1]},{blk:[12]},{dmg:[25],blk:[5]},{effects:[{effect:"punch",amount:-.4,turns:3,hex:!0}]},{abilities:[{ability:"unreachable",hex:!0},{ability:"tank",hex:!0}],dmg:[2,2,2,2,2]},{dmg:[35]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_enchantress",breed:"enchantress",name:"Flame Enchantress",health:{base:48,current:0,max:48},tier:2,armor:5,pattern:"random",moveSet:[{actions:[{action:"addCard",value:1,what:"execrate",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"curse",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"flay",to:"drawCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:1,what:"execrate",to:"discardCards",hex:!0}],p:.1},{actions:[{action:"addCard",value:2,what:"curse",to:"discardCards",hex:!0}],p:.1},{dmg:[15],actions:[{action:"addCard",value:2,what:"flay",to:"discardCards",hex:!0}],p:.1},{armor:[15],dmg:[23],actions:[{action:"removeHexes",to:"self"}],p:.1},{blk:[15],dmg:[23],actions:[{action:"removeHexes",to:"self"}],p:.1},{actions:[{action:"summonMonster",what:["swirler","striker"],value:2}],p:.1},{actions:[{action:"summonMonster",what:["blob","flamehead"],value:2}],p:.1}],resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",context:"flame",id:"flame_power_liche",breed:"power_liche",name:"Flame Power Liche",health:{base:70,current:0,max:70},tier:2,pattern:"fixed",moveSet:[{dmg:[15]},{effects:[{effect:"might",amount:7,turns:-1},{effect:"resistance",amount:.3,turns:2},{effect:"vex",amount:1,turns:-1}]}]}),new h({type:"monster",context:"flame",id:"flame_iron_walker",breed:"iron_walker",name:"Flame Iron Walker",health:{base:92,current:0,max:92},tier:2,pattern:"fixed",moveSet:[{effects:[{effect:"stout",amount:2,turns:-1},{effect:"might",amount:3,turns:-1}]},{dmg:[28]}]}),new h({type:"monster",id:"swarm",breed:"swarm",name:"Swarm",health:{base:25,current:0,max:25},tier:3,armor:25,block:25,pattern:"fixed",moveSet:[{dmg:[20],blk:[25],effects:[{effect:"regen",amount:5,turns:-1}],abilities:[{ability:"protection",turns:-1,enabled:!0}]},{blk:[25],effects:[{effect:"vigor",amount:1,turns:-1},{effect:"craft",amount:3,turns:-1}]},{dmg:[3,3,3,3,3,3,3,3]},{dmg:[5,5,5,5,5,5]}],heal:{base:10,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"sorcerer",breed:"sorcerer",name:"Sorcerer",health:{base:95,current:0,max:95},tier:3,pattern:"fixed",moveSet:[{effects:[{effect:"conjure",amount:-4,turns:4,hex:!0}]},{dmg:[8,8]},{blk:[10],effects:[{effect:"stifled",amount:1,turns:-1,hex:!0}]},{dmg:[9,9]},{blk:[10],dmg:[10,10]},{dmg:[10,10]},{blk:[10]}],vex:{base:3,current:0,temp:[],turns:-1},resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",id:"fel_dragon",breed:"fel_dragon",name:"Fel Dragon",health:{base:125,current:0,max:125},tier:3,pattern:"random",moveSet:[{dmg:[15],effects:[{effect:"retaliate",amount:7,turns:1},{effect:"vex",amount:1,turns:-1}],p:.1},{dmg:[15],effects:[{effect:"spikes",amount:10,turns:1},{effect:"vex",amount:1,turns:-1}],armor:[20],p:.1},{dmg:[22],effects:[{effect:"might",amount:2,turns:-1}],abilities:[{ability:"stockpile",turns:-1,enabled:!0}],p:.1},{dmg:[34],p:.1},{dmg:[10],blk:[15],p:.1},{dmg:[18],p:.1},{blk:[15],p:.1},{dmg:[8],armor:[10],blk:[10],p:.1},{dmg:[5],blk:[20],p:.1},{blk:[20],p:.1}]}),new h({type:"monster",id:"cunning_dragon",breed:"cunning_dragon",name:"Cunning Dragon",health:{base:125,current:0,max:125},tier:3,pattern:"random",moveSet:[{dmg:[15],effects:[{effect:"solid",amount:-1,turns:-1,hex:!0},{effect:"resistance",amount:.2,turns:2},{effect:"vex",amount:1,turns:-1}],p:.1},{dmg:[15],effects:[{effect:"craft",amount:-2,turns:-1,hex:!0},{effect:"vex",amount:1,turns:-1}],armor:[20],p:.1},{dmg:[22],effects:[{effect:"might",amount:1,turns:-1}],abilities:[{ability:"stockpile",turns:-1,enabled:!0}],p:.1},{dmg:[34],p:.1},{dmg:[10],blk:[15],p:.1},{dmg:[18],p:.1},{blk:[15],p:.1},{dmg:[8],armor:[10],blk:[10],p:.1},{dmg:[5],blk:[20],p:.1},{blk:[20],p:.1}]}),new h({type:"monster",id:"cyberskull",breed:"cyberskull",name:"Cyberskull",health:{base:110,current:0,max:110},pattern:"fixed",tier:3,moveSet:[{effects:[{effect:"might",amount:3,turns:-1}],dmg:[2,2,2,2,2,2]}]}),new h({type:"monster",context:"frost",id:"frost_swarm",breed:"swarm",name:"Frost Swarm",health:{base:50,current:0,max:50},tier:3,armor:50,block:50,pattern:"fixed",moveSet:[{dmg:[20],blk:[25],effects:[{effect:"regen",amount:5,turns:-1}],abilities:[{ability:"protection",turns:-1,enabled:!0}]},{blk:[25],effects:[{effect:"vigor",amount:1,turns:-1},{effect:"craft",amount:3,turns:-1}]},{dmg:[3,3,3,3,3,3,3,3]},{dmg:[5,5,5,5,5,5]}],heal:{base:10,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_sorcerer",breed:"sorcerer",name:"Frost Sorcerer",health:{base:190,current:0,max:190},tier:3,pattern:"fixed",moveSet:[{effects:[{effect:"conjure",amount:-4,turns:4,hex:!0}]},{dmg:[8,8]},{blk:[10],effects:[{effect:"stifled",amount:1,turns:-1,hex:!0}]},{dmg:[9,9]},{blk:[10],dmg:[10,10]},{dmg:[10,10]},{blk:[10]}],vex:{base:3,current:0,temp:[],turns:-1},resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",context:"frost",id:"frost_fel_dragon",breed:"fel_dragon",name:"Frost Fel Dragon",health:{base:250,current:0,max:250},tier:3,pattern:"random",moveSet:[{dmg:[15],effects:[{effect:"retaliate",amount:7,turns:1},{effect:"vex",amount:1,turns:-1}],p:.1},{dmg:[15],effects:[{effect:"spikes",amount:10,turns:1},{effect:"vex",amount:1,turns:-1}],armor:[20],p:.1},{dmg:[22],effects:[{effect:"might",amount:2,turns:-1}],abilities:[{ability:"stockpile",turns:-1,enabled:!0}],p:.1},{dmg:[34],p:.1},{dmg:[10],blk:[15],p:.1},{dmg:[18],p:.1},{blk:[15],p:.1},{dmg:[8],armor:[10],blk:[10],p:.1},{dmg:[5],blk:[20],p:.1},{blk:[20],p:.1}]}),new h({type:"monster",context:"frost",id:"frost_cunning_dragon",breed:"cunning_dragon",name:"Frost Cunning Dragon",health:{base:250,current:0,max:250},tier:3,pattern:"random",moveSet:[{dmg:[15],effects:[{effect:"solid",amount:-1,turns:-1,hex:!0},{effect:"resistance",amount:.2,turns:2},{effect:"vex",amount:1,turns:-1}],p:.1},{dmg:[15],effects:[{effect:"craft",amount:-2,turns:-1,hex:!0},{effect:"vex",amount:1,turns:-1}],armor:[20],p:.1},{dmg:[22],effects:[{effect:"might",amount:1,turns:-1}],abilities:[{ability:"stockpile",turns:-1,enabled:!0}],p:.1},{dmg:[34],p:.1},{dmg:[10],blk:[15],p:.1},{dmg:[18],p:.1},{blk:[15],p:.1},{dmg:[8],armor:[10],blk:[10],p:.1},{dmg:[5],blk:[20],p:.1},{blk:[20],p:.1}]}),new h({type:"monster",context:"frost",id:"frost_cyberskull",breed:"cyberskull",name:"Frost Cyberskull",health:{base:220,current:0,max:220},pattern:"fixed",tier:3,moveSet:[{effects:[{effect:"might",amount:3,turns:-1}],dmg:[2,2,2,2,2,2]}]}),new h({type:"monster",context:"flame",id:"flame_swarm",breed:"swarm",name:"Flame Swarm",health:{base:25,current:0,max:25},tier:3,armor:25,block:25,pattern:"fixed",moveSet:[{dmg:[20],blk:[25],effects:[{effect:"regen",amount:5,turns:-1}],abilities:[{ability:"protection",turns:-1,enabled:!0}]},{blk:[25],effects:[{effect:"vigor",amount:1,turns:-1},{effect:"craft",amount:3,turns:-1}]},{dmg:[3,3,3,3,3,3,3,3]},{dmg:[5,5,5,5,5,5]}],heal:{base:10,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_sorcerer",breed:"sorcerer",name:"Flame Sorcerer",health:{base:95,current:0,max:95},tier:3,pattern:"fixed",moveSet:[{effects:[{effect:"conjure",amount:-4,turns:4,hex:!0}]},{dmg:[8,8]},{blk:[10],effects:[{effect:"stifled",amount:1,turns:-1,hex:!0}]},{dmg:[9,9]},{blk:[10],dmg:[10,10]},{dmg:[10,10]},{blk:[10]}],vex:{base:3,current:0,temp:[],turns:-1},resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",context:"flame",id:"flame_fel_dragon",breed:"fel_dragon",name:"Flame Fel Dragon",health:{base:125,current:0,max:125},tier:3,pattern:"random",moveSet:[{dmg:[15],effects:[{effect:"retaliate",amount:7,turns:1},{effect:"vex",amount:1,turns:-1}],p:.1},{dmg:[15],effects:[{effect:"spikes",amount:10,turns:1},{effect:"vex",amount:1,turns:-1}],armor:[20],p:.1},{dmg:[22],effects:[{effect:"might",amount:2,turns:-1}],abilities:[{ability:"stockpile",turns:-1,enabled:!0}],p:.1},{dmg:[34],p:.1},{dmg:[10],blk:[15],p:.1},{dmg:[18],p:.1},{blk:[15],p:.1},{dmg:[8],armor:[10],blk:[10],p:.1},{dmg:[5],blk:[20],p:.1},{blk:[20],p:.1}]}),new h({type:"monster",context:"flame",id:"flame_cunning_dragon",breed:"cunning_dragon",name:"Flame Cunning Dragon",health:{base:125,current:0,max:125},tier:3,pattern:"random",moveSet:[{dmg:[15],effects:[{effect:"solid",amount:-1,turns:-1,hex:!0},{effect:"resistance",amount:.2,turns:2},{effect:"vex",amount:1,turns:-1}],p:.1},{dmg:[15],effects:[{effect:"craft",amount:-2,turns:-1,hex:!0},{effect:"vex",amount:1,turns:-1}],armor:[20],p:.1},{dmg:[22],effects:[{effect:"might",amount:1,turns:-1}],abilities:[{ability:"stockpile",turns:-1,enabled:!0}],p:.1},{dmg:[34],p:.1},{dmg:[10],blk:[15],p:.1},{dmg:[18],p:.1},{blk:[15],p:.1},{dmg:[8],armor:[10],blk:[10],p:.1},{dmg:[5],blk:[20],p:.1},{blk:[20],p:.1}]}),new h({type:"monster",context:"flame",id:"flame_cyberskull",breed:"cyberskull",name:"Flame Cyberskull",health:{base:110,current:0,max:110},pattern:"fixed",tier:3,moveSet:[{effects:[{effect:"might",amount:3,turns:-1}],dmg:[2,2,2,2,2,2]}]}),new h({type:"monster",id:"transfigurer",breed:"transfigurer",name:"Transfigurer",health:{base:175,current:0,max:175},pattern:"fixed",tier:4,moveSet:[{dmg:[15],effects:[{effect:"punch",amount:-.25,turns:-1,hex:!0}]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25],effects:[{effect:"vulnerable",amount:1,turns:-1,hex:!0}]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]}]}),new h({type:"monster",id:"writhing_dragon",breed:"writhing_dragon",name:"Writhing Dragon",health:{base:220,current:0,max:220},armor:30,tier:4,pattern:"random",moveSet:[{effects:[{effect:"might",amount:3,turns:-1}],dmg:[30],p:.3},{effects:[{effect:"vex",amount:1,turns:-1}],dmg:[40],p:.3},{dmg:[50],p:.1},{blk:[10],actions:[{action:"addCard",value:2,what:"broken",to:"handCards",hex:!0}],p:.3}]}),new h({type:"monster",id:"darkness_dragon",breed:"darkness_dragon",name:"Darkness Dragon",health:{base:165,current:0,max:165},armor:68,tier:4,pattern:"random",moveSet:[{blk:[12],armor:[10],p:.25},{dmg:[34],armor:[5],p:.25},{effects:[{effect:"resistance",amount:.8,turns:2}],dmg:[36],armor:[15],p:.25},{dmg:[16],blk:[10],armor:[10],p:.25}],vigor:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"obsidian_walker",breed:"obsidian_walker",name:"Obsidian Walker",health:{base:250,current:0,max:250},tier:4,pattern:"fixed",moveSet:[{actions:[{action:"addCard",value:5,what:"chaff",to:"drawCards",hex:!0}],dmg:[5,5,5,5,5,5]},{effects:[{effect:"stout",amount:5,turns:-1},{effect:"solid",amount:4,turns:-1}]},{blk:[18]},{dmg:[35]}]}),new h({type:"monster",id:"seething_entity",breed:"seething_entity",name:"Seething Entity",health:{base:150,current:0,max:150},tier:4,armor:20,pattern:"fixed",moveSet:[{effects:[{effect:"regen",amount:5,turns:-1}],blk:[15]},{dmg:[2,2,2,2,2,2,2,2],effects:[{effect:"might",amount:1,turns:-1}]},{dmg:[3,3,3,3,3,3,3,3],effects:[{effect:"punch",amount:-.4,turns:2,hex:!0}]},{dmg:[4,4,4,4,4,4,4,4]}],heal:{base:8,current:0,temp:[],turns:-1},regen:{base:5,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_transfigurer",breed:"transfigurer",name:"Frost Transfigurer",health:{base:350,current:0,max:350},pattern:"fixed",tier:4,moveSet:[{dmg:[15],effects:[{effect:"punch",amount:-.25,turns:-1,hex:!0}]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25],effects:[{effect:"vulnerable",amount:1,turns:-1,hex:!0}]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]}]}),new h({type:"monster",context:"frost",id:"frost_writhing_dragon",breed:"writhing_dragon",name:"Frost Writhing Dragon",health:{base:440,current:0,max:440},armor:60,tier:4,pattern:"random",moveSet:[{effects:[{effect:"might",amount:3,turns:-1}],dmg:[30],p:.3},{effects:[{effect:"vex",amount:1,turns:-1}],dmg:[40],p:.3},{dmg:[50],p:.1},{blk:[10],actions:[{action:"addCard",value:2,what:"broken",to:"handCards",hex:!0}],p:.3}]}),new h({type:"monster",context:"frost",id:"frost_darkness_dragon",breed:"darkness_dragon",name:"Frost Darkness Dragon",health:{base:330,current:0,max:330},armor:136,tier:4,pattern:"random",moveSet:[{blk:[12],armor:[10],p:.25},{dmg:[34],armor:[5],p:.25},{effects:[{effect:"resistance",amount:.8,turns:2}],dmg:[36],armor:[15],p:.25},{dmg:[16],blk:[10],armor:[10],p:.25}],vigor:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_obsidian_walker",breed:"obsidian_walker",name:"Frost Obsidian Walker",health:{base:500,current:0,max:500},tier:4,pattern:"fixed",moveSet:[{actions:[{action:"addCard",value:5,what:"chaff",to:"drawCards",hex:!0}],dmg:[5,5,5,5,5,5]},{effects:[{effect:"stout",amount:5,turns:-1},{effect:"solid",amount:4,turns:-1}]},{blk:[18]},{dmg:[35]}]}),new h({type:"monster",context:"frost",id:"frost_seething_entity",breed:"seething_entity",name:"Frost Seething Entity",health:{base:300,current:0,max:300},tier:4,armor:40,pattern:"fixed",moveSet:[{effects:[{effect:"regen",amount:5,turns:-1}],blk:[15]},{dmg:[2,2,2,2,2,2,2,2],effects:[{effect:"might",amount:1,turns:-1}]},{dmg:[3,3,3,3,3,3,3,3],effects:[{effect:"punch",amount:-.4,turns:2,hex:!0}]},{dmg:[4,4,4,4,4,4,4,4]}],heal:{base:8,current:0,temp:[],turns:-1},regen:{base:5,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_transfigurer",breed:"transfigurer",name:"Flame Transfigurer",health:{base:175,current:0,max:175},pattern:"fixed",tier:4,moveSet:[{dmg:[15],effects:[{effect:"punch",amount:-.25,turns:-1,hex:!0}]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25],effects:[{effect:"vulnerable",amount:1,turns:-1,hex:!0}]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[25]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]},{abilities:[{ability:"unreachable",turns:1,enabled:!0}]},{armor:[5],dmg:[35]},{armor:[8],dmg:[25]}]}),new h({type:"monster",context:"flame",id:"flame_writhing_dragon",breed:"writhing_dragon",name:"Flame Writhing Dragon",health:{base:220,current:0,max:220},armor:30,tier:4,pattern:"random",moveSet:[{effects:[{effect:"might",amount:3,turns:-1}],dmg:[30],p:.3},{effects:[{effect:"vex",amount:1,turns:-1}],dmg:[40],p:.3},{dmg:[50],p:.1},{blk:[10],actions:[{action:"addCard",value:2,what:"broken",to:"handCards",hex:!0}],p:.3}]}),new h({type:"monster",context:"flame",id:"flame_darkness_dragon",breed:"darkness_dragon",name:"Flame Darkness Dragon",health:{base:165,current:0,max:165},armor:68,tier:4,pattern:"random",moveSet:[{blk:[12],armor:[10],p:.25},{dmg:[34],armor:[5],p:.25},{effects:[{effect:"resistance",amount:.8,turns:2}],dmg:[36],armor:[15],p:.25},{dmg:[16],blk:[10],armor:[10],p:.25}],vigor:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_obsidian_walker",breed:"obsidian_walker",name:"Flame Obsidian Walker",health:{base:250,current:0,max:250},tier:4,pattern:"fixed",moveSet:[{actions:[{action:"addCard",value:5,what:"chaff",to:"drawCards",hex:!0}],dmg:[5,5,5,5,5,5]},{effects:[{effect:"stout",amount:5,turns:-1},{effect:"solid",amount:4,turns:-1}]},{blk:[18]},{dmg:[35]}]}),new h({type:"monster",context:"flame",id:"flame_seething_entity",breed:"seething_entity",name:"Flame Seething Entity",health:{base:150,current:0,max:150},tier:4,armor:20,pattern:"fixed",moveSet:[{effects:[{effect:"regen",amount:5,turns:-1}],blk:[15]},{dmg:[2,2,2,2,2,2,2,2],effects:[{effect:"might",amount:1,turns:-1}]},{dmg:[3,3,3,3,3,3,3,3],effects:[{effect:"punch",amount:-.4,turns:2,hex:!0}]},{dmg:[4,4,4,4,4,4,4,4]}],heal:{base:8,current:0,temp:[],turns:-1},regen:{base:5,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"ultraumaton",breed:"ultraumaton",name:"Ultraumaton",health:{base:310,current:0,max:310},tier:5,category:"boss",pattern:"fixed",moveSet:[{blk:[25],abilities:[{ability:"protection",turns:-1,enabled:!0}],effects:[{effect:"marked",amount:1,turns:5,hex:!0}],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{actions:[{action:"summonMonster",what:"seer",value:2},{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}],effects:[{effect:"might",amount:4,turns:-1},{effect:"punch",amount:.1,turns:-1}]},{blk:[25],effects:[{effect:"vex",amount:1,turns:-1}],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[40],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{blk:[25],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[40],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[35],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]}]}),new h({type:"monster",id:"unmaker",breed:"unmaker",name:"Unmaker",health:{base:350,current:0,max:350},tier:5,category:"boss",pattern:"fixed",moveSet:[{effects:[{effect:"resistance",amount:.4,turns:2}],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[35],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[25,25],actions:[{action:"summonMonster",what:"stinger",value:2},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{armor:[20],blk:[20],effects:[{effect:"fatigued",amount:1,turns:6,hex:!0}],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[30],actions:[{action:"addCard",value:1,what:"timid",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"lethargy",to:"discardCards",hex:!0},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[30],actions:[{action:"addCard",value:1,what:"execrate",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"flay",to:"discardCards",hex:!0},{action:"summonMonster",what:"cave_spider",value:2},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}],effects:[{effect:"might",amount:10,turn:1}]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"arch_summoner",breed:"arch_summoner",name:"Arch Summoner",health:{base:300,current:0,max:300},tier:5,category:"boss",pattern:"fixed",moveSet:[{effects:[{effect:"rainbow",amount:-2,turns:1,hex:!0},{effect:"sorcery",amount:-.2,turns:1,hex:!0}],dmg:[3,3,3,3,3,3,3,3],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0},{action:"summonMonster",what:["red_skeleton","blue_skeleton"],value:1}]},{effects:[{effect:"conjure",amount:-5,turns:1,hex:!0}],actions:[{action:"addCard",value:1,what:"curse",to:"drawCards",hex:!0},{action:"removeHexes",to:"self"},{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"rainbow",amount:-4,turns:1,hex:!0},{effect:"sorcery",amount:-.4,turns:1,hex:!0}],dmg:[4,4,4,4,4,4,4,4],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"conjure",amount:-5,turns:2,hex:!0}],actions:[{action:"addCard",value:1,what:"curse",to:"discardCards",hex:!0},{action:"removeHexes",to:"self"},{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0},{action:"summonMonster",what:["red_skeleton","blue_skeleton"],value:1}]},{dmg:[5,5,5,5,5,5,5,5],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"might",amount:5,turns:1},{effect:"vex",amount:1,turns:-1}],dmg:[6,6,6,6,6,6,6,6],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]}],resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",context:"frost",id:"frost_ultraumaton",breed:"ultraumaton",name:"Frost Ultraumaton",health:{base:620,current:0,max:620},tier:5,category:"boss",pattern:"fixed",moveSet:[{blk:[25],abilities:[{ability:"protection",turns:-1,enabled:!0}],effects:[{effect:"marked",amount:1,turns:5,hex:!0}],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{actions:[{action:"summonMonster",what:"seer",value:2},{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}],effects:[{effect:"might",amount:4,turns:-1},{effect:"punch",amount:.1,turns:-1}]},{blk:[25],effects:[{effect:"vex",amount:1,turns:-1}],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[40],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{blk:[25],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[40],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[35],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]}]}),new h({type:"monster",context:"frost",id:"frost_unmaker",breed:"unmaker",name:"Frost Unmaker",health:{base:700,current:0,max:700},tier:5,category:"boss",pattern:"fixed",moveSet:[{effects:[{effect:"resistance",amount:.4,turns:2}],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[35],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[25,25],actions:[{action:"summonMonster",what:"stinger",value:2},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{armor:[20],blk:[20],effects:[{effect:"fatigued",amount:1,turns:6,hex:!0}],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[30],actions:[{action:"addCard",value:1,what:"timid",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"lethargy",to:"discardCards",hex:!0},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[30],actions:[{action:"addCard",value:1,what:"execrate",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"flay",to:"discardCards",hex:!0},{action:"summonMonster",what:"cave_spider",value:2},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}],effects:[{effect:"might",amount:10,turn:1}]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"frost_arch_summoner",breed:"arch_summoner",name:"Frost Arch Summoner",health:{base:600,current:0,max:600},tier:5,category:"boss",pattern:"fixed",moveSet:[{effects:[{effect:"rainbow",amount:-2,turns:1,hex:!0},{effect:"sorcery",amount:-.2,turns:1,hex:!0}],dmg:[3,3,3,3,3,3,3,3],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0},{action:"summonMonster",what:["red_skeleton","blue_skeleton"],value:1}]},{effects:[{effect:"conjure",amount:-5,turns:1,hex:!0}],actions:[{action:"addCard",value:1,what:"curse",to:"drawCards",hex:!0},{action:"removeHexes",to:"self"},{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"rainbow",amount:-4,turns:1,hex:!0},{effect:"sorcery",amount:-.4,turns:1,hex:!0}],dmg:[4,4,4,4,4,4,4,4],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"conjure",amount:-5,turns:2,hex:!0}],actions:[{action:"addCard",value:1,what:"curse",to:"discardCards",hex:!0},{action:"removeHexes",to:"self"},{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0},{action:"summonMonster",what:["red_skeleton","blue_skeleton"],value:1}]},{dmg:[5,5,5,5,5,5,5,5],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"might",amount:5,turns:1},{effect:"vex",amount:1,turns:-1}],dmg:[6,6,6,6,6,6,6,6],actions:[{action:"stat",what:"thunder",key:"current",value:10,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]}],resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",context:"flame",id:"flame_ultraumaton",breed:"ultraumaton",name:"Flame Ultraumaton",health:{base:310,current:0,max:310},tier:5,category:"boss",pattern:"fixed",moveSet:[{blk:[25],abilities:[{ability:"protection",turns:-1,enabled:!0}],effects:[{effect:"marked",amount:1,turns:5,hex:!0}],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{actions:[{action:"summonMonster",what:"seer",value:2},{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}],effects:[{effect:"might",amount:4,turns:-1},{effect:"punch",amount:.1,turns:-1}]},{blk:[25],effects:[{effect:"vex",amount:1,turns:-1}],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[40],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{blk:[25],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[40],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]},{dmg:[35],actions:[{action:"stat",what:"might",key:"current",value:0,desc:"Remove might",additive:!1,hex:!0},{action:"stat",what:"punch",key:"current",value:1,desc:"Remove punch",additive:!1,hex:!0}]}]}),new h({type:"monster",context:"flame",id:"flame_unmaker",breed:"unmaker",name:"Flame Unmaker",health:{base:350,current:0,max:350},tier:5,category:"boss",pattern:"fixed",moveSet:[{effects:[{effect:"resistance",amount:.4,turns:2}],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[35],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[25,25],actions:[{action:"summonMonster",what:"stinger",value:2},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{armor:[20],blk:[20],effects:[{effect:"fatigued",amount:1,turns:6,hex:!0}],actions:[{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[30],actions:[{action:"addCard",value:1,what:"timid",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"lethargy",to:"discardCards",hex:!0},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}]},{dmg:[30],actions:[{action:"addCard",value:1,what:"execrate",to:"drawCards",hex:!0},{action:"addCard",value:1,what:"flay",to:"discardCards",hex:!0},{action:"summonMonster",what:"cave_spider",value:2},{action:"stat",what:"solid",key:"current",value:0,desc:"Remove solid",additive:!1,hex:!0},{action:"stat",what:"stout",key:"current",value:0,desc:"Remove stout",additive:!1,hex:!0}],effects:[{effect:"might",amount:10,turn:1}]}],vex:{base:1,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"flame_arch_summoner",breed:"arch_summoner",name:"Flame Arch Summoner",health:{base:300,current:0,max:300},tier:5,category:"boss",pattern:"fixed",moveSet:[{effects:[{effect:"rainbow",amount:-2,turns:1,hex:!0},{effect:"sorcery",amount:-.2,turns:1,hex:!0}],dmg:[3,3,3,3,3,3,3,3],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0},{action:"summonMonster",what:["red_skeleton","blue_skeleton"],value:1}]},{effects:[{effect:"conjure",amount:-5,turns:1,hex:!0}],actions:[{action:"addCard",value:1,what:"curse",to:"drawCards",hex:!0},{action:"removeHexes",to:"self"},{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"rainbow",amount:-4,turns:1,hex:!0},{effect:"sorcery",amount:-.4,turns:1,hex:!0}],dmg:[4,4,4,4,4,4,4,4],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"conjure",amount:-5,turns:2,hex:!0}],actions:[{action:"addCard",value:1,what:"curse",to:"discardCards",hex:!0},{action:"removeHexes",to:"self"},{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0},{action:"summonMonster",what:["red_skeleton","blue_skeleton"],value:1}]},{dmg:[5,5,5,5,5,5,5,5],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]},{effects:[{effect:"might",amount:5,turns:1},{effect:"vex",amount:1,turns:-1}],dmg:[6,6,6,6,6,6,6,6],actions:[{action:"stat",what:"thunder",key:"current",value:1,desc:"Remove thunder",additive:!1,hex:!0},{action:"stat",what:"lightning",key:"current",value:0,desc:"Remove lightning",additive:!1,hex:!0}]}],resistance:{base:.5,current:0,temp:[],turns:-1,persist:!1}}),new h({type:"monster",id:"flame_guardian",breed:"flame_guardian",name:"Flame Guardian",health:{base:350,current:0,max:350},tier:6,category:"fire_guardian",pattern:"fixed",moveSet:[{actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[6,6,6,6,6]},{actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[8,8,8,8]},{effects:[{effect:"vex",amount:2,turns:-1}],actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[10,10,10]},{actions:[{action:"removeBuffs",to:"player"},{action:"removeHexes",to:"self"}]},{blk:[20],dmg:[12,12],effects:[{effect:"might",amount:6,turns:-1}]},{dmg:[16],actions:[{action:"removeBuffs",to:"player"},{action:"removeHexes",to:"self"}],effects:[{effect:"might",amount:3,turns:-1}]}]}),new h({type:"monster",context:"frost",id:"super_frozen_flame_guardian",breed:"flame_guardian",name:"Super Frozen Flame Guardian",health:{base:700,current:0,max:700},tier:6,category:"fire_guardian",pattern:"fixed",moveSet:[{actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[6,6,6,6,6]},{actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[8,8,8,8]},{effects:[{effect:"vex",amount:2,turns:-1}],actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[10,10,10]},{actions:[{action:"removeBuffs",to:"player"},{action:"removeHexes",to:"self"}]},{blk:[20],dmg:[12,12],effects:[{effect:"might",amount:6,turns:-1}]},{dmg:[16],actions:[{action:"removeBuffs",to:"player"},{action:"removeHexes",to:"self"}],effects:[{effect:"might",amount:3,turns:-1}]}]}),new h({type:"monster",context:"flame",id:"super_burning_flame_guardian",breed:"flame_guardian",name:"Super Burning Flame Guardian",health:{base:350,current:0,max:350},tier:6,category:"fire_guardian",pattern:"fixed",moveSet:[{actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[6,6,6,6,6]},{actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[8,8,8,8]},{effects:[{effect:"vex",amount:2,turns:-1}],actions:[{action:"removeBuffs",to:"player"}]},{blk:[20],dmg:[10,10,10]},{actions:[{action:"removeBuffs",to:"player"},{action:"removeHexes",to:"self"}]},{blk:[20],dmg:[12,12],effects:[{effect:"might",amount:6,turns:-1}]},{dmg:[16],actions:[{action:"removeBuffs",to:"player"},{action:"removeHexes",to:"self"}],effects:[{effect:"might",amount:3,turns:-1}]}]}),new h({type:"monster",id:"frost_guardian",breed:"frost_guardian",name:"Frost Guardian",health:{base:500,current:0,max:500},tier:6,category:"ice_guardian",pattern:"fixed",moveSet:[{dmg:[35],armor:[30]},{effects:[{effect:"antimomentum",amount:1,turns:-1,hex:!0}]},{dmg:[30],effects:[{effect:"might",amount:-2,turns:2,hex:!0},{effect:"might",amount:2,turns:-1}],actions:[{action:"summonMonster",what:["daggerhawk","crystalice","ghost_spider"],value:2}]},{blk:[40],armor:[30]},{dmg:[20],abilities:[{ability:"unreachable",turns:1,enabled:!0}],effects:[{effect:"solid",amount:-2,turns:2,hex:!0}]},{blk:[45],effects:[{effect:"might",amount:-2,turns:2,hex:!0},{effect:"might",amount:2,turns:-1}]},{dmg:[30],armor:[30],actions:[{action:"summonMonster",what:["seraphim","cherubim"],value:2}]},{effects:[{effect:"might",amount:2,turns:-1}]},{blk:[45]},{dmg:[35]},{effects:[{effect:"heal",amount:250,turns:2},{effect:"retaliate",amount:1,turns:-1}],actions:[{action:"removeHexes",to:"self"}]}],vex:{base:2,current:0,temp:[],turns:-1},retaliate:{base:2,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"frost",id:"super_frozen_frost_guardian",breed:"frost_guardian",name:"Super Frozen Frost Guardian",health:{base:1e3,current:0,max:1e3},tier:6,category:"ice_guardian",pattern:"fixed",moveSet:[{dmg:[35],armor:[30]},{effects:[{effect:"antimomentum",amount:1,turns:-1,hex:!0}]},{dmg:[30],effects:[{effect:"might",amount:-2,turns:2,hex:!0},{effect:"might",amount:2,turns:-1}],actions:[{action:"summonMonster",what:["daggerhawk","crystalice","ghost_spider"],value:2}]},{blk:[40],armor:[30]},{dmg:[20],abilities:[{ability:"unreachable",turns:1,enabled:!0}],effects:[{effect:"solid",amount:-2,turns:2,hex:!0}]},{blk:[45],effects:[{effect:"might",amount:-2,turns:2,hex:!0},{effect:"might",amount:2,turns:-1}]},{dmg:[30],armor:[30],actions:[{action:"summonMonster",what:["seraphim","cherubim"],value:2}]},{effects:[{effect:"might",amount:2,turns:-1}]},{blk:[45]},{dmg:[35]},{effects:[{effect:"heal",amount:250,turns:2},{effect:"retaliate",amount:1,turns:-1}],actions:[{action:"removeHexes",to:"self"}]}],vex:{base:2,current:0,temp:[],turns:-1},retaliate:{base:2,current:0,temp:[],turns:-1}}),new h({type:"monster",context:"flame",id:"super_burning_frost_guardian",breed:"frost_guardian",name:"Super Burning Frost Guardian",health:{base:500,current:0,max:500},tier:6,category:"ice_guardian",pattern:"fixed",moveSet:[{dmg:[35],armor:[30]},{effects:[{effect:"antimomentum",amount:1,turns:-1,hex:!0}]},{dmg:[30],effects:[{effect:"might",amount:-2,turns:2,hex:!0},{effect:"might",amount:2,turns:-1}],actions:[{action:"summonMonster",what:["daggerhawk","crystalice","ghost_spider"],value:2}]},{blk:[40],armor:[30]},{dmg:[20],abilities:[{ability:"unreachable",turns:1,enabled:!0}],effects:[{effect:"solid",amount:-2,turns:2,hex:!0}]},{blk:[45],effects:[{effect:"might",amount:-2,turns:2,hex:!0},{effect:"might",amount:2,turns:-1}]},{dmg:[30],armor:[30],actions:[{action:"summonMonster",what:["seraphim","cherubim"],value:2}]},{effects:[{effect:"might",amount:2,turns:-1}]},{blk:[45]},{dmg:[35]},{effects:[{effect:"heal",amount:250,turns:2},{effect:"retaliate",amount:1,turns:-1}],actions:[{action:"removeHexes",to:"self"}]}],vex:{base:2,current:0,temp:[],turns:-1},retaliate:{base:2,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"singularity",breed:"singularity",name:"Singularity",health:{base:15,current:0,max:15},tier:7,category:"singularity",pattern:"fixed",moveSet:[{effects:[{effect:"retaliate",amount:2,turns:-1},{effect:"might",amount:50,turns:-1}]},{effects:[{effect:"retaliate",amount:2,turns:-1}]},{effects:[{effect:"retaliate",amount:2,turns:-1}]},{effects:[{effect:"retaliate",amount:2,turns:-1}]},{dmg:[1],effects:[{effect:"retaliate",amount:2,turns:-1}],actions:[{action:"stat",what:"might",key:"current",value:"double"}]}],hardened:{base:5,current:0,temp:[],turns:-1},unreachable:{enabled:!0,baseTurns:0,turns:-1,persist:!0,permanent:!0},resurrect:{enabled:!0,baseTurns:0,turns:-1,persist:!0,permanent:!0},eternal:{enabled:!0,baseTurns:0,turns:-1,persist:!0,permanent:!0},vex:{base:2,current:0,temp:[],turns:-1},veil:{base:.5,current:0,temp:[],turns:-1}}),new h({type:"monster",id:"cave_spider",tier:0,breed:"ghost",name:"Cave Spider",health:{base:15,current:0,max:15},pattern:"random",moveSet:[{dmg:[10],p:.2},{dmg:[5],p:.2},{dmg:[15],p:.2},{dmg:[7],p:.2},{dmg:[3],p:.2}]}),new h({type:"monster",id:"stinger",tier:0,breed:"ghost",name:"Stinger",health:{base:15,current:0,max:15},pattern:"fixed",moveSet:[{dmg:[1,1,1,1,1]}]}),new h({type:"monster",id:"seer",tier:0,breed:"ghost",name:"Seer",health:{base:20,current:0,max:20},pattern:"random",moveSet:[{actions:[{action:"addCard",value:1,what:"mired",to:"discardCards",hex:!0}],p:.25},{blk:[10],p:.25},{actions:[{action:"addCard",value:1,what:"mired",to:"discardCards",hex:!0},{action:"kill",to:"self"}],p:.5}]}),new h({type:"monster",id:"flamehead",tier:0,breed:"ghost",name:"Flamehead",health:{base:15,current:0,max:15},pattern:"fixed",moveSet:[{effects:[{effect:"conjure",amount:-1,turns:1,hex:!0}]}]}),new h({type:"monster",id:"daggerhawk",tier:0,breed:"ghost",name:"Daggerhawk",health:{base:18,current:0,max:18},pattern:"fixed",moveSet:[{dmg:[5]},{dmg:[4]},{dmg:[3]},{dmg:[2]},{dmg:[1]},{dmg:[40],actions:[{action:"kill",to:"self"}]}]}),new h({type:"monster",id:"crystalice",tier:0,breed:"ghost",name:"Crystalice",health:{base:35,current:0,max:35},pattern:"fixed",moveSet:[{dmg:[5]},{dmg:[4]},{dmg:[3]},{dmg:[2]},{dmg:[1]},{actions:[{action:"removeBuffs",to:"player"},{action:"kill",to:"self"}]}]}),new h({type:"monster",id:"blob",tier:0,breed:"ghost",name:"Blob",health:{base:25,current:0,max:25},pattern:"random",moveSet:[{actions:[{action:"addCard",value:2,what:"junk",to:"handCards",hex:!0}],p:.5},{actions:[{action:"addCard",value:1,what:"gunk",to:"handCards",hex:!0}],p:.5}]}),new h({type:"monster",id:"cherubim",tier:0,breed:"ghost",name:"Cherubim",health:{base:15,current:0,max:15},pattern:"fixed",moveSet:[{effects:[{effect:"marked",amount:1,turns:1,hex:!0}]}]}),new h({type:"monster",id:"red_skeleton",tier:0,breed:"ghost",name:"Red Skeleton",health:{base:30,current:0,max:30},pattern:"fixed",moveSet:[{dmg:[7],blk:[7]}]}),new h({type:"monster",id:"blue_skeleton",tier:0,breed:"ghost",name:"Blue Skeleton",health:{base:18,current:0,max:18},pattern:"fixed",moveSet:[{dmg:[12]}]}),new h({type:"monster",id:"seraphim",tier:0,breed:"ghost",name:"Seraphim",health:{base:20,current:0,max:20},pattern:"fixed",moveSet:[{actions:[{action:"addCard",value:1,type:"clutter",to:"drawCards",hex:!0}],effects:[{effect:"regen",amount:1,turns:-1}]},{actions:[{action:"addCard",value:1,what:"broken",to:"drawCards",hex:!0}],effects:[{effect:"regen",amount:1,turns:-1}]}]}),new h({type:"monster",id:"striker",tier:0,breed:"ghost",name:"Striker",health:{base:15,current:0,max:15},pattern:"fixed",moveSet:[{effects:[{effect:"might",amount:-1,turns:1,hex:!0}]}]}),new h({type:"monster",id:"swirler",tier:0,breed:"ghost",name:"Swirler",health:{base:15,current:0,max:15},pattern:"fixed",moveSet:[{effects:[{effect:"punch",amount:-.1,turns:1,hex:!0}]}]}),new h({type:"monster",id:"ghost_spider",tier:0,breed:"ghost",name:"Ghost Spider",health:{base:45,current:0,max:45},pattern:"fixed",moveSet:[{dmg:[5]},{dmg:[4]},{dmg:[3]},{dmg:[2]},{dmg:[1]},{effects:[{effect:"vulnerable",amount:1,turns:5,hex:!0},{effect:"antimomentum",amount:1,turns:5,hex:!0}],actions:[{action:"kill",to:"self"}]}]})];function p(){return{player:new h({guid:u.randString(),type:"player",id:"player",name:"Player",armor:0,block:0,health:{base:75,current:75,max:75},speed:{base:5,current:0,temp:[],turns:0},mana:{base:3,current:0,temp:0},rainbow:{base:0,current:0,temp:[],turns:0,max:20,type:"rainbow"}}),dead:function(e){return 0==e.health.current},addTreasure:function(e,a){e.owned=!0,a.treasures.push(e),u.appendTreasure(e,".treasures")},addCandy:function(e,a){e.guid=u.randString(),a.candies.push(e);let t=u.getFirstEmptyElement(".candies .candy-slot");if(t.length>0){let a=!0;u.appendCandy(e,t,a)}}}}class f{constructor({id:e,name:a,type:t,target:n=!1,drawn:r=!1,addable:i=!0,playable:s=!0,playing:o=!1,solo:d=!1,pack:l="basic",tier:c="common",weight:m=5,courage:u=2,retain:h=!1,tempRetain:g=!1,use:p=-1,expire:f=-1,vanish:y=!1,ephemeral:w=!1,natural:b=!1,breakable:v=!1,linger:C=-1,age:k=0,mana:x,baseMana:_=x,dmg:S=[],blk:$=[],armor:G=[],magic:R=[],desc:L="",additionalDesc:A="",descOverride:B="",slotDesc:D="",slots:M=0,shards:T=[],shardUpgrades:Y={},iceShardUpgrades:P={},fireShardUpgrades:q={},bothShardUpgrades:F={},effects:I=[],abilities:E=[],actions:O=[],combine:U=!1,draw:H=!1,discard:z=!1,destroy:W=!1,shimmer:N=!1,sparkle:j=!1,aura:K=!1,trade:V=[],weapon:Q=!1,sound:J=!1}){this.guid="",this.id=e,this.name=a,this.type=t,this.target=n,this.drawn=r,this.addable=i,this.playable=s,this.playing=o,this.solo=d,this.pack=l,this.tier=c,this.weight=m,this.courage=u,this.retain=h,this.tempRetain=g,this.use=p,this.expire=f,this.vanish=y,this.ephemeral=w,this.natural=b,this.breakable=v,this.linger=C,this.age=k,this.mana=x,this.baseMana=_,this.dmg=S,this.blk=$,this.armor=G,this.magic=R,this.desc=L,this.additionalDesc=A,this.descOverride=B,this.slotDesc=D,this.slots=M,this.shards=T,this.shardUpgrades=Y,this.iceShardUpgrades=P,this.fireShardUpgrades=q,this.bothShardUpgrades=F,this.effects=I,this.abilities=E,this.actions=O,this.combine=U,this.draw=H,this.discard=z,this.destroy=W,this.shimmer=N,this.sparkle=j,this.aura=K,this.trade=V,this.weapon=Q,this.sound=J}}const y=[new f({id:"jab",name:"Jab",type:"attack",mana:1,addable:!1,target:"monster"}),new f({id:"shield",name:"Shield",type:"tool",mana:1,addable:!1}),new f({id:"leather_armor",name:"Leather Armor",type:"tool",mana:0,addable:!1,use:1}),new f({id:"stun",name:"Stun",type:"tool",mana:0,addable:!1,target:"monster"}),new f({id:"rainbow_orb",name:"Rainbow Orb",type:"magic",mana:0,addable:!1}),new f({id:"aura_stance",name:"Aura Stance",type:"tool",tier:"uncommon",mana:0,vanish:!0,addable:!1,ephemeral:!0}),new f({id:"sparkle_stance",name:"Sparkle Stance",type:"tool",tier:"uncommon",mana:0,vanish:!0,addable:!1,ephemeral:!0}),new f({id:"shimmer_stance",name:"Shimmer Stance",type:"tool",tier:"uncommon",mana:0,vanish:!0,addable:!1,ephemeral:!0}),new f({id:"shimmer",name:"Shimmer",type:"tool",mana:0,tier:"uncommon",addable:!1,vanish:!0,pack:"combine"}),new f({id:"sparkle",name:"Sparkle",type:"tool",mana:0,tier:"uncommon",addable:!1,vanish:!0,pack:"combine"}),new f({id:"aura",name:"Aura",type:"tool",mana:0,tier:"uncommon",addable:!1,vanish:!0,pack:"combine"}),new f({id:"courage",name:"Courage",type:"tool",mana:0,tier:"uncommon",addable:!1,vanish:!0,pack:"combine"}),new f({id:"familiar_agony",name:"Familiar Agony",type:"attack",mana:0,tier:"uncommon",addable:!1,target:"monster",retain:!0,use:2}),new f({id:"slash",name:"Slash",type:"attack",mana:0,addable:!1,target:"monster",vanish:!0}),new f({id:"fleeting_slash",name:"Fleeting Slash",type:"attack",mana:0,addable:!1,target:"monster",vanish:!0,expire:0}),new f({id:"lingering_slash",name:"Lingering Slash",type:"attack",mana:0,addable:!1,target:"monster",linger:1,use:1}),new f({id:"momentous_slash",name:"Momentous Slash",type:"attack",mana:0,addable:!1,target:"monster",vanish:!0}),new f({id:"safety",name:"Safety",type:"tool",mana:1,addable:!1,retain:!0}),new f({id:"energize",name:"Energize",type:"tool",mana:0,tier:"uncommon",vanish:!0,addable:!1}),new f({id:"boost",name:"Boost",type:"tool",mana:0,tier:"uncommon",retain:!0,vanish:!0,addable:!1}),new f({id:"auxiliary",name:"Auxiliary",type:"tool",mana:0,retain:!0,addable:!1,vanish:!0}),new f({id:"impresa",name:"Impresa",type:"magic",mana:1,tier:"uncommon",addable:!1,retain:!0,vanish:!0}),new f({id:"ouroboros",name:"Ouroboros",type:"magic",mana:0,tier:"rare",addable:!1,retain:!0,vanish:!0}),new f({id:"tesseract",name:"Tesseract",type:"magic",target:"monster",mana:3,addable:!1,retain:!0,vanish:!0,tier:"legendary"}),new f({id:"battle_move",name:"Battle Move",type:"attack",mana:1,tier:"uncommon",target:"monster",addable:!1,retain:!0,vanish:!0}),new f({id:"battle_combo",name:"Battle Combo",type:"tool",mana:0,tier:"rare",addable:!1,retain:!0,vanish:!0}),new f({id:"battle_sequence",name:"Battle Sequence",type:"tool",mana:3,retain:!0,addable:!1,vanish:!0,tier:"legendary"}),new f({id:"battle_finisher",name:"Battle Finisher",type:"attack",target:"monster",mana:0,tier:"rare",ephemeral:!0,vanish:!0,addable:!1}),new f({id:"self_enhance",name:"Self-Enhance",type:"tool",mana:1,addable:!1,tier:"uncommon",retain:!0,vanish:!0}),new f({id:"self_advance",name:"Self-Advance",type:"tool",tier:"rare",mana:0,addable:!1,retain:!0,vanish:!0}),new f({id:"self_fulfill",name:"Self-Fulfill",type:"tool",mana:3,retain:!0,addable:!1,vanish:!0,tier:"legendary"}),new f({id:"rainbow_converter",name:"Rainbow Converter",type:"converter",mana:0,tier:"uncommon",addable:!1,vanish:!0}),new f({id:"chaos_converter",name:"Chaos Converter",type:"converter",mana:0,tier:"uncommon",addable:!1,vanish:!0}),new f({id:"dark_converter",name:"Dark Converter",type:"converter",mana:0,tier:"uncommon",addable:!1,vanish:!0}),new f({id:"elemental_converter",name:"Elemental Converter",type:"converter",mana:0,tier:"uncommon",addable:!1,vanish:!0}),new f({id:"sparks",name:"Sparks",type:"magic",mana:0,addable:!1,vanish:!0}),new f({id:"bottled_speed",name:"Bottled Speed",type:"bottled",playable:!1,addable:!1}),new f({id:"bottled_energy",name:"Bottled Energy",type:"bottled",playable:!1,addable:!1}),new f({id:"bottled_armor",name:"Bottled Armor",type:"bottled",playable:!1,addable:!1}),new f({id:"bottled_block",name:"Bottled Block",type:"bottled",playable:!1,addable:!1}),new f({id:"bottled_attack",name:"Bottled Attack",type:"bottled",playable:!1,addable:!1}),new f({id:"bottled_cards",name:"Bottled Cards",type:"bottled",playable:!1,addable:!1}),new f({id:"bottled_magic",name:"Bottled Magic",type:"bottled",playable:!1,addable:!1}),new f({id:"release",name:"Release",type:"tool",mana:0,addable:!1,vanish:!0}),new f({id:"acquire",name:"Acquire",type:"tool",mana:0,addable:!1,vanish:!0}),new f({id:"dismantle",name:"Dismantle",type:"tool",mana:0,addable:!1,vanish:!0}),new f({id:"atomic",name:"Atomic",type:"ability",mana:1,addable:!1,pack:"combine",tier:"uncommon",retain:!0}),new f({id:"nuclear",name:"Nuclear",type:"ability",mana:1,addable:!1,pack:"combine",tier:"rare"}),new f({id:"head_shot",name:"Head Shot",type:"attack",target:"monster",mana:0,addable:!1,natural:!0}),new f({id:"thrash",name:"Thrash",type:"attack",target:"monster",mana:1,retain:!0,natural:!0,tier:"uncommon",addable:!1}),new f({id:"forestall",name:"Forestall",type:"tool",mana:0,natural:!0,addable:!1}),new f({id:"evade",name:"Evade",type:"tool",mana:1,retain:!0,natural:!0,tier:"uncommon",addable:!1}),new f({id:"blaze_of_magic",name:"Blaze of Magic",type:"magic",mana:0,natural:!0,addable:!1}),new f({id:"magic_burst",name:"Magic Burst",type:"magic",mana:1,retain:!0,natural:!0,tier:"uncommon",addable:!1}),new f({id:"spewnicorn_spray",name:"Spewnicorn Spray",type:"tool",mana:0,breakable:!0,use:3,tier:"legendary",addable:!1}),new f({id:"junk",name:"Junk",type:"clutter",playable:!1,addable:!1,ephemeral:!0}),new f({id:"debris",name:"Debris",type:"clutter",mana:1,vanish:!0,addable:!1,natural:!0}),new f({id:"chaff",name:"Chaff",type:"clutter",addable:!1,natural:!0,ephemeral:!0,playable:!1}),new f({id:"gunk",name:"Gunk",type:"clutter",addable:!1,playable:!1}),new f({id:"execrate",name:"Execrate",type:"clutter",mana:1,addable:!1,vanish:!0}),new f({id:"flay",name:"Flay",type:"clutter",mana:1,addable:!1,vanish:!0}),new f({id:"curse",name:"Curse",type:"clutter",addable:!1,playable:!1}),new f({id:"timid",name:"Timid",type:"clutter",addable:!1,playable:!1}),new f({id:"lethargy",name:"Lethargy",type:"clutter",addable:!1,ephemeral:!0,playable:!1}),new f({id:"briars",name:"Briars",type:"clutter",addable:!1,playable:!1}),new f({id:"broken",name:"Broken",type:"clutter",addable:!1,mana:1,vanish:!0}),new f({id:"mired",name:"Mired",type:"clutter",addable:!1,playable:!1}),new f({id:"rusty_dagger",name:"Rusty Dagger",type:"attack",mana:3,target:"monster",weight:.8,weapon:!0,pack:"cycle"}),new f({id:"polished_dagger",name:"Polished Dagger",type:"attack",mana:3,target:"monster",weight:10,addable:!1,weapon:!0}),new f({id:"piercer",name:"Piercer",type:"attack",mana:3,target:"monster",tier:"uncommon",weight:2,addable:!1,weapon:!0}),new f({id:"shredder",name:"Shredder",type:"attack",mana:3,target:"monster",tier:"uncommon",weight:1,addable:!1,weapon:!0}),new f({id:"stormknife",name:"Stormknife",type:"attack",mana:3,target:"monster",tier:"rare",weight:.8,addable:!1,weapon:!0}),new f({id:"shiv_of_the_abyss",name:"Shiv of the Abyss",type:"attack",mana:2,target:"monster",weight:.1,tier:"legendary",addable:!1,weapon:!0}),new f({id:"wooden_sword",name:"Wooden Sword",type:"attack",mana:3,target:"monster",weight:.8,weapon:!0,pack:"cycle"}),new f({id:"broadsword",name:"Broadsword",type:"attack",mana:3,target:"monster",weight:10,addable:!1,weapon:!0}),new f({id:"hardened_steel",name:"Hardened Steel",type:"attack",mana:3,target:"monster",weight:2,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"champions_cutlass",name:"Champion's Cutlass",type:"attack",mana:3,target:"monster",weight:1,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"glacial_blade",name:"Glacial Blade",type:"attack",mana:3,target:"monster",weight:.8,addable:!1,tier:"rare",weapon:!0}),new f({id:"nightfury",name:"Nightfury",type:"attack",mana:2,target:"monster",weight:.1,addable:!1,tier:"legendary",weapon:!0}),new f({id:"loggers_axe",name:"Logger's Axe",type:"attack",mana:3,target:"monster",weight:.6,weapon:!0,pack:"cycle"}),new f({id:"battle_axe",name:"Battle Axe",type:"attack",mana:3,target:"monster",weight:10,addable:!1,weapon:!0}),new f({id:"throwing_axe",name:"Throwing Axe",type:"attack",mana:3,target:"monster",weight:10,addable:!1,weapon:!0}),new f({id:"swift_battle_axe",name:"Swift Battle Axe",type:"attack",mana:3,target:"monster",weight:2,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"sharpened_axe",name:"Sharpened Axe",type:"attack",mana:3,target:"monster",weight:2,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"cleave",name:"Cleave",type:"attack",mana:3,target:"monster",weight:1,addable:!1,tier:"rare",weapon:!0}),new f({id:"redfury",name:"Redfury",type:"attack",mana:3,target:"monster",weight:1,addable:!1,tier:"rare",weapon:!0}),new f({id:"forge",name:"Forge",type:"attack",mana:2,target:"monster",weight:.2,addable:!1,tier:"legendary",weapon:!0}),new f({id:"dragons_bane",name:"Dragon's Bane",type:"attack",mana:2,target:"monster",weight:.2,addable:!1,tier:"legendary",weapon:!0}),new f({id:"endless_edge",name:"Endless Edge",type:"attack",mana:2,target:"monster",weight:.2,addable:!1,tier:"legendary",weapon:!0}),new f({id:"deathmaker",name:"Deathmaker",type:"attack",mana:2,target:"monster",weight:.2,addable:!1,tier:"legendary",weapon:!0}),new f({id:"old_hammer",name:"Old Hammer",type:"attack",mana:3,target:"monster",weight:.7,weapon:!0,pack:"combine"}),new f({id:"reinforced_hammer",name:"Reinforced Hammer",type:"attack",mana:3,target:"monster",weight:10,addable:!1,weapon:!0}),new f({id:"tungsten_hammer",name:"Tungsten Hammer",type:"attack",mana:3,target:"monster",weight:2,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"molten_hammer",name:"Molten Hammer",type:"attack",mana:3,target:"monster",weight:1,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"hammer_of_justice",name:"Hammer of Justice",type:"attack",mana:3,target:"monster",weight:.8,addable:!1,tier:"rare",weapon:!0}),new f({id:"gravitas",name:"Gravitas",type:"attack",mana:3,target:"monster",weight:.6,addable:!1,tier:"rare",weapon:!0}),new f({id:"firmament_mover",name:"Firmament Mover",type:"attack",mana:2,target:"monster",weight:.05,addable:!1,tier:"legendary",weapon:!0}),new f({id:"singing_mallet",name:"Singing Mallet",type:"attack",mana:1,target:"monster",weight:.05,addable:!1,tier:"legendary",weapon:!0}),new f({id:"blunt_pike",name:"Blunt Pike",type:"attack",mana:3,target:"monster",weight:.8,weapon:!0,pack:"combine"}),new f({id:"serrated_pike",name:"Serrated Pike",type:"attack",mana:3,target:"monster",weight:10,weapon:!0,addable:!1}),new f({id:"ancient_spear",name:"Ancient Spear",type:"attack",mana:2,target:"monster",tier:"uncommon",weight:.5,weapon:!0,vanish:!0,addable:!1}),new f({id:"runed_bayonet",name:"Runed Bayonet",type:"attack",mana:1,target:"monster",tier:"uncommon",weight:.5,weapon:!0,vanish:!0,addable:!1}),new f({id:"cursed_spike",name:"Cursed Spike",type:"attack",mana:0,target:"monster",tier:"uncommon",weight:.5,weapon:!0,vanish:!0,addable:!1}),new f({id:"frozen_harpoon",name:"Frozen Harpoon",type:"attack",mana:2,target:"monster",tier:"uncommon",weight:.5,weapon:!0,ephemeral:!0,addable:!1}),new f({id:"ornate_javelin",name:"Ornate Javelin",type:"attack",mana:1,target:"monster",tier:"uncommon",weight:.5,weapon:!0,ephemeral:!0,addable:!1}),new f({id:"double_headed_lance",name:"Double-Headed Lance",type:"attack",mana:0,target:"monster",tier:"uncommon",weight:.5,weapon:!0,ephemeral:!0,addable:!1}),new f({id:"farmers_scythe",name:"Farmer's Scythe",type:"attack",mana:3,target:"all",weight:.7,weapon:!0,pack:"combine"}),new f({id:"crescentblade",name:"Crescentblade",type:"attack",mana:0,target:"all",weight:.8,weapon:!0,addable:!1}),new f({id:"sharpened_scythe",name:"Sharpened Scythe",type:"attack",mana:3,vanish:!0,target:"all",weight:10,weapon:!0,addable:!1}),new f({id:"blackblade",name:"Blackblade",type:"attack",mana:0,target:"all",weight:.5,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"spiked_scythe",name:"Spiked Scythe",type:"attack",mana:3,vanish:!0,target:"all",weight:2,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"greenshears",name:"Greenshears",type:"attack",mana:1,target:"all",weight:.3,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"glowscythe",name:"Glowscythe",type:"attack",mana:3,vanish:!0,target:"all",weight:1,addable:!1,tier:"uncommon",weapon:!0}),new f({id:"bonesaw",name:"Bonesaw",type:"attack",mana:1,target:"all",weight:.2,addable:!1,tier:"rare",weapon:!0}),new f({id:"treecleaver",name:"Treecleaver",type:"attack",mana:3,vanish:!0,target:"all",weight:.8,addable:!1,tier:"rare",weapon:!0}),new f({id:"mantleblight",name:"Mantleblight",type:"attack",mana:2,target:"all",weight:.1,addable:!1,tier:"rare",weapon:!0}),new f({id:"armyfeller",name:"Armyfeller",type:"attack",mana:3,vanish:!0,target:"all",weight:.6,addable:!1,tier:"rare",weapon:!0}),new f({id:"reaper",name:"Reaper",type:"attack",mana:2,target:"all",weight:.05,addable:!1,tier:"legendary",weapon:!0}),new f({id:"fleeting_deathblade",name:"Fleeting Deathblade",type:"attack",mana:0,expire:4,target:"all",weight:.05,addable:!1,tier:"legendary",weapon:!0}),new f({id:"hickory_wand",name:"Hickory Wand",type:"magic",mana:3,weight:.7,weapon:!0,pack:"rainbow"}),new f({id:"walnut_wand",name:"Walnut Wand",type:"magic",mana:3,weight:10,weapon:!0,addable:!1}),new f({id:"black_oak_wand",name:"Black Oak Wand",type:"magic",mana:3,weight:2,weapon:!0,addable:!1}),new f({id:"hooked_wand",name:"Hooked Wand",type:"magic",mana:3,weight:1,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"glowing_wand",name:"Glowing Wand",type:"magic",mana:3,weight:.8,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"glowing_sceptre",name:"Glowing Sceptre",type:"magic",mana:3,weight:.6,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"darkfeather",name:"Darkfeather",type:"magic",mana:2,weight:.05,weapon:!0,addable:!1,tier:"rare"}),new f({id:"heart_of_chaos",name:"Heart of Chaos",type:"magic",mana:2,weight:.05,weapon:!0,addable:!1,tier:"rare"}),new f({id:"evernature",name:"Evernature",type:"magic",mana:2,weight:.05,weapon:!0,addable:!1,tier:"rare"}),new f({id:"arcana_prismatica",name:"Arcana Prismatica",type:"magic",mana:2,weight:.05,weapon:!0,addable:!1,tier:"rare"}),new f({id:"crooked_staff",name:"Crooked Staff",type:"magic",mana:3,weight:.8,weapon:!0,pack:"rainbow"}),new f({id:"twisted_staff",name:"Twisted Staff",type:"magic",mana:2,use:2,weight:.8,weapon:!0,addable:!1}),new f({id:"slotted_staff",name:"Slotted Staff",type:"magic",mana:1,use:3,weight:.8,weapon:!0,addable:!1}),new f({id:"carved_staff",name:"Carved Staff",type:"magic",mana:3,weight:10,weapon:!0,addable:!1}),new f({id:"gold_staff",name:"Gold Staff",type:"magic",mana:2,weight:.5,use:2,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"green_staff",name:"Green Staff",type:"magic",mana:1,weight:.5,use:3,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"purple_staff",name:"Purple Staff",type:"magic",mana:3,weight:2,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"sapphire_staff",name:"Sapphire Staff",type:"magic",mana:1,weight:.3,use:2,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"emerald_staff",name:"Emerald Staff",type:"magic",mana:0,weight:.3,use:3,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"ruby_staff",name:"Ruby Staff",type:"magic",mana:3,weight:1,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"emanating_staff",name:"Emanating Staff",type:"magic",mana:1,weight:.8,use:2,weapon:!0,addable:!1,tier:"rare"}),new f({id:"shuddering_staff",name:"Shuddering Staff",type:"magic",mana:0,weight:.8,use:3,weapon:!0,addable:!1,tier:"rare"}),new f({id:"quaking_staff",name:"Quaking Staff",type:"magic",mana:3,weight:.8,weapon:!0,addable:!1,tier:"rare"}),new f({id:"runemark",name:"Runemark",type:"magic",mana:1,weight:.6,use:2,weapon:!0,addable:!1,tier:"rare"}),new f({id:"darksphere",name:"Darksphere",type:"magic",mana:0,weight:.6,use:3,weapon:!0,addable:!1,tier:"rare"}),new f({id:"staff_of_wonder",name:"Staff of Wonder",type:"magic",mana:3,weight:.6,weapon:!0,addable:!1,tier:"rare"}),new f({id:"skycaller",name:"Skycaller",type:"magic",mana:2,weight:.05,use:2,weapon:!0,addable:!1,tier:"legendary"}),new f({id:"windrift",name:"Windrift",type:"magic",mana:2,weight:.05,use:2,weapon:!0,addable:!1,tier:"legendary"}),new f({id:"ember",name:"Ember",type:"magic",mana:2,weight:.05,use:2,weapon:!0,addable:!1,tier:"legendary"}),new f({id:"deepcore",name:"Deepcore",type:"magic",mana:2,weight:.05,use:2,weapon:!0,addable:!1,tier:"legendary"}),new f({id:"felcrystal",name:"Felcrystal",type:"magic",mana:2,weight:.05,use:2,weapon:!0,addable:!1,tier:"legendary"}),new f({id:"burning_branch",name:"Burning Branch",type:"magic",mana:3,weight:.8,weapon:!0,pack:"rainbow"}),new f({id:"flaming_torch",name:"Flaming Torch",type:"magic",mana:3,weight:10,weapon:!0,addable:!1}),new f({id:"blazing_torch",name:"Blazing Torch",type:"magic",mana:3,weight:.5,use:2,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"strangefire",name:"Strangefire",type:"magic",mana:3,weight:1,use:2,weapon:!0,addable:!1,tier:"uncommon"}),new f({id:"lumenfire",name:"Lumenfire",type:"magic",mana:3,weight:.8,use:2,weapon:!0,addable:!1,tier:"rare"}),new f({id:"endless_light",name:"Endless Light",type:"magic",mana:3,weight:.6,use:2,weapon:!0,addable:!1,tier:"rare"}),new f({id:"dreadfurnace",name:"Dreadfurnace",type:"magic",mana:2,weight:.05,use:2,weapon:!0,addable:!1,tier:"legendary"}),new f({id:"parry",name:"Parry",target:"monster",type:"attack",mana:1,weight:8}),new f({id:"stomp",name:"Stomp",type:"attack",mana:2,target:"monster"}),new f({id:"quick_buck",name:"Quick Buck",type:"attack",mana:0,vanish:!0,target:"monster"}),new f({id:"hind_kick",name:"Hind Kick",type:"attack",target:"monster",mana:1,linger:1}),new f({id:"quick_stab",name:"Quick Stab",type:"attack",target:"monster",mana:0,weight:6,pack:"cycle"}),new f({id:"hammer_thrust",name:"Hammer Thrust",type:"attack",target:"monster",mana:2,weight:4}),new f({id:"clever_trick",name:"Clever Trick",type:"attack",target:"monster",mana:1,weight:3,courage:3,pack:"combine"}),new f({id:"pierce",name:"Pierce",type:"attack",mana:1,target:"monster",vanish:!0}),new f({id:"tail_whip",name:"Tail Whip",type:"attack",mana:2,target:"monster",ephemeral:!0}),new f({id:"burning_strike",name:"Burning Strike",type:"attack",mana:2,target:"monster",expire:2}),new f({id:"wing_beat",name:"Wing Beat",type:"attack",mana:1,target:"monster"}),new f({id:"unstable_attack",name:"Unstable Attack",type:"attack",mana:0,target:"monster",breakable:!0,use:1,retain:!0}),new f({id:"hinder_strike",name:"Hinder Strike",type:"attack",mana:1,target:"monster",weight:2,pack:"rainbow"}),new f({id:"blitz",name:"Blitz",type:"attack",mana:1,target:"monster",weight:1}),new f({id:"concuss",name:"Concuss",type:"attack",mana:2,target:"monster",weight:1}),new f({id:"ambush",name:"Ambush",type:"attack",mana:2,target:"monster",weight:1}),new f({id:"wing_sweep",name:"Wing Sweep",type:"attack",mana:1,target:"all",weight:2}),new f({id:"timed_attack",name:"Timed Attack",type:"attack",target:"monster",mana:1,retain:!0,pack:"combine"}),new f({id:"cheap_shot",name:"Cheap Shot",type:"attack",target:"monster",mana:0,pack:"combine",vanish:!0}),new f({id:"stampede",name:"Stampede",type:"attack",target:"monster",mana:"?",tier:"uncommon",weight:7}),new f({id:"spin_kick",name:"Spin Kick",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:6}),new f({id:"exposed_strike",name:"Exposed Strike",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:6}),new f({id:"familiar_strike",name:"Familiar Strike",type:"attack",target:"monster",mana:3,tier:"uncommon",weight:3,courage:3,pack:"rainbow"}),new f({id:"frenzied_charge",name:"Frenzied Charge",type:"attack",target:"monster",mana:2,tier:"uncommon",pack:"cycle"}),new f({id:"rainbow_thrust",name:"Rainbow Thrust",type:"attack",target:"monster",mana:1,tier:"uncommon",pack:"rainbow"}),new f({id:"chaos_thrust",name:"Chaos Thrust",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:4,courage:3,pack:"rainbow"}),new f({id:"elemental_thrust",name:"Elemental Thrust",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:4,courage:3,pack:"rainbow"}),new f({id:"dark_thrust",name:"Dark Thrust",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:4,courage:3,pack:"rainbow"}),new f({id:"arsenal",name:"Arsenal",type:"attack",target:"monster",mana:1,tier:"uncommon"}),new f({id:"smash_and_grab",name:"Smash & Grab",type:"attack",vanish:!0,target:"monster",mana:1,tier:"uncommon",weight:4,pack:"cycle"}),new f({id:"fury",name:"Fury",type:"attack",target:"monster",mana:2,tier:"uncommon",weight:4,pack:"combine"}),new f({id:"premeditated_slash",name:"Premeditated Slash",type:"attack",target:"monster",mana:0,tier:"uncommon",use:1,pack:"combine"}),new f({id:"collateral_damage",name:"Collateral Damage",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:3,courage:3}),new f({id:"surprise_attack",name:"Surprise Attack",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:7}),new f({id:"auto_attack",name:"Auto Attack",type:"attack",target:"monster",mana:1,tier:"uncommon",weight:6}),new f({id:"sudden_barrage",name:"Sudden Barrage",type:"attack",target:"all",mana:0,tier:"uncommon",weight:2,vanish:!0}),new f({id:"provisioned_attack",name:"Provisioned Attack",type:"attack",target:"monster",mana:1,tier:"uncommon",vanish:!0,pack:"combine"}),new f({id:"thwack",name:"Thwack",type:"attack",target:"monster",mana:1,tier:"uncommon",pack:"combine",retain:!0,vanish:!0}),new f({id:"devastator",name:"Devastator",type:"attack",target:"monster",mana:3,tier:"rare",courage:4}),new f({id:"weaponry",name:"Weaponry",type:"attack",target:"monster",mana:2,tier:"rare",weight:3,courage:3}),new f({id:"amass",name:"Amass",type:"attack",target:"monster",vanish:!0,mana:1,tier:"rare",weight:3,courage:3,pack:"rainbow"}),new f({id:"berserk",name:"Berserk",type:"attack",target:"monster",mana:2,tier:"rare",pack:"cycle",weight:4,courage:4}),new f({id:"clever_barrage",name:"Clever Barrage",type:"attack",target:"monster",mana:3,tier:"rare",ephemeral:!0,courage:4,pack:"combine"}),new f({id:"freeze",name:"Freeze",type:"attack",target:"monster",mana:3,tier:"rare",weight:1,courage:5,vanish:!0}),new f({id:"scorch",name:"Scorch",type:"attack",target:"monster",mana:3,tier:"rare",weight:1,courage:5,vanish:!0}),new f({id:"ultra_kill",name:"Ultra Kill",type:"attack",target:"monster",mana:3,tier:"rare",weight:2,courage:5}),new f({id:"auxiliary_kill",name:"Auxiliary Kill",type:"attack",target:"monster",mana:2,tier:"rare",weight:6,courage:3,pack:"combine"}),new f({id:"mega_kill",name:"Mega Kill",type:"attack",target:"monster",mana:2,tier:"rare",pack:"combine",weight:4,courage:4}),new f({id:"disintegrate",name:"Disintegrate",type:"attack",target:"monster",mana:1,tier:"rare",pack:"cycle",weight:6,courage:3}),new f({id:"obliterate",name:"Obliterate",type:"attack",target:"all",mana:3,tier:"rare",weight:2,courage:5}),new f({id:"death_blow",name:"Death Blow",type:"attack",target:"monster",mana:2,tier:"legendary",courage:8}),new f({id:"overwhelming_barrage",name:"Overwhelming Barrage",type:"attack",target:"monster",mana:1,tier:"legendary",courage:8}),new f({id:"critical_hit",name:"Critical Hit",type:"attack",target:"monster",mana:0,tier:"legendary",courage:8,vanish:!0,retain:!0}),new f({id:"erupt",name:"Erupt",type:"attack",target:"monster",mana:3,tier:"legendary",courage:8}),new f({id:"monster_kill",name:"Monster Kill",type:"attack",target:"monster",vanish:!0,mana:3,tier:"legendary",courage:8,pack:"combine"}),new f({id:"malevolent_blow",name:"Malevolent Blow",type:"attack",target:"monster",mana:2,tier:"legendary",courage:8,pack:"cycle"}),new f({id:"divert",name:"Divert",type:"tool",mana:0,weight:3,use:3}),new f({id:"recoil",name:"Recoil",type:"tool",mana:0,weight:7,pack:"cycle"}),new f({id:"repel",name:"Repel",type:"tool",mana:2,weight:6,pack:"cycle"}),new f({id:"thwart",name:"Thwart",type:"tool",target:"monster",mana:2,retain:!0,weight:4,pack:"combine"}),new f({id:"deter",name:"Deter",type:"tool",target:"monster",mana:2,linger:1,natural:!0,pack:"rainbow"}),new f({id:"chain_mail_armor",name:"Chain Mail Armor",type:"tool",mana:1,weight:2,courage:3,use:2}),new f({id:"cleanse",name:"Cleanse",type:"tool",mana:1,pack:"cycle",weight:1}),new f({id:"remember",name:"Remember",type:"tool",mana:1,weight:2,use:3}),new f({id:"glowing_orb",name:"Glowing Orb",type:"tool",playable:!1,pack:"cycle"}),new f({id:"fractured_orb",name:"Fractured Orb",type:"tool",playable:!1,weight:3,pack:"cycle"}),new f({id:"plate_armor",name:"Plate Armor",type:"tool",use:2,mana:2,weight:4,courage:3}),new f({id:"fleeting_shelter",name:"Fleeting Shelter",type:"tool",mana:1,expire:2,weight:2}),new f({id:"fleeting_shield",name:"Fleeting Shield",type:"tool",mana:0,expire:3,linger:2,use:2,pack:"cycle",weight:2}),new f({id:"nullify",name:"Nullify",type:"tool",mana:0,vanish:!0,pack:"rainbow"}),new f({id:"neigh",name:"Neigh",type:"tool",mana:0,linger:1,use:1,weight:4,target:"monster"}),new f({id:"whinny",name:"Whinny",type:"tool",mana:0,linger:2,use:2,weight:4,target:"monster"}),new f({id:"death_stare",name:"Death Stare",type:"tool",mana:1,weight:2,target:"monster"}),new f({id:"fortify",name:"Fortify",type:"tool",mana:1,weight:2}),new f({id:"hardened_feathers",name:"Hardened Feathers",type:"tool",mana:1,weight:2}),new f({id:"attuned_barrier",name:"Attuned Barrier",type:"tool",mana:2,pack:"rainbow"}),new f({id:"charged_barrier",name:"Charged Barrier",type:"tool",mana:0,pack:"rainbow"}),new f({id:"fissile",name:"Fissile",type:"tool",mana:0,retain:!0,pack:"combine",vanish:!0}),new f({id:"sidestep",name:"Sidestep",type:"tool",mana:0,pack:"combine",vanish:!0}),new f({id:"fortress",name:"Fortress",type:"tool",mana:"?",tier:"uncommon",weight:7}),new f({id:"safeguard",name:"Safeguard",type:"tool",mana:2,tier:"uncommon",pack:"combine"}),new f({id:"gallop",name:"Gallop",type:"tool",mana:0,tier:"uncommon",use:1}),new f({id:"sprint",name:"Sprint",type:"tool",mana:1,tier:"uncommon",use:1,weight:2,courage:3,pack:"combine"}),new f({id:"gift",name:"Gift",type:"tool",mana:0,tier:"uncommon",vanish:!0,weight:6,pack:"rainbow"}),new f({id:"sacrifice",name:"Sacrifice",type:"tool",mana:0,tier:"uncommon",use:1,pack:"cycle",weight:4,courage:3}),new f({id:"purge",name:"Purge",type:"tool",mana:1,tier:"uncommon"}),new f({id:"scavenge",name:"Scavenge",type:"tool",mana:0,tier:"uncommon"}),new f({id:"gears_of_war",name:"Gears of War",type:"tool",mana:2,tier:"uncommon",weight:4,courage:3,pack:"combine"}),new f({id:"beautiful",name:"Beautiful",type:"tool",mana:0,tier:"uncommon",vanish:!0,pack:"combine",weight:2,courage:3}),new f({id:"delightful",name:"Delightful",type:"tool",mana:0,tier:"uncommon",vanish:!0,pack:"combine",weight:2,courage:3}),new f({id:"wonderful",name:"Wonderful",type:"tool",mana:0,tier:"uncommon",vanish:!0,pack:"combine",weight:2,courage:3}),new f({id:"bravery",name:"Bravery",type:"tool",mana:0,tier:"uncommon",vanish:!0,pack:"combine",weight:2,courage:3}),new f({id:"clever_maneuver",name:"Clever Maneuver",type:"tool",mana:1,tier:"uncommon",pack:"cycle",weight:4}),new f({id:"riffle",name:"Riffle",type:"tool",mana:1,tier:"uncommon",pack:"cycle",weight:6}),new f({id:"collect",name:"Collect",type:"tool",mana:1,tier:"uncommon",pack:"cycle"}),new f({id:"entity",name:"Entity",type:"tool",tier:"uncommon",playable:!1,weight:3,pack:"cycle"}),new f({id:"unstable_field",name:"Unstable Field",type:"tool",tier:"uncommon",playable:!1,weight:3,courage:3,pack:"cycle"}),new f({id:"disavow",name:"Disavow",type:"tool",mana:2,tier:"uncommon",weight:3,courage:3,pack:"cycle"}),new f({id:"ruin",name:"Ruin",type:"tool",mana:3,tier:"uncommon",weight:3,courage:3,pack:"cycle"}),new f({id:"make_ready",name:"Make Ready",type:"tool",mana:2,tier:"uncommon",pack:"cycle"}),new f({id:"cutting_ring",name:"Cutting Ring",type:"tool",playable:!1,tier:"uncommon",pack:"cycle"}),new f({id:"distracting_ring",name:"Distracting Ring",type:"tool",playable:!1,tier:"uncommon",weight:4,pack:"cycle"}),new f({id:"jester",name:"Jester",type:"tool",tier:"uncommon",mana:1,vanish:!0,pack:"combine"}),new f({id:"strange_mushroom",name:"Strange Mushroom",type:"tool",tier:"uncommon",mana:0,use:2,weight:3,pack:"rainbow"}),new f({id:"target",name:"Target",type:"tool",target:"all",mana:2,tier:"uncommon",weight:1}),new f({id:"frost_armor",name:"Frost Armor",type:"tool",mana:0,use:2,linger:1,retain:!0,pack:"combine",tier:"uncommon",weight:4,courage:4}),new f({id:"flame_armor",name:"Flame Armor",type:"tool",mana:0,use:2,linger:1,retain:!0,pack:"combine",tier:"uncommon",weight:4,courage:4}),new f({id:"garrison",name:"Garrison",type:"tool",mana:1,tier:"uncommon",natural:!0,vanish:!0}),new f({id:"elude",name:"Elude",type:"tool",tier:"uncommon",mana:1,retain:!0,pack:"combine",vanish:!0}),new f({id:"bulwark",name:"Bulwark",type:"tool",mana:2,tier:"rare",weight:6,courage:3}),new f({id:"steel_hide",name:"Steel Hide",type:"tool",mana:2,tier:"rare",weight:6,courage:3}),new f({id:"reactor",name:"Reactor",type:"tool",mana:0,tier:"rare",use:1,weight:3,courage:4}),new f({id:"power_surge",name:"Power Surge",type:"tool",mana:0,tier:"rare",use:1,weight:4,courage:4,pack:"cycle"}),new f({id:"enrich",name:"Enrich",type:"tool",mana:1,tier:"rare",weight:8,courage:3,pack:"combine"}),new f({id:"trade_up",name:"Trade Up",type:"tool",mana:1,tier:"rare",vanish:!0,weight:7,courage:3}),new f({id:"tactics",name:"Tactics",type:"tool",mana:3,tier:"rare",pack:"combine",weight:4,courage:4}),new f({id:"unearth",name:"Unearth",type:"tool",mana:0,tier:"rare",use:1,weight:1,courage:4}),new f({id:"blockade",name:"Blockade",type:"tool",mana:2,tier:"rare",ephemeral:!0,weight:6,courage:3}),new f({id:"mezmerize",name:"Mezmerize",type:"tool",mana:1,tier:"rare",vanish:!0,ephemeral:!0,courage:4,pack:"rainbow"}),new f({id:"elite_maneuver",name:"Elite Maneuver",type:"tool",mana:3,tier:"rare",pack:"cycle",weight:3,courage:5}),new f({id:"expunge",name:"Expunge",type:"tool",mana:2,tier:"rare",pack:"cycle",weight:4,courage:4}),new f({id:"mysterious_fissure",name:"Mysterious Fissure",type:"tool",tier:"rare",playable:!1,weight:7,courage:3,pack:"cycle"}),new f({id:"thresh",name:"Thresh",type:"tool",tier:"rare",mana:1,courage:4,use:2,weight:3,pack:"rainbow"}),new f({id:"charge",name:"Charge",type:"tool",mana:1,tier:"rare",weight:3,courage:4,pack:"combine"}),new f({id:"surge",name:"Surge",type:"tool",mana:1,vanish:!0,tier:"rare",weight:2,courage:5}),new f({id:"roar",name:"Roar",type:"tool",mana:1,vanish:!0,tier:"rare",weight:2,courage:5}),new f({id:"superstorm",name:"Superstorm",type:"tool",mana:1,vanish:!0,pack:"rainbow",tier:"rare",weight:2,courage:5}),new f({id:"cloudburst",name:"Cloudburst",type:"tool",mana:1,vanish:!0,pack:"rainbow",tier:"rare",weight:2,courage:5}),new f({id:"purify",name:"Purify",type:"tool",mana:1,tier:"rare",weight:2,courage:5}),new f({id:"forbid",name:"Forbid",type:"tool",target:"monster",mana:1,tier:"rare",weight:1,courage:6,pack:"rainbow"}),new f({id:"weaponsmith",name:"Weaponsmith",type:"tool",mana:2,tier:"rare",weight:2,courage:6,pack:"combine"}),new f({id:"scholar",name:"Scholar",type:"tool",mana:1,pack:"combine",tier:"rare",weight:3,courage:5}),new f({id:"paralyzing_touch",name:"Paralyzing Touch",type:"tool",target:"monster",mana:1,vanish:!0,tier:"rare",weight:4,courage:6}),new f({id:"blitzkrieg",name:"Blitzkrieg",type:"tool",tier:"rare",mana:3,courage:5,vanish:!0}),new f({id:"cascade",name:"Cascade",type:"tool",tier:"rare",mana:1,courage:5,vanish:!0,pack:"cycle"}),new f({id:"blank_slate",name:"Blank Slate",type:"tool",tier:"rare",mana:1,courage:5,vanish:!0,pack:"cycle"}),new f({id:"seeing_ring",name:"Seeing Ring",type:"tool",mana:1,tier:"rare",vanish:!0,ephemeral:!0}),new f({id:"crippling_stare",name:"Crippling Stare",type:"tool",target:"monster",mana:1,tier:"legendary",courage:8,vanish:!0,retain:!0}),new f({id:"citadel",name:"Citadel",type:"tool",mana:3,tier:"legendary",courage:8,retain:!0}),new f({id:"everarmor",name:"Everarmor",type:"tool",mana:2,tier:"legendary",courage:8,vanish:!0}),new f({id:"adrenaline_rush",name:"Adrenaline Rush",type:"tool",mana:0,tier:"legendary",courage:8}),new f({id:"untold_contract",name:"Untold Contract",type:"tool",mana:1,use:2,tier:"legendary",courage:8,pack:"combine"}),new f({id:"myriad",name:"Myriad",type:"tool",mana:2,use:1,tier:"legendary",courage:8,pack:"cycle"}),new f({id:"forethought",name:"Forethought",type:"ability",mana:1,tier:"uncommon",weight:7,courage:3,pack:"cycle"}),new f({id:"midas_touch",name:"Midas Touch",type:"ability",mana:2,tier:"uncommon",weight:3,courage:4}),new f({id:"metalwork",name:"Metalwork",type:"ability",mana:3,tier:"uncommon",weight:4,courage:4}),new f({id:"healing_salve",name:"Healing Salve",type:"ability",mana:1,tier:"uncommon",weight:6,courage:3}),new f({id:"stamina",name:"Stamina",type:"ability",mana:1,tier:"uncommon",weight:6,courage:3}),new f({id:"enigma_form",name:"Enigma Form",type:"ability",mana:0,tier:"uncommon",weight:4,courage:4}),new f({id:"robustness",name:"Robustness",type:"ability",mana:2,tier:"uncommon",courage:3}),new f({id:"masterwork",name:"Masterwork",type:"ability",mana:2,tier:"uncommon",weight:3,courage:4}),new f({id:"violent_rage",name:"Violent Rage",type:"ability",mana:1,tier:"uncommon",weight:4,courage:4}),new f({id:"repurpose",name:"Repurpose",type:"ability",mana:1,tier:"uncommon",courage:3,pack:"combine"}),new f({id:"shield_form",name:"Shield Form",type:"ability",mana:3,tier:"uncommon",weight:8,pack:"combine"}),new f({id:"flywheel",name:"Flywheel",type:"ability",mana:2,tier:"uncommon",weight:6,pack:"cycle"}),new f({id:"vengeance",name:"Vengeance",type:"ability",mana:1,tier:"uncommon",weight:8}),new f({id:"short_temper",name:"Short Temper",type:"ability",mana:1,tier:"uncommon",courage:3}),new f({id:"explosivity",name:"Explosivity",type:"ability",mana:1,tier:"uncommon",courage:3}),new f({id:"cardistry",name:"Cardistry",type:"ability",mana:1,tier:"uncommon",courage:3,pack:"rainbow"}),new f({id:"haste",name:"Haste",type:"ability",mana:1,tier:"uncommon",courage:4,weight:4,pack:"rainbow"}),new f({id:"patience",name:"Patience",type:"ability",mana:1,tier:"uncommon",courage:4,weight:4,pack:"rainbow"}),new f({id:"uniformity",name:"Uniformity",type:"ability",mana:1,tier:"uncommon",courage:3,weight:6}),new f({id:"high_voltage",name:"High Voltage",type:"ability",mana:2,tier:"uncommon",weight:4,courage:4}),new f({id:"strange_tail",name:"Strange Tail",type:"ability",mana:1,tier:"uncommon",weight:4,courage:3,pack:"rainbow"}),new f({id:"rebuke",name:"Rebuke",type:"ability",mana:2,tier:"uncommon",courage:3,pack:"combine"}),new f({id:"non_newtonian",name:"Non-Newtonian",type:"ability",mana:1,tier:"uncommon",courage:4}),new f({id:"supernatural",name:"Supernatural",type:"ability",mana:0,tier:"uncommon",courage:4}),new f({id:"layers",name:"Layers",type:"ability",mana:1,tier:"uncommon",courage:4,pack:"combine"}),new f({id:"emergence",name:"Emergence",type:"ability",mana:1,tier:"uncommon",courage:4,pack:"cycle"}),new f({id:"screen",name:"Screen",type:"ability",mana:1,tier:"uncommon",courage:4,pack:"rainbow"}),new f({id:"cycle_barrier",name:"Cycle Barrier",type:"ability",mana:1,tier:"uncommon",courage:4,pack:"rainbow"}),new f({id:"bastion",name:"Bastion",type:"ability",mana:3,tier:"rare",ephemeral:!0,weight:1,courage:6}),new f({id:"bodiless_form",name:"Bodiless Form",type:"ability",mana:3,tier:"rare",ephemeral:!0,weight:2,courage:5}),new f({id:"overpowered",name:"Overpowered",type:"ability",mana:1,tier:"rare",courage:4}),new f({id:"guzzle",name:"Guzzle",type:"ability",mana:1,tier:"rare",weight:4,courage:5}),new f({id:"prescience",name:"Prescience",type:"ability",mana:2,tier:"rare",weight:9,courage:6}),new f({id:"acuity",name:"Acuity",type:"ability",mana:2,tier:"rare",weight:6,courage:4,pack:"combine"}),new f({id:"magic_bonus",name:"Magic Bonus",type:"ability",mana:3,tier:"rare",courage:5}),new f({id:"magic_multiplier",name:"Magic Multiplier",type:"ability",mana:3,tier:"rare",courage:5}),new f({id:"prisma",name:"Prisma",type:"ability",mana:1,tier:"rare",courage:4}),new f({id:"storm",name:"Storm",type:"ability",mana:2,tier:"rare",courage:4,pack:"rainbow"}),new f({id:"renewal",name:"Renewal",type:"ability",mana:2,tier:"rare",courage:4}),new f({id:"dark_codex",name:"Dark Codex",type:"ability",mana:1,tier:"rare",courage:6,pack:"rainbow"}),new f({id:"bolster",name:"Bolster",type:"ability",mana:2,tier:"rare",courage:6,weight:2,pack:"cycle"}),new f({id:"radioactive",name:"Radioactive",type:"ability",mana:1,tier:"rare",courage:5,weight:3}),new f({id:"depthsight",name:"Depthsight",type:"ability",mana:2,tier:"rare",courage:5,weight:2,pack:"cycle"}),new f({id:"blacksmith",name:"Blacksmith",type:"ability",mana:2,tier:"rare",courage:5,weight:2,pack:"combine"}),new f({id:"dark_knowledge",name:"Dark Knowledge",type:"ability",mana:3,tier:"rare",courage:6,weight:2,pack:"rainbow"}),new f({id:"sage",name:"Sage",type:"ability",mana:3,tier:"rare",courage:6,weight:2,pack:"combine"}),new f({id:"reckless_abandon",name:"Reckless Abandon",type:"ability",mana:3,tier:"rare",courage:6,weight:2,pack:"cycle"}),new f({id:"stance_dance",name:"Stance Dance",type:"ability",mana:1,tier:"rare",courage:5}),new f({id:"euphoria",name:"Euphoria",type:"ability",mana:1,tier:"legendary",courage:8}),new f({id:"strength_beyond_measure",name:"Strength Beyond Measure",type:"ability",mana:2,tier:"legendary",courage:8}),new f({id:"colossus",name:"Colossus",type:"ability",mana:3,tier:"legendary",courage:8}),new f({id:"spectrum",name:"Spectrum",type:"ability",mana:3,tier:"legendary",courage:8}),new f({id:"rainbow_charge",name:"Rainbow Charge",type:"magic",mana:1,tier:"common"}),new f({id:"chaos_charge",name:"Chaos Charge",type:"magic",mana:1,tier:"common"}),new f({id:"dark_charge",name:"Dark Charge",type:"magic",mana:1,tier:"common"}),new f({id:"elemental_charge",name:"Elemental Charge",type:"magic",mana:1,tier:"common"}),new f({id:"risky_charge",name:"Risky Charge",type:"magic",mana:1,tier:"common"}),new f({id:"aligned_charge",name:"Aligned Charge",type:"magic",mana:2,tier:"common",pack:"rainbow",weight:2,courage:3}),new f({id:"delayed_charge",name:"Delayed Charge",type:"magic",tier:"common",playable:!1,pack:"cycle"}),new f({id:"sacrificial_charge",name:"Sacrificial Charge",type:"magic",tier:"common",playable:!1,pack:"cycle"}),new f({id:"risky_charm",name:"Risky Charm",type:"magic",mana:0,tier:"common",weight:7,retain:!0}),new f({id:"rainbow_charm",name:"Rainbow Charm",type:"magic",mana:0,tier:"common",retain:!0}),new f({id:"chaos_charm",name:"Chaos Charm",type:"magic",mana:0,tier:"common",retain:!0}),new f({id:"dark_charm",name:"Dark Charm",type:"magic",mana:0,tier:"common",retain:!0}),new f({id:"elemental_charm",name:"Elemental Charm",type:"magic",mana:0,tier:"common",retain:!0}),new f({id:"beautiful_spell",name:"Beautiful Spell",type:"magic",mana:1,weight:2,tier:"common"}),new f({id:"delightful_spell",name:"Delightful Spell",type:"magic",mana:1,weight:2,tier:"common"}),new f({id:"wonderful_spell",name:"Wonderful Spell",type:"magic",mana:1,weight:2,tier:"common"}),new f({id:"sparkling_rainbow_spell",name:"Sparkling Rainbow Spell",type:"magic",mana:1,weight:1,tier:"common",pack:"rainbow"}),new f({id:"shimmering_rainbow_spell",name:"Shimmering Rainbow Spell",type:"magic",mana:1,weight:1,tier:"common",pack:"rainbow"}),new f({id:"luminous_rainbow_spell",name:"Luminous Rainbow Spell",type:"magic",mana:1,weight:1,tier:"common",pack:"rainbow"}),new f({id:"flash_of_magic",name:"Flash of Magic",type:"magic",mana:0,pack:"combine",vanish:!0}),new f({id:"aligned_charm",name:"Aligned Charm",type:"magic",mana:1,tier:"uncommon",pack:"rainbow",weight:3,courage:3}),new f({id:"grow",name:"Grow",type:"magic",mana:0,use:3,linger:1,tier:"uncommon",pack:"rainbow",weight:9,courage:3}),new f({id:"focus",name:"Focus",type:"magic",mana:0,use:3,linger:1,tier:"uncommon",pack:"rainbow",weight:9,courage:3}),new f({id:"mystical_protection",name:"Mystical Protection",type:"magic",mana:1,tier:"uncommon",weight:4,courage:4}),new f({id:"metamorphose",name:"Metamorphose",type:"magic",mana:0,tier:"uncommon",weight:7,courage:3,pack:"rainbow"}),new f({id:"cryptic_rune",name:"Cryptic Rune",type:"magic",mana:1,tier:"uncommon",use:1,pack:"combine",weight:3,courage:3}),new f({id:"magical_maneuver",name:"Magical Maneuver",type:"magic",mana:1,tier:"uncommon",pack:"cycle",courage:3}),new f({id:"recaster",name:"Recaster",type:"magic",mana:0,tier:"uncommon",pack:"rainbow",weight:3,courage:5}),new f({id:"bloom",name:"Bloom",type:"magic",mana:2,tier:"uncommon",pack:"rainbow",vanish:!0,expire:2,weight:3,courage:4}),new f({id:"fire_spell",name:"Fire Spell",type:"magic",mana:0,tier:"uncommon",vanish:!0,courage:3,pack:"cycle"}),new f({id:"ice_spell",name:"Ice Spell",type:"magic",mana:0,tier:"uncommon",vanish:!0,courage:3,pack:"cycle"}),new f({id:"delayed_spell",name:"Delayed Spell",type:"magic",tier:"uncommon",playable:!1,pack:"cycle"}),new f({id:"sacrificial_spell",name:"Sacrificial Spell",type:"magic",tier:"uncommon",playable:!1,pack:"cycle"}),new f({id:"magic_flare",name:"Magic Flare",type:"magic",tier:"uncommon",mana:1,pack:"combine",vanish:!0,retain:!0}),new f({id:"risky_incantation",name:"Risky Incantation",type:"magic",mana:2,tier:"rare",weight:6,courage:3}),new f({id:"maelstrom",name:"Maelstrom",type:"magic",mana:2,tier:"rare",weight:6,courage:3}),new f({id:"master_summoner",name:"Master Summoner",type:"magic",mana:1,tier:"rare",weight:4,courage:5,pack:"combine"}),new f({id:"master_sorcerer",name:"Master Sorcerer",type:"magic",mana:1,tier:"rare",weight:4,courage:5,pack:"rainbow"}),new f({id:"master_conjurer",name:"Master Conjurer",type:"magic",mana:2,tier:"rare",weight:4,courage:5,pack:"cycle"}),new f({id:"secret_arts",name:"Secret Arts",type:"magic",mana:3,tier:"rare",ephemeral:!0,pack:"rainbow",weight:3,courage:4}),new f({id:"dazzle",name:"Dazzle",type:"magic",mana:1,tier:"rare",vanish:!0,pack:"combine",courage:3}),new f({id:"razzle",name:"Razzle",type:"magic",mana:1,tier:"rare",vanish:!0,pack:"combine",courage:3}),new f({id:"master_of_all",name:"Master of All",type:"magic",mana:3,target:"monster",tier:"rare",vanish:!0,ephemeral:!0,pack:"combine",courage:4}),new f({id:"mystical_energy",name:"Mystical Energy",type:"magic",mana:0,tier:"rare",vanish:!0,weight:2,courage:5}),new f({id:"mystical_maneuver",name:"Mystical Maneuver",type:"magic",mana:1,tier:"rare",use:2,linger:1,pack:"cycle",courage:3}),new f({id:"vortex",name:"Vortex",type:"magic",mana:"?",tier:"rare",pack:"rainbow",courage:5}),new f({id:"ancient_runestone",name:"Ancient Runestone",type:"magic",mana:3,tier:"rare",pack:"rainbow",weight:3,courage:5}),new f({id:"fleeting_incantation",name:"Fleeting Incantation",type:"magic",mana:0,tier:"rare",linger:2,use:2,expire:2,pack:"rainbow",weight:7,courage:4}),new f({id:"obelisk",name:"Obelisk",type:"magic",mana:1,tier:"rare",pack:"rainbow",weight:6,courage:4}),new f({id:"annihilation",name:"Annihilation",type:"magic",mana:3,tier:"legendary",courage:8}),new f({id:"flare_up",name:"Flare Up",type:"magic",mana:0,tier:"legendary",courage:8,use:2,retain:!0,linger:1}),new f({id:"legion",name:"Legion",type:"magic",mana:2,tier:"legendary",courage:8}),new f({id:"ignite",name:"Ignite",type:"magic",mana:1,tier:"legendary",courage:8,vanish:!0}),new f({id:"perfect_storm",name:"Perfect Storm",type:"magic",mana:2,tier:"legendary",courage:8,pack:"rainbow"}),new f({id:"eternal_runestone",name:"Eternal Runestone",type:"magic",mana:2,vanish:!0,tier:"legendary",retain:!0,pack:"rainbow",courage:8})],w=new t;function b(){const e=y;let a=window.game;return{cards:e,getAddableCards:function(t=!1,n=!1,r=!1,i=[]){let s=e;return t&&n?s=s.filter((e=>e.tier==t&&e.type==n)):t?s=s.filter((e=>e.tier==t)):n&&(s=s.filter((e=>e.type==n))),s=r?s.filter((e=>e.pack==r)):s.filter((e=>"basic"==e.pack||e.pack==a.boosterPack)),s=s.filter((e=>1==e.addable)),s=s.filter((e=>!i.includes(e.id))),s},getAllCards:function(){let a=e;for(let e=0;e<a.length;e++){a[e].guid=w.randString();let t=C().buildDescription(a[e]);a[e].desc=t;let n=C().buildSlotsDescription(a[e]);a[e].slotDesc=n}return a},getTotalCards:function(){return e?.length},buildLibrary:function(){for(let e=0;e<this.getTotalCards();e++)w.appendCard(this.getAllCards()[e],".library-panel .cards")},getWeapons:function(){let a=e.filter((e=>1==e.weapon));return 0==a.length&&(a=!1),a}}}var v=w.sound("soundsprite.mp3");function C(){let e=[],a=window.game,t=window.player;function n(n,s=!1){let o=b().cards.find((({id:e})=>e===n)),d=$.extend(!0,{},o);d.guid=s||w.randString();let l=i(d);d.desc=l;let c=r(d);d.slotDesc=c,e.push(d),null!=d&&0!=d&&""!=d&&null!=d||(console.log("Tried to add "+n+" to deck but failed."),console.log("addCard:"),console.log(o),console.log("game:"),console.log(a),console.log("this.cards:"),console.log(this.cards),console.log("cards:"),console.log(e)),t.cardsOwned+=1}function r(e){let a="",t=i(e,"frost"),n=i(e,"flame"),r=i(e,"frost_2"),s=i(e,"flame_2"),o=i(e,"both");return t==n?a+=""!=t?'<div><span class="either">Shard</span>: '+t:"</div>":(a+=""!=t?'<div><span class="frost">Frost Shard</span>: '+t:"</div>",a+=""!=n?'<div><span class="flame">Flame Shard</span>: '+n:"</div>"),e.slots>1&&(o!=s&&o!=r||(a+=""!=o?'<div><span class="either">Double Shard</span>: '+o:"</div>"),o!=r&&(a+=""!=r?'<div><span class="frost">Double Frost Shard</span>: '+r:"</div>"),o!=s&&(a+=""!=s?'<div><span class="flame">Double Flame Shard</span>: '+s:"</div>")),a}function i(e,a=!1){let t="",n=$.extend(!0,{},e);"flame"==a?n.shards.push("flame"):"frost"==a?n.shards.push("frost"):"flame_2"==a?(n.shards.push("flame"),n.shards.push("flame")):"frost_2"==a?(n.shards.push("frost"),n.shards.push("frost")):"both"==a&&(n.shards.push("flame"),n.shards.push("frost"));let r=a?w.getShardAttribute(n,a,"descOverride"):w.getCardAttribute(n,"descOverride");if(""!=r&&0!=r)return t=r,t;t+=a?w.getShardAttribute(n,a,"additionalDesc"):w.getCardAttribute(n,"additionalDesc"),t+=function(e,a){let t="";if(null!=e&&e.counter>-1){let a=e.when,n=e.at,r=e.per,i=e.once,s=1==n?"":"s",o=1==n?"":n;switch(t+='<div class="desc-item">',a){case"turns":t+=i?"On turn "+n:"Every "+o+" turn"+s;break;case"cardsPlayed":t+="Every "+n+" cards played";break;case"attackCardsPlayed":t+="Every "+n+" attack cards played";break;case"toolCardsPlayed":t+="Every "+n+" tool cards played";break;case"magicCardsPlayed":t+="Every "+n+" magic cards played"}"turn"==r&&(t+=" per "+r),t+="</div>"}return t}(a?w.getShardAttribute(n,a,"trigger"):w.getCardAttribute(n,"trigger"));let i=a?w.getShardAttribute(n,a,"blk"):w.getCardAttribute(n,"blk");if(i.length>0){t+='<div class="desc-item">Gain ';for(let e=0;e<i.length;e++)t+='<span class="amount blk" data-amount="'+i[e]+'">'+i[e]+"</span>, ";t=t.slice(0,-2),"?"==n.mana?t+=" block ? times</div>":t+=" block</div>"}let l=a?w.getShardAttribute(n,a,"armor"):w.getCardAttribute(n,"armor");if(l.length>0){t+='<div class="desc-item">Gain ';for(let e=0;e<l.length;e++)t+='<span class="amount armor" data-amount="'+l[e]+'">'+l[e]+"</span>, ";t=t.slice(0,-2),"?"==n.mana?t+=" armor ? times</div>":t+=" armor</div>"}let c=a?w.getShardAttribute(n,a,"dmg"):w.getCardAttribute(n,"dmg");if(c.length>0){t+='<div class="desc-item desc-dmg">Deal ';for(let e=0;e<c.length;e++)t+='<span class="amount dmg" data-amount="'+c[e]+'">'+c[e]+"</span>, ";t=t.slice(0,-2),"?"==n.mana?t+=" damage ? times</div>":t+=" damage</div>"}let m="",u=a?w.getShardAttribute(n,a,"magic"):w.getCardAttribute(n,"magic");if(u.length>0){m+='<div class="desc-item">Summon ';for(let e=0;e<u.length;e++)m+='<span class="amount magic" data-amount="'+u[e].amount+'">'+u[e].amount+"</span> "+u[e].type+", ";m=m.slice(0,-2),"?"==n.mana?m+=" magic ? times</div>":m+=" magic</div>"}if(t+=m,t+=s(a?w.getShardAttribute(n,a,"effects"):w.getCardAttribute(n,"effects"),0,e),t+=o(a?w.getShardAttribute(n,a,"abilities"):w.getCardAttribute(n,"abilities"),0,e),t+=d(a?w.getShardAttribute(n,a,"actions"):w.getCardAttribute(n,"actions")),a){let e=w.getShardAttribute(n,a,"mana");void 0!==e&&""!==e&&(t+='<div class="desc-item">Mana: '+e+"</div>");let r=w.getShardAttribute(n,a,"age");r>0&&(t+='<div class="desc-item"><span class="highlight">Age:</span> '+r+"</span></div>");let i=w.getShardAttribute(n,a,"use");i>0&&(t+='<div class="desc-item"><span class="highlight">Use:</span> '+i+"</div>");let s=w.getShardAttribute(n,a,"expire");s>0&&(t+='<div class="desc-item"><span class="highlight">Expire:</span> '+s+"</div>");let o=w.getShardAttribute(n,a,"linger");o>0&&(t+='<div class="desc-item"><span class="highlight">Linger:</span> '+o+"</div>");let d=w.getShardAttribute(n,a,"vanish");""!==d&&(t+='<div class="desc-item">'+(d?"":"Lose ")+'<span class="highlight">Vanish</span></div>');let l=w.getShardAttribute(n,a,"retain");""!==l&&(t+='<div class="desc-item">'+(l?"":"Lose ")+'<span class="highlight">Retain</span></div>');let c=w.getShardAttribute(n,a,"ephemeral");""!==c&&(t+='<div class="desc-item">'+(c?"":"Lose ")+'<span class="highlight">Ephemeral</span></div>');let m=w.getShardAttribute(n,a,"breakable");""!==m&&(t+='<div class="desc-item">'+(m?"":"Lose ")+'<span class="highlight">Breakable</span></div>');let u=w.getShardAttribute(n,a,"natural");""!==u&&(t+='<div class="desc-item">'+(u?"":"Lose ")+'<span class="highlight">Natural</span></div>')}else{t+=function(e){let a="";if(null!=e&&e.length>0){a+='<div class="desc-item desc-trade">Trades for ';for(let t=0;t<e.length;t++)a+=w.getCardById(e[t],b().cards).name+", ";a=a.slice(0,-2),a+="</div>"}return a}(w.getCardAttribute(n,"trade"))}let h=[["combine","Combined"],["draw","Drawn"],["discard","Discarded"],["destroy","Destroyed"]],g="";for(let t=0;t<h.length;t++){let r=h[t][0],i='<div class="desc-item desc-behavior">When '+h[t][1]+": ",l="";if(a?w.getShardAttribute(n,a,r):w.getCardAttribute(n,r)){let t="",c=a?w.getShardAttribute(n,a,"dmg",r):w.getCardAttribute(n,"dmg",r),m=a?w.getShardAttribute(n,a,"target",r):w.getCardAttribute(n,"target",r);if(c.length>0){t+="player"==m?'<div class="desc-item desc-sub-item">Take ':'<div class="desc-item desc-sub-item">Deal ';for(let e=0;e<c.length;e++)t+='<span class="amount dmg" data-amount="'+c[e]+'">'+c[e]+"</span>, ";t=t.slice(0,-2),t+=" damage</div>"}l+=t;let u="",h=a?w.getShardAttribute(n,a,"blk",r):w.getCardAttribute(n,"blk",r);if(h.length>0){u+='<div class="desc-item desc-sub-item">Gain ';for(let e=0;e<h.length;e++)u+='<span class="amount blk" data-amount="'+h[e]+'">'+h[e]+"</span>, ";u=u.slice(0,-2),u+=" block</div>"}l+=u;let p="",f=a?w.getShardAttribute(n,a,"armor",r):w.getCardAttribute(n,"armor",r);if(f.length>0){p+='<div class="desc-item desc-sub-item">Gain ';for(let e=0;e<f.length;e++)p+='<span class="amount armor" data-amount="'+f[e]+'">'+f[e]+"</span>, ";p=p.slice(0,-2),p+=" armor</div>"}l+=p;let y="",b=a?w.getShardAttribute(n,a,"magic",r):w.getCardAttribute(n,"magic",r);if(b.length>0){y+='<div class="desc-item desc-sub-item">Summon ';for(let e=0;e<b.length;e++)y+='<span class="amount magic" data-amount="'+b[e].amount+'">'+b[e].amount+"</span> "+b[e].type+", ";y=y.slice(0,-2),y+=" magic</div>"}l+=y,l+=s(a?w.getShardAttribute(n,a,"effects",r):w.getCardAttribute(n,"effects",r),0,e),l+=o(a?w.getShardAttribute(n,a,"abilities",r):w.getCardAttribute(n,"abilities",r),0,e),l+=d(a?w.getShardAttribute(n,a,"actions",r):w.getCardAttribute(n,"actions",r)),g+=i+l+"</div>"}}t+=g;let p=["aura","sparkle","shimmer"],f="";if(!a)for(let a=0;a<p.length;a++){let t=p[a],r='<div class="desc-item desc-stance"><span class="'+t+'">'+t+" Stance</span>: ",i="";if(w.getCardAttribute(n,t)){let a="",l=w.getCardAttribute(n,"dmg",t),c=w.getCardAttribute(n,"target",t);if(l.length>0){a+="player"==c?'<div class="desc-item desc-sub-item">Take ':'<div class="desc-item desc-sub-item">Deal ';for(let e=0;e<l.length;e++)a+='<span class="amount dmg" data-amount="'+l[e]+'">'+l[e]+"</span>, ";a=a.slice(0,-2),a+=" damage</div>"}i+=a;let m="",u=w.getCardAttribute(n,"blk",t);if(u.length>0){m+='<div class="desc-item desc-sub-item">Gain ';for(let e=0;e<u.length;e++)m+='<span class="amount blk" data-amount="'+u[e]+'">'+u[e]+"</span>, ";m=m.slice(0,-2),m+=" block</div>"}i+=m;let h="",g=w.getCardAttribute(n,"armor",t);if(g.length>0){h+='<div class="desc-item desc-sub-item">Gain ';for(let e=0;e<g.length;e++)h+='<span class="amount armor" data-amount="'+g[e]+'">'+g[e]+"</span>, ";h=h.slice(0,-2),h+=" armor</div>"}i+=h;let p="",y=w.getCardAttribute(n,"magic",t);if(y.length>0){p+='<div class="desc-item desc-sub-item">Summon ';for(let e=0;e<y.length;e++)p+='<span class="amount magic" data-amount="'+y[e].amount+'">'+y[e].amount+"</span> "+y[e].type+", ";p=p.slice(0,-2),p+=" magic</div>"}i+=p,i+=s(w.getCardAttribute(n,"effects",t),0,e),i+=o(w.getCardAttribute(n,"abilities",t),0,e),i+=d(w.getCardAttribute(n,"actions",t)),f+=r+i+"</div>"}}return t+=f,t}function s(e,t,n){let r="";if(null!=e&&e.length>0)for(let t=0;t<e.length;t++){e[t].hex?r+='<div class="desc-item">Hex ':r+='<div class="desc-item">Gain ';let i=e[t].turns>1?"s":"",s=e[t].turns>0?' <span class="desc-turns">for '+e[t].turns+" turn"+i+"</span> ":"",o=e[t].amount,d=e[t].amount,l="";n.effects.length>0&&(l=' <span class="effect-description">('+a.effects.find((({id:a})=>a===e[t].effect)).desc+")</span>"),null==o&&(o=e[t].base,d=e[t].base),"punch"!=e[t].effect&&"sorcery"!=e[t].effect&&"resistance"!=e[t].effect&&"thunder"!=e[t].effect||(o=Math.round(100*(o+Number.EPSILON)),o+="%"),r+=' <span class="amount '+e[t].effect+'" data-amount="'+d+'">'+o+'</span> <span class="effect-text">'+e[t].effect+"</span>"+s+l+"</div>"}return r}function o(e,t,n){let r="";if(null!=e&&e.length>0)for(let t=0;t<e.length;t++){let i=a.abilities.find((({id:a})=>a===e[t].ability));e[t].hex?r+='<div class="desc-item">Hex ':r+='<div class="desc-item">Gain ';let s=e[t].turns>1?"s":"",o=e[t].turns>0&&"card"!==i.context?" for "+e[t].turns+" turn"+s:"",d=e[t].turns>0&&"card"==i.context?e[t].turns+" ":"",l="";n.abilities.length>0&&(l=' <span class="ability-description">('+i.desc+")</span>"),r+=d+'<span class="ability-text">'+i.name+"</span>"+o+l+"</div>"}return r}function d(e,t){let n="";if(null!=e&&e.length>0)for(let t=0;t<e.length;t++){let i=e[t].action,s=a.actions.find((e=>e.id===i)),o=s.name,d=(s.desc,e[t].what),l=e[t].key,c=w.getCardById(d,b().cards),m=d;null!=c&&(m=c.name);let u=e[t].select,h=e[t].type,g=e[t].tier,p=e[t].value,f=e[t].to,y=e[t].from,v=e[t].with,C=e[t].optional,k=null!=e[t].modifiers?e[t].modifiers:{},x="",_=1==p?"":"s";if("stat"==i?(o=m.toUpperCase(),o=null!=l?l.toUpperCase()+" "+o:o,o="double"==p?"Double "+o:o,l=null!=l?l:"stat",p=null!=p&&"double"!=p?" "+("number"==typeof p&&p>0?"+":"")+'<span class="amount '+l+"-"+d+'-amount" data-amount="'+p+'">'+p+"</span>":"",d=""):(d=null!=d?' <span class="whatname">'+m+"</span>":"",C=1==C?" up to ":"",p="Find Draw Card"==o||"Find Discard Card"==o||"Find Dead Card"==o?null!=p?C+" (&times;"+p+")":"":null!=p?C+" "+p:""),f="removeHexes"==i||"removeBuffs"==i?null!=f?" from "+w.getFromDisplay(f):"":null!=f?" to "+w.getFromDisplay(f):"",u=null!=u?" "+u:"",u=-1==u?" all":u,h=null!=h?" "+h:"",g=null!=g?" "+g:"",y=null!=y?" "+w.getFromDisplay(y):"",u=" all cards"==y?"":u,"transmute"==i&&(u=" up to "+u),o="Add Card"==o?"Add":o,v=null!=v?v.length>1?" with "+v[0]+" and "+v[1]+" shards":" with "+v+" shard":"",!$.isEmptyObject(k)){for(var r in x+=" with modifiers: ",k)k.hasOwnProperty(r)&&(x+=r+"&mdash;"+k[r]+", ");x=x.slice(0,-2)}""!=u&&""!=h&&""!=p?(f=""!=f?" and add "+f:"",n+=" any"==h?"Choose "+u+" of "+p+g+" card"+_+" "+f+v+x+". ":"Choose "+u+" of "+p+g+h+" card"+_+" "+f+v+x+". "):(h=" any"==h?""!=h?g+" card"+_+" ":"":" attack"==h||" tool"==h||" ability"==h||" magic"==h||" weapon"==h?""!=h?g+h+" card"+_+" ":"":" clutter"==h?""!=h?h:"":""!=h?" with"+h:"","Ensharden"==o?(d=y,y="",h=" with random"==h?" with random shards":h):"Destroy"==o||"Discard"==o||"Draw"==o?d=1==p||" up to 1"==p?" card":" cards":"TYPE RAINBOW"==o?o="Change magic type to":"COURAGE"==o&&(o="Courage Coin"),n+='<div class="desc-item"><span class="desc-item-name">'+o+'</span><span class="desc-item-select">'+u+'</span><span class="desc-item-value">'+p+'</span><span class="desc-item-what">'+d+'</span><span class="desc-item-type">'+h+'</span><span class="desc-item-to">'+f+'</span><span class="desc-item-from">'+y+'</span><span class="desc-item-cardWith">'+v+'</span><span class="desc-item-modifiers">'+x+"</span></div>")}return n}return{buildDeck:function(){n("jab"),n("jab"),n("jab"),n("rainbow_orb"),n("shield"),n("shield"),n("shield"),n("leather_armor"),n("stun"),"easy"==a.difficulty&&n("spewnicorn_spray")},addCard:n,removeCard:function(a){e=e.filter((e=>e.guid!==a)),this.cards=e,t.cardsOwned-=1},attachShard:function(e,a){e.shards.push(a);let t=i(e);e.desc=t;let n=w.buildCardSlots(e),r=w.getDomCardByGuid(e.guid);r.find(".desc-inner").html(t),r.find(".slots").html(n)},showModifiedCards:function(e,t,n=!1){if(a.toShow.length>0){a.toShow=[...new Set(a.toShow)];let r=a.toShow;for(let i=0;i<r.length;i++){let s=[];if(""!==r[i].guid&&(s=w.getDomCardByGuid(r[i].guid)),0!=s.length&&null!=s||(w.appendCard(r[i],".library-panel .cards"),s=w.getDomCardById(r[i].id)),s.parent().clone().appendTo(".show-cards"),!a.combatEndedFlag&&n){let a=w.getCardByGuid(r[i].guid,e.handCards);if(null!=a){w.removeCardByGuid(a.guid,"replaced");let e=a.playable?"playable":"";w.getCardAttribute(a,"mana")>t.mana.current&&(e=""),w.appendCard(a,".player-cards",e)}}}w.animateShowCards(),a.toShow=[]}},hasOpenSlot:function(e){return null!=e.shards&&e.shards.length<e.slots},numOpenSlots:function(a=e){let t=0;for(let e=0;e<a.length;e++){let n=0;null!=a[e].shards&&(n=a[e].shards.length),t+=a[e].slots-n}return t},buildDescription:i,buildSlotsDescription:r,decideCard:function(e=!1,t="common"){let n=w.chance(a.legendaryChance),s=w.chance(a.rareChance),o=w.chance(a.uncommonChance),d=Math.round((a.floor-10)/2);d<0&&(d=0),a.legendaryChance>5&&(a.legendaryChance=5);let l=Math.round(.2*(a.floor-5));l<0&&(l=0),a.rareChance+=l,a.rareChance>25&&(a.rareChance=25);let c=Math.round(.4*(a.floor-3));c<0&&(c=0),a.uncommonChance+=c,a.uncommonChance>50&&(a.uncommonChance=50);let m=b().getAddableCards(t,e,!1,a.toExclude);if("ice_gate"==a.mapType||"fire_gate"==a.mapType||n)m=b().getAddableCards("legendary",e,!1,a.toExclude),0==m.length&&(m=b().getAddableCards("rare",e,!1,a.toExclude)),a.legendaryChance=0;else if("arena"==a.mapType||s){m=b().getAddableCards("rare",e,!1,a.toExclude);let t=a.floor;a.rareChance-=t,a.rareChance<0&&(a.rareChance=0)}else if(o){m=b().getAddableCards("uncommon",e,!1,a.toExclude);let t=a.floor;a.uncommonChance-=t,a.uncommonChance<0&&(a.uncommonChance=0)}let u=!1;if(m.length>0){u=w.weightedRandom(m);let e=i(u);u.desc=e;let a=r(u);u.slotDesc=a}return a.toExclude.push(u.id),u},getWeapons:function(){let a=e.filter((e=>1==e.weapon));return 0==a.length&&(a=!1),a},getTradeableCards:function(){let a=e.filter((e=>e.trade.length>0));return 0==a.length&&(a=!1),a},cards:e}}new t;class k{constructor({id:e,name:a,type:t}){this.id=e,this.name=a,this.type=t}}const x=[new k({id:"frost",name:"Frost",type:"ice"}),new k({id:"flame",name:"Flame",type:"fire"})];class _{constructor({id:e,type:a="candy",name:t,descOverride:n,weight:r=5,courage:i=2,target:s="",dmg:o=[],blk:d=[],armor:l=[],magic:c=[],effects:m=[],abilities:u=[],actions:h=[],combatOnly:g=!0,x:p=0,y:f=0}){this.guid="",this.id=e,this.type=a,this.name=t,this.descOverride=n,this.weight=r,this.courage=i,this.target=s,this.dmg=o,this.blk=d,this.armor=l,this.magic=c,this.effects=m,this.abilities=u,this.actions=h,this.combatOnly=g,this.x=p,this.y=f}}const S=[new _({id:"nut_clusters",name:"Nut Clusters",dmg:[40],weight:7,target:"monster",x:-384,y:-3456}),new _({id:"circus_peanuts",name:"Circus Peanuts",weight:7,blk:[50],x:-480,y:-3456}),new _({id:"rock_candy",name:"Rock Candy",courage:3,weight:7,armor:[25],combatOnly:!1,x:-448,y:-2464}),new _({id:"cherry_taffy",name:"Cherry Taffy",weight:7,blk:[25],armor:[15],x:-288,y:-4224}),new _({id:"caramel_creme",name:"Caramel Creme",weight:4,dmg:[50],target:"monster",x:-160,y:-3870}),new _({id:"marshmallows",name:"Marshmallows",weight:4,blk:[60],x:-256,y:-3872}),new _({id:"kettle_corn",name:"Kettle Corn",weight:4,armor:[35],x:-64,y:-1568}),new _({id:"caramel_corn",name:"Caramel Corn",weight:2,courage:3,dmg:[50],target:"monster",x:-64,y:-1696}),new _({id:"swedish_fish",name:"Swedish Fish",weight:2,courage:3,blk:[70],x:-32,y:-1666}),new _({id:"trail_mix",name:"Trail Mix",weight:2,courage:3,armor:[45],x:0,y:-1760}),new _({id:"blueberry_hard_candy",name:"Blueberry Hard Candy",weight:6,magic:[{type:"rainbow",amount:40}],x:-64,y:-14816}),new _({id:"grape_hard_candy",name:"Grape Hard Candy",magic:[{type:"dark",amount:40}],x:-128,y:-14816}),new _({id:"cherry_hard_candy",name:"Cherry Hard Candy",magic:[{type:"chaos",amount:40}],x:-32,y:-14816}),new _({id:"lime_hard_candy",name:"Lime Hard Candy",magic:[{type:"elemental",amount:40}],x:-96,y:-14816}),new _({id:"orange_hard_candy",name:"Orange Hard Candy",courage:3,weight:4,magic:[{type:"aligned",amount:40}],x:-0,y:-14816}),new _({id:"mystery_hard_candy",name:"Mystery Hard Candy",weight:6,magic:[{type:"random",amount:60}],x:-160,y:-14816}),new _({id:"blueberry_lollipop",name:"Blueberry Lollipop",courage:3,weight:2,magic:[{type:"aligned",amount:40}],effects:[{effect:"lightning",amount:5,turns:-1}],x:-192,y:-1152}),new _({id:"cherry_lollipop",name:"Cherry Lollipop",courage:3,weight:2,magic:[{type:"aligned",amount:40}],effects:[{effect:"lightning",amount:5,turns:-1}],x:-192,y:-1088}),new _({id:"grape_lollipop",name:"Grape Lollipop",courage:3,weight:2,magic:[{type:"aligned",amount:40}],effects:[{effect:"lightning",amount:5,turns:-1}],x:-192,y:-1216}),new _({id:"lime_lollipop",name:"Lime Lollipop",courage:3,weight:2,magic:[{type:"aligned",amount:40}],effects:[{effect:"lightning",amount:5,turns:-1}],x:-192,y:-1280}),new _({id:"cherry_cordial",name:"Cherry Cordial",weight:4,actions:[{action:"draw",value:4}],x:-416,y:-3808}),new _({id:"cinnamon_candy_stick",name:"Cinnamon Candy Stick",courage:1,weight:3,actions:[{action:"ensharden",type:"flame",select:-1,from:"allCards",random:!0}],x:-286,y:-832}),new _({id:"spearmint_candy_stick",name:"Spearmint Candy Stick",courage:1,weight:3,actions:[{action:"ensharden",type:"frost",select:-1,from:"allCards",random:!0}],x:-286,y:-928}),new _({id:"peppermint_candy_stick",name:"Peppermint Candy Stick",courage:1,weight:4,actions:[{action:"ensharden",type:"random",select:-1,from:"allCards",random:!0}],x:-286,y:-992}),new _({id:"jawbreaker",name:"Jawbreaker",courage:3,weight:2,actions:[{action:"removeHexes",to:"player"}],x:-32,y:-3360}),new _({id:"candy_corn",name:"Candy Corn",weight:4,actions:[{action:"addCard",value:3,what:"energize",to:"handCards"}],x:-256,y:-3584}),new _({id:"peanut_butter_cup",name:"Peanut Butter Cup",weight:4,actions:[{action:"addCard",value:3,what:"boost",to:"handCards"}],x:-482,y:-3744}),new _({id:"cotton_candy",name:"Cotton Candy",weight:7,combatOnly:!1,actions:[{action:"stat",what:"health",key:"current",value:30}],x:-256,y:-2080}),new _({id:"salted_caramel",name:"Salted Caramel",courage:3,weight:4,actions:[{action:"stat",what:"health",key:"max",value:15}],x:-96,y:-3808}),new _({id:"lemon_gumdrop",name:"Lemon Gumdrop",courage:1,weight:8,combatOnly:!1,actions:[{action:"stat",what:"courage",value:3}],x:-32,y:-962}),new _({id:"grape_gumdrop",name:"Grape Gumdrop",courage:3,weight:3,combatOnly:!1,actions:[{action:"stat",what:"shimmer",key:"current",value:3}],x:-32,y:-1026}),new _({id:"blueberry_gumdrop",name:"Blueberry Gumdrop",courage:3,weight:3,combatOnly:!1,actions:[{action:"stat",what:"sparkle",key:"current",value:3}],x:-32,y:-898}),new _({id:"cherry_gumdrop",name:"Cherry Gumdrop",courage:3,weight:3,combatOnly:!1,actions:[{action:"stat",what:"aura",key:"current",value:3}],x:-32,y:-994}),new _({id:"chocolate_fudge",name:"Chocolate Fudge",blk:[10],effects:[{effect:"solid",amount:6,turns:-1}],x:-384,y:-3776}),new _({id:"white_fudge",name:"White Fudge",weight:3,courage:3,blk:[20],effects:[{effect:"solid",amount:12,turns:-1}],x:-352,y:-3776}),new _({id:"chocolate_bar",name:"Chocolate Bar",target:"monster",dmg:[10],effects:[{effect:"might",amount:4,turns:-1}],x:-320,y:-834}),new _({id:"white_chocolate_bar",name:"White Chocolate Bar",weight:3,courage:3,target:"monster",dmg:[20],effects:[{effect:"might",amount:8,turns:-1}],x:-320,y:-962}),new _({id:"white_chocolate_clusters",name:"White Chocolate Clusters",weight:1,courage:3,dmg:[30],effects:[{effect:"might",amount:12,turns:-1}],x:0,y:-962}),new _({id:"chocolate_cookie",name:"Chocolate Cookie",target:"monster",dmg:[10],effects:[{effect:"punch",amount:.3,turns:-1}],x:-128,y:-3872}),new _({id:"white_chocolate_cookie",name:"White Chocolate Cookie",weight:3,courage:3,target:"monster",dmg:[20],effects:[{effect:"punch",amount:.6,turns:-1}],x:-416,y:-3904}),new _({id:"chocolate_clusters",name:"Chocolate Clusters",dmg:[30],weight:1,courage:3,effects:[{effect:"punch",amount:.8,turns:-1}],x:0,y:-832}),new _({id:"dark_truffle",name:"Dark Truffle",magic:[{type:"aligned",amount:10}],effects:[{effect:"conjure",amount:4,turns:-1}],x:-418,y:-4386}),new _({id:"white_truffle",name:"White Truffle",weight:3,courage:3,magic:[{type:"aligned",amount:20}],effects:[{effect:"conjure",amount:8,turns:-1}],x:-418,y:-4514}),new _({id:"chocolate_pudding",name:"Chocolate Pudding",magic:[{type:"aligned",amount:10}],effects:[{effect:"sorcery",amount:.3,turns:-1}],x:-480,y:-3650}),new _({id:"vanilla_pudding",name:"Vanilla Pudding",weight:3,courage:3,magic:[{type:"aligned",amount:20}],effects:[{effect:"sorcery",amount:.6,turns:-1}],x:-288,y:-3650}),new _({id:"gumball",name:"Gumball",effects:[{effect:"momentum",amount:3,turns:-1}],x:0,y:-3360}),new _({id:"sour_bears",name:"Sour Bears",weight:4,effects:[{effect:"vex",amount:3,turns:-1}],x:-96,y:-3458}),new _({id:"black_licorice",name:"Black Licorice",courage:4,weight:1,effects:[{effect:"fatality",amount:1.2,turns:1,persist:!0}],x:-128,y:-1760}),new _({id:"blueberry_taffy",name:"Blueberry Taffy",weight:7,effects:[{effect:"regen",amount:6,turns:-1}],x:-320,y:-4224}),new _({id:"watermelon_gobstopper",name:"Watermelon Gobstopper",magic:[{type:"aligned",amount:5}],effects:[{effect:"lightning",amount:5,turns:-1}],x:-416,y:-2496}),new _({id:"blueberry_gobstopper",name:"Blueberry Gobstopper",weight:3,courage:3,magic:[{type:"aligned",amount:10}],effects:[{effect:"lightning",amount:10,turns:-1}],x:-416,y:-2432}),new _({id:"grape_gobstopper",name:"Grape Gobstopper",magic:[{type:"aligned",amount:5}],effects:[{effect:"thunder",amount:.3,turns:-1}],x:-416,y:-2464}),new _({id:"orange_gobstopper",name:"Orange Gobstopper",weight:3,courage:3,magic:[{type:"aligned",amount:10}],effects:[{effect:"thunder",amount:.6,turns:-1}],x:-416,y:-2528}),new _({id:"pixie_sugar",name:"Pixie Sugar",effects:[{effect:"mystery",amount:4,turns:-1}],x:-416,y:-800}),new _({id:"candy_lemon_slice",name:"Candy Lemon Slice",effects:[{effect:"lemonade",amount:2,turns:-1}],x:-416,y:-4160}),new _({id:"sour_apple_candy",name:"Sour Apple Candy",effects:[{effect:"spikes",amount:24,turns:-1}],x:-128,y:-3584}),new _({id:"spicy_cinnammon_candy",name:"Spicy Cinnammon Candy",effects:[{effect:"retaliate",amount:20,turns:-1}],x:-288,y:-3520}),new _({id:"strawberry_pastry",name:"Strawberry Pastry",magic:[{type:"aligned",amount:5}],effects:[{effect:"summon",amount:8,turns:-1}],x:-96,y:-4224}),new _({id:"peanut_butter_pastry",name:"Peanut Butter Pastry",weight:3,courage:3,magic:[{type:"aligned",amount:10}],effects:[{effect:"summon",amount:16,turns:-1}],x:-160,y:-4224}),new _({id:"pixie_dust",name:"Pixie Dust",courage:3,weight:2,abilities:[{ability:"unreachable",turns:1,enabled:!0}],x:-256,y:-800}),new _({id:"cinnamon_drop",name:"Cinnamon Drop",courage:3,weight:2,abilities:[{ability:"hypnotize",turns:1,enabled:!0}],x:-256,y:-736}),new _({id:"chocolate_chips",name:"Chocolate Chips",courage:3,weight:2,abilities:[{ability:"explode",turns:1,enabled:!0}],x:-256,y:-3456}),new _({id:"white_chocolate_chips",name:"White Chocolate Chips",courage:3,weight:1,abilities:[{ability:"explode",turns:2,enabled:!0}],x:-288,y:-3584})];class G{constructor({id:e,type:a="treasure",name:t,descOverride:n,owned:r=!1,weight:i=5,tier:s=1,courage:o=9,trigger:d={counter:-1,when:"turns",at:3,per:"combat",once:!1},effects:l=[],abilities:c=[],actions:m=[],x:u=0,y:h=0,permanent:g=!1,starting:p=!1}){this.id=e,this.type=a,this.name=t,this.descOverride=n,this.owned=r,this.weight=i,this.tier=s,this.courage=o,this.trigger=d,this.effects=l,this.abilities=c,this.actions=m,this.x=u,this.y=h,this.permanent=g,this.starting=p}}const R=[new G({id:"gift_of_healing",name:"Gift Of Healing",permanent:!0,starting:!0,owned:!0,effects:[{effect:"heal",base:8}],x:-416,y:-3104}),new G({id:"gift_of_strength",name:"Gift Of Strength",permanent:!0,starting:!0,owned:!0,effects:[{effect:"might",base:3}],x:-416,y:-2912}),new G({id:"gift_of_covering",name:"Gift Of Covering",permanent:!0,starting:!0,owned:!0,effects:[{effect:"muster",base:3}],x:-416,y:-3200}),new G({id:"gift_of_protection",name:"Gift Of Protection",permanent:!0,starting:!0,owned:!0,effects:[{effect:"solid",base:4}],x:-416,y:-3040}),new G({id:"gift_of_conjuring",name:"Gift Of Conjuring",permanent:!0,starting:!0,owned:!0,effects:[{effect:"conjure",base:3}],x:-416,y:-2976}),new G({id:"gift_of_summoning",name:"Gift Of Summoning",permanent:!0,starting:!0,owned:!0,effects:[{effect:"summon",base:4}],x:-416,y:-3008}),new G({id:"gift_of_power",name:"Gift Of Power",permanent:!0,starting:!0,owned:!0,effects:[{effect:"lightning",base:4}],x:-416,y:-3072}),new G({id:"gift_of_longevity",name:"Gift Of Longevity",permanent:!0,starting:!0,owned:!0,actions:[{action:"stat",what:"health",key:"max",value:25},{action:"stat",what:"health",key:"current",value:25}],x:-416,y:-3168}),new G({id:"gift_of_the_craftsman",name:"Gift Of The Craftsman",permanent:!0,starting:!0,owned:!0,effects:[{effect:"craft",base:4}],x:-416,y:-2880}),new G({id:"gift_of_magic",name:"Gift Of Magic",permanent:!0,starting:!0,owned:!0,actions:[{action:"stat",what:"rainbow",key:"base",value:12}],x:-416,y:-2944}),new G({id:"burning_ruby",name:"Burning Ruby",permanent:!0,effects:[{effect:"mastery",base:2}],x:-64,y:-674}),new G({id:"gleaming_emerald",name:"Gleaming Emerald",permanent:!0,effects:[{effect:"fierce",base:30}],x:-32,y:-674}),new G({id:"twinkling_sapphire",name:"Twinkling Sapphire",permanent:!0,effects:[{effect:"rowdy",base:10}],x:-0,y:-674}),new G({id:"glowing_totem",name:"Glowing Totem",courage:10,permanent:!0,effects:[{effect:"conjure",base:4}],x:-64,y:-768}),new G({id:"talisman",name:"Talisman",permanent:!0,effects:[{effect:"mage",base:1}],x:-320,y:-15072}),new G({id:"magic_dust",name:"Magic Dust",permanent:!0,weight:2,effects:[{effect:"enchanter",base:1}],x:-192,y:-3680}),new G({id:"black_cauldron",name:"Black Cauldron",weight:4,courage:11,permanent:!0,effects:[{effect:"summon",base:6}],x:-224,y:-6080}),new G({id:"opaque_charm",name:"Opaque Charm",courage:8,permanent:!0,effects:[{effect:"arcane",base:10}],x:-288,y:-544}),new G({id:"pridwen",name:"Pridwen",weight:6,permanent:!0,effects:[{effect:"solid",base:5}],x:-32,y:-15008}),new G({id:"snakestone",name:"Snakestone",courage:8,permanent:!0,effects:[{effect:"mend",base:2}],x:-480,y:-14912}),new G({id:"charmstone",name:"Charmstone",courage:8,weight:6,permanent:!0,effects:[{effect:"cunning",base:2}],x:-96,y:-736}),new G({id:"thunderstone",name:"Thunderstone",permanent:!0,effects:[{effect:"stout",base:10}],x:-160,y:-15008}),new G({id:"dew_of_yarva",name:"Dew of Yarva",permanent:!0,effects:[{effect:"heal",base:10}],x:-480,y:-2752}),new G({id:"dew_of_lunya",name:"Dew of Lunya",permanent:!0,effects:[{effect:"regen",base:5}],x:-480,y:-2688}),new G({id:"razor_barb",name:"Razor Barb",courage:8,weight:7,permanent:!0,effects:[{effect:"retaliate",base:15}],x:-0,y:-5344}),new G({id:"lemon",name:"Lemon",courage:8,weight:2,permanent:!0,effects:[{effect:"lemonade",base:1}],x:-0,y:-4096}),new G({id:"spiked_punch",name:"Spiked Punch",courage:8,weight:2,effects:[{effect:"lemonade",amount:1,turns:-1}],actions:[{action:"addCard",value:1,what:"junk",to:"drawCards"}],trigger:{counter:0,when:"turns",at:4,per:"combat",once:!1,activated:!1},x:-64,y:-4256}),new G({id:"pricket",name:"Pricket",courage:8,weight:7,permanent:!0,effects:[{effect:"spikes",base:18}],x:-448,y:-3392}),new G({id:"sifter",name:"Sifter",courage:6,weight:8,permanent:!1,abilities:[{ability:"sift",baseTurns:-1,enabled:!0,permanent:!0}],x:-192,y:-1632}),new G({id:"library_card",name:"Library Card",courage:6,weight:2,permanent:!1,abilities:[{ability:"expirex",baseTurns:-1,enabled:!0,permanent:!0}],x:-64,y:-384}),new G({id:"amulet",name:"Amulet",weight:1,descOverride:"Each turn, when you play at least as many cards as your maximum speed, gain protection for 1 turn.",abilities:[{ability:"protection",turns:1,enabled:!0}],trigger:{counter:0,when:"cardsPlayed",at:-1,per:"turn",once:!1,activated:!1},x:-224,y:-10498}),new G({id:"sparkling_fragment",name:"Sparkling Fragment",courage:6,weight:6,permanent:!0,actions:[{action:"stat",what:"sparkle",key:"current",value:5}],x:-192,y:-896}),new G({id:"shimmering_fragment",name:"Shimmering Fragment",courage:6,weight:6,permanent:!0,actions:[{action:"stat",what:"shimmer",key:"current",value:5}],x:-192,y:-1024}),new G({id:"radiating_fragment",name:"Radiating Fragment",courage:6,weight:6,permanent:!0,actions:[{action:"stat",what:"aura",key:"current",value:5}],x:-192,y:-992}),new G({id:"pewter_mug",name:"Pewter Mug",courage:5,permanent:!0,actions:[{action:"stat",what:"courage",value:7}],x:-320,y:-192}),new G({id:"torch",name:"Torch",tier:1,permanent:!0,actions:[{action:"stat",what:"mana",key:"current",value:2}],trigger:{counter:0,when:"turns",at:3,per:"combat",once:!1,activated:!1},x:-0,y:-320}),new G({id:"candlestick",name:"Candlestick",permanent:!0,actions:[{action:"stat",what:"speed",key:"current",value:2}],trigger:{counter:0,when:"cardsPlayed",at:10,per:"combat",once:!1,activated:!1},x:-64,y:-320}),new G({id:"frozen_knife",name:"Frozen Knife",tier:1,permanent:!0,actions:[{action:"addCard",value:10,what:"fleeting_slash",to:"handCards"}],trigger:{counter:0,when:"turns",at:4,per:"combat",once:!1,activated:!1},x:-448,y:-9856}),new G({id:"vibrating_shiv",name:"Vibrating Shiv",tier:1,permanent:!0,actions:[{action:"addCard",value:1,what:"lingering_slash",to:"handCards"}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-352,y:-9856}),new G({id:"glowing_sludge",name:"Glowing Sludge",courage:10,weight:3,permanent:!0,effects:[{effect:"irradiate",base:10}],x:-256,y:-5472}),new G({id:"pile_o_coins",name:"Pile o Coins",courage:10,permanent:!0,abilities:[{ability:"guild_member",baseTurns:-1,enabled:!0,permanent:!0}],x:-384,y:-192}),new G({id:"ancient_runestone",name:"Ancient Runestone",courage:12,tier:2,weight:3,permanent:!0,effects:[{effect:"wield",base:1}],x:-416,y:-14816}),new G({id:"awl_of_the_master",name:"Awl of the Master",courage:12,tier:2,weight:3,permanent:!0,effects:[{effect:"craft",base:4}],x:-384,y:-544}),new G({id:"excalibur",name:"Excalibur",courage:10,tier:2,weight:4,permanent:!0,effects:[{effect:"might",base:5}],x:-96,y:-9792}),new G({id:"alatyr",name:"Alatyr",courage:10,tier:2,weight:4,permanent:!0,effects:[{effect:"vigor",base:.5}],x:-96,y:-14976}),new G({id:"snowball",name:"Snowball",courage:13,tier:2,weight:3,permanent:!0,effects:[{effect:"momentum",base:2}],x:-320,y:-5600}),new G({id:"hidden_relic",name:"Hidden Relic",courage:11,tier:2,weight:4,effects:[{effect:"vex",amount:3,turns:-1}],x:-320,y:-766}),new G({id:"black_vial",name:"Black Vial",courage:15,tier:2,weight:3,effects:[{effect:"fatality",amount:1.1,turns:1,persist:!0}],trigger:{counter:0,when:"turns",at:4,per:"combat",once:!0,activated:!1},x:-384,y:-4064}),new G({id:"enigma_scroll",name:"Enigma Scroll",courage:12,tier:2,weight:2,permanent:!0,effects:[{effect:"mystery",base:1}],x:-448,y:-352}),new G({id:"prisma",name:"Prisma",courage:10,tier:2,weight:4,permanent:!0,actions:[{action:"stat",what:"rainbow",key:"base",value:12}],x:-64,y:-10048}),new G({id:"dark_rift",name:"Dark Rift",courage:13,tier:2,weight:3,abilities:[{ability:"unreachable",turns:1,enabled:!0}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!0,activated:!1},x:-384,y:-5728}),new G({id:"time_potion",name:"Time Potion",courage:11,tier:2,weight:4,permanent:!1,abilities:[{ability:"prepared",baseTurns:-1,enabled:!0,permanent:!0}],x:-128,y:-2336}),new G({id:"bracelet",name:"Bracelet",courage:13,tier:2,weight:3,permanent:!1,abilities:[{ability:"bless",baseTurns:-1,enabled:!0,permanent:!0}],x:-480,y:-15488}),new G({id:"locket",name:"Locket",courage:10,tier:2,actions:[{action:"draw",value:2}],trigger:{counter:0,when:"attackCardsPlayed",at:3,per:"turn",once:!1,activated:!1},x:-0,y:-13056}),new G({id:"pendant",name:"Pendant",weight:4,effects:[{effect:"might",amount:4,turns:-1,persist:!1}],trigger:{counter:0,when:"attackCardsPlayed",at:3,per:"turn",once:!1,activated:!1},x:-320,y:-14944}),new G({id:"medallion",name:"Medallion",tier:2,weight:4,effects:[{effect:"solid",amount:4,turns:-1,persist:!1}],trigger:{counter:0,when:"toolCardsPlayed",at:3,per:"turn",once:!1,activated:!1},x:-192,y:-14880}),new G({id:"ornamental_staff",name:"Ornamental Staff",tier:2,weight:4,effects:[{effect:"conjure",amount:6,turns:-1,persist:!1}],trigger:{counter:0,when:"magicCardsPlayed",at:3,per:"turn",once:!1,activated:!1},x:-480,y:-9822}),new G({id:"greased_cogwheel",name:"Greased Cogwheel",courage:12,tier:2,weight:3,actions:[{action:"stat",what:"mana",key:"current",value:2},{action:"draw",value:2}],trigger:{counter:0,when:"toolCardsPlayed",at:10,per:"combat",once:!1,activated:!1},x:-32,y:-0}),new G({id:"hammerblade",name:"Hammerblade",courage:12,tier:2,weight:2,effects:[{effect:"punch",amount:.75,turns:2,persist:!0}],trigger:{counter:0,when:"attackCardsPlayed",at:10,per:"combat",once:!1,activated:!1},x:-128,y:-10016}),new G({id:"storm_staff",name:"Storm Staff",courage:12,tier:2,weight:2,effects:[{effect:"sorcery",amount:.75,turns:2,persist:!0}],trigger:{counter:0,when:"magicCardsPlayed",at:10,per:"combat",once:!1,activated:!1},x:-288,y:-9792}),new G({id:"mark_of_narfallow",name:"Mark of Narfallow",courage:12,tier:2,weight:2,effects:[{effect:"craft",amount:6,turns:-1,persist:!1}],trigger:{counter:0,when:"toolCardsPlayed",at:10,per:"combat",once:!1,activated:!1},x:-384,y:-14880}),new G({id:"unending_hourglass",name:"Unending Hourglass",courage:13,tier:2,weight:3,abilities:[{ability:"hypnotize",turns:1,enabled:!0}],trigger:{counter:0,when:"turns",at:5,per:"combat",once:!0,activated:!1},x:-162,y:-544}),new G({id:"bronze_helm",name:"Bronze Helm",courage:13,tier:2,weight:4,abilities:[{ability:"tank",turns:2,enabled:!0}],trigger:{counter:0,when:"turns",at:2,per:"combat",once:!0,activated:!1},x:-32,y:-13794}),new G({id:"strongbox",name:"Strongbox",courage:13,tier:2,weight:4,abilities:[{ability:"stockpile",turns:2,enabled:!0}],trigger:{counter:0,when:"turns",at:4,per:"combat",once:!0,activated:!1},x:-192,y:-418}),new G({id:"charged_wand",name:"Charged Wand",courage:10,tier:2,weight:4,permanent:!0,effects:[{effect:"lightning",base:5}],x:-128,y:-10112}),new G({id:"charged_gauntlet",name:"Charged Gauntlet",weight:4,effects:[{effect:"lightning",amount:4,turns:-1,persist:!1}],trigger:{counter:0,when:"magicCardsPlayed",at:3,per:"turn",once:!1,activated:!1},x:-354,y:-15520}),new G({id:"thunder_cloak",name:"Thunder Cloak",courage:12,tier:2,weight:2,effects:[{effect:"thunder",amount:.75,turns:2,persist:!0}],trigger:{counter:0,when:"magicCardsPlayed",at:10,per:"combat",once:!1,activated:!1},x:-480,y:-12352}),new G({id:"myriad_staff",name:"Myriad Staff",courage:15,tier:2,weight:1,actions:[{action:"addCard",value:1,what:"unstable_attack",to:"drawCards",permanent:!0}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!0,activated:!1},x:-32,y:-10208}),new G({id:"red_envelope",name:"Red Envelope",courage:13,weight:1,permanent:!0,effects:[{effect:"retain",base:1}],x:-480,y:-320}),new G({id:"magical_lantern",name:"Magical Lantern",courage:15,weight:2,permanent:!0,abilities:[{ability:"amplify",turns:-1,enabled:!0}],x:-320,y:-320}),new G({id:"hawthorn_staff",name:"Hawthorn Staff",courage:15,tier:3,weight:2,permanent:!0,actions:[{action:"stat",what:"courage",value:20},{action:"stat",what:"health",key:"max",value:5},{action:"stat",what:"health",key:"current",value:5}],x:-352,y:-10112}),new G({id:"hemlock_staff",name:"Hemlock Staff",courage:15,tier:3,weight:2,permanent:!0,actions:[{action:"stat",what:"courage",value:15},{action:"stat",what:"health",key:"max",value:15},{action:"stat",what:"health",key:"current",value:15}],x:-192,y:-9792}),new G({id:"hickory_staff",name:"Hickory Staff",courage:15,tier:3,weight:2,permanent:!0,actions:[{action:"stat",what:"courage",value:10},{action:"stat",what:"health",key:"max",value:25},{action:"stat",what:"health",key:"current",value:25}],x:-256,y:-9568}),new G({id:"falcon_feather",name:"Falcon Feather",courage:14,tier:3,weight:.8,permanent:!0,actions:[{action:"stat",what:"speed",key:"base",value:1},{action:"stat",what:"health",key:"current",value:-5},{action:"stat",what:"health",key:"max",value:-5}],x:-288,y:-2208}),new G({id:"hummingbird_feather",name:"Hummingbird Feather",courage:14,tier:3,weight:.8,permanent:!0,actions:[{action:"stat",what:"speed",key:"base",value:1},{action:"stat",what:"courage",value:-4}],x:-288,y:-2144}),new G({id:"swift_feather",name:"Swift Feather",courage:14,tier:3,weight:.8,permanent:!0,actions:[{action:"stat",what:"speed",key:"base",value:1},{action:"stat",what:"shimmer",key:"current",value:-1},{action:"stat",what:"sparkle",key:"current",value:-1},{action:"stat",what:"aura",key:"current",value:-1}],x:-288,y:-1888}),new G({id:"labrys_of_zeus",name:"Labrys of Zeus",courage:15,tier:3,weight:3,permanent:!0,effects:[{effect:"punch",base:.25}],x:-96,y:-10240}),new G({id:"philosopher_stone",name:"Philosopher Stone",courage:15,tier:3,weight:3,permanent:!0,effects:[{effect:"muster",base:6}],x:-480,y:-672}),new G({id:"crystalized_wand",name:"Crystalized Wand",courage:15,tier:3,weight:3,permanent:!0,effects:[{effect:"sorcery",base:.4}],x:-448,y:-10272}),new G({id:"signet_ring",name:"Signet Ring",courage:13,tier:3,weight:3,permanent:!0,effects:[{effect:"wisdom",base:4}],x:-416,y:-13088}),new G({id:"death_vial",name:"Death Vial",courage:15,tier:3,weight:2,effects:[{effect:"fatality",amount:1.2,turns:1,persist:!0}],trigger:{counter:0,when:"turns",at:3,per:"combat",once:!0,activated:!1},x:-192,y:-4032}),new G({id:"gold_leaf",name:"Gold Leaf",courage:13,tier:3,weight:3,actions:[{action:"ensharden",type:"random",select:3,from:"drawCards",random:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!0,activated:!1},x:-96,y:-2752}),new G({id:"thunder_blade",name:"Thunder Blade",courage:15,tier:3,weight:3,permanent:!0,effects:[{effect:"thunder",base:.25}],x:-128,y:-9824}),new G({id:"organic_shield",name:"Organic Shield",tier:3,weight:2,courage:15,permanent:!0,effects:[{effect:"stout",amount:2,turns:-1,persist:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-384,y:-14976}),new G({id:"organic_armor",name:"Organic Armor",tier:3,weight:2,courage:15,permanent:!0,effects:[{effect:"muster",amount:2,turns:-1,persist:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-480,y:-13440}),new G({id:"organic_staff",name:"Organic Staff",tier:3,weight:2,courage:15,permanent:!0,effects:[{effect:"summon",amount:2,turns:-1,persist:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-288,y:-10016}),new G({id:"luminous_crown",name:"Luminous Crown",courage:20,tier:4,weight:.5,permanent:!0,actions:[{action:"stat",what:"mana",key:"base",value:1}],x:-160,y:-14080}),new G({id:"resplendent_helm",name:"Resplendent Helm",courage:20,tier:4,weight:4,permanent:!0,effects:[{effect:"punch",base:.35}],x:-256,y:-14112}),new G({id:"majestic_headpiece",name:"Majestic Headpiece",courage:20,tier:4,weight:4,permanent:!0,effects:[{effect:"thunder",base:.35}],x:-448,y:-14048}),new G({id:"brilliant_tiara",name:"Brilliant Tiara",courage:20,tier:4,weight:5,permanent:!0,effects:[{effect:"might",base:9}],x:-384,y:-14144}),new G({id:"lavish_coronet",name:"Lavish Coronet",courage:20,tier:4,weight:5,permanent:!0,effects:[{effect:"lightning",base:9}],x:-256,y:-14080}),new G({id:"winged_cloak",name:"Winged Cloak",courage:20,tier:4,weight:.5,permanent:!0,actions:[{action:"stat",what:"speed",key:"base",value:1}],x:-192,y:-13120}),new G({id:"winged_mantle",name:"Winged Mantle",courage:20,tier:4,weight:6,permanent:!0,effects:[{effect:"solid",base:12}],x:-320,y:-13120}),new G({id:"winged_veil",name:"Winged Veil",courage:20,tier:4,weight:7,permanent:!0,effects:[{effect:"regen",base:6}],x:-96,y:-13088}),new G({id:"winged_shroud",name:"Winged Shroud",courage:20,tier:4,weight:4,permanent:!0,effects:[{effect:"momentum",base:4}],x:-160,y:-13088}),new G({id:"eternal_sword",name:"Eternal Sword",tier:4,weight:2,courage:20,permanent:!0,effects:[{effect:"might",amount:3,turns:-1,persist:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-0,y:-9856}),new G({id:"eternal_shield",name:"Eternal Shield",tier:4,weight:2,courage:20,permanent:!0,effects:[{effect:"solid",amount:4,turns:-1,persist:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-256,y:-14976}),new G({id:"eternal_staff",name:"Eternal Staff",tier:4,weight:2,courage:20,permanent:!0,effects:[{effect:"lightning",amount:3,turns:-1,persist:!1}],trigger:{counter:0,when:"turns",at:1,per:"combat",once:!1,activated:!1},x:-480,y:-10016}),new G({id:"artisanal_boots",name:"Artisanal Boots",courage:15,tier:3,weight:4,permanent:!0,owned:!0,actions:[{action:"stat",what:"speed",key:"base",value:1}],x:-32,y:-12704}),new G({id:"artisanal_chestplate",name:"Artisanal Chestplate",courage:15,tier:3,weight:4,permanent:!0,owned:!0,effects:[{effect:"solid",base:4}],x:-192,y:-12672}),new G({id:"artisanal_sword",name:"Artisanal Sword",courage:15,tier:3,weight:4,permanent:!0,owned:!0,effects:[{effect:"might",base:3}],x:-416,y:-8800}),new G({id:"artisanal_hat",name:"Artisanal Hat",courage:15,tier:3,weight:4,permanent:!0,owned:!0,effects:[{effect:"lightning",base:4}],x:-352,y:-12640})];new t;class L{constructor({id:e,name:a,desc:t,options:n,weight:r=5,seen:i=!1}){this.id=e,this.name=a,this.desc=t,this.options=n,this.weight=r,this.seen=i}}const A=[new L({id:"workshop",name:"Workshop",desc:"A myriad of tools adorn the walls and tables.",weight:1,options:[{id:"explore",name:"Explore",desc:"Sharpen your skills",options:[{id:"quickness",name:"Quickness",desc:"Gain 1 Speed"},{id:"strength",name:"Strength",desc:"Gain 2 Might"},{id:"thickness",name:"Thickness",desc:"Gain 3 Solid"},{id:"wizardry",name:"Wizardry",desc:"Gain 5 Lightning"},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"oracle",name:"Oracle",desc:"A powerful green light washes over you, beckoning you closer.",weight:5,options:[{id:"explore",name:"Inquire",options:[{id:"simplicity",name:"Simplicity",desc:"Remove a card"},{id:"metamorphosis",name:"Metamorphosis",desc:"Transform a card"},{id:"improvement",name:"Improvement",desc:"Ensharden a card"},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"alchemy_lab",name:"Alchemy Lab",desc:"There is a strange scent in the air. It is warm and fragrant.",weight:5,options:[{id:"transform",name:"Transmute",desc:"Transform up to 3 cards"},{id:"leave",name:"Leave"}]}),new L({id:"midnight_glade",name:"Midnight Glade",desc:"You come across a glad that is both dark and light at the same time.",weight:7,options:[{id:"sleep",name:"Sleep",desc:"Remove a card"},{id:"leave",name:"Leave"}]}),new L({id:"midnight_meadow",name:"Midnight Meadow",desc:"You come across a meadow that is both dark and light at the same time.",weight:7,options:[{id:"sleep",name:"Sleep",desc:"Remove a card"},{id:"leave",name:"Leave"}]}),new L({id:"challenge",name:"Challenge!",desc:"You hear a distant call to pick up arms and challenge an unseen opponent. Who will win?",weight:7,options:[{id:"meet_challenge",name:"Meet Challenge",desc:"75% chance to gain 3 courage coins, 25% chance to lose 3 health",options:[{id:"rematch",name:"Rematch!",desc:"50% chance to gain 5 courage coins, 50% chance to lose 5 health",options:[{id:"final_battle",name:"Final Battle",desc:"25% chance to gain 10 courage coins, 75% chance to lose 10 health"},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"deep_well",name:"Deep Well",desc:"It is so deep that you cannot see the bottom.",weight:5,options:[{id:"toss_a_coin_in",name:"Toss A Coin In",options:[{id:"wish_for_protection",name:"Wish For Protection",desc:"Gain 35 armor"},{id:"wish_for_healing",name:"Wish For Healing",desc:"Gain 25 health"},{id:"wish_for_long_life",name:"Wish For Long Life",desc:"Gain 10 max health"}]},{id:"leave",name:"Leave"}]}),new L({id:"library",name:"Library",desc:"There are so many to choose from. What will you take?",weight:2,options:[{id:"find_a_card",name:"Find A Card",desc:"Choose 1 of 20 random cards to add to your deck."},{id:"leave",name:"Leave"}]}),new L({id:"altar",name:"Altar",desc:"You wonder what god this altar was built for. The altar feels... expectant...",weight:3,options:[{id:"minor_sacrifice",name:"Minor Sacrifice",desc:"Lose 4 health and gain a random common treasure."},{id:"major_sacrifice",name:"Major Sacrifice",desc:"Lose 12 health and gain a random uncommon treasure."},{id:"ultimate_sacrifice",name:"Ultimate Sacrifice",desc:"Lose 21 health and gain a random rare treasure."},{id:"leave",name:"Leave"}]}),new L({id:"reliquary",name:"Reliquary",desc:"You enter a very old shop filled with wondrous treasures of various rarities.",weight:3,options:[{id:"old_relic",name:"Old Relic",desc:"Lose 2 max health and gain a random common treasure."},{id:"ancient_relic",name:"Ancient Relic",desc:"Lose 5 max health and gain a random uncommon treasure."},{id:"primeval_relic",name:"Primeval Relic",desc:"Lose 9 max health and gain a random rare treasure."},{id:"leave",name:"Leave"}]}),new L({id:"oratory",name:"Oratory",desc:"A consecrated space where you can improve yourself - at a cost.",weight:5,options:[{id:"pray",name:"Pray",desc:"Lose 15 health and gain 5 courage coins."},{id:"meditate",name:"Meditate",desc:"Lose 15 health and gain 3 shimmer."},{id:"fast",name:"Fast",desc:"Lose 15 health and gain 3 sparkle."},{id:"hold_vigil",name:"Hold Vigil",desc:"Lose 15 health and gain 3 aura."},{id:"worship",name:"Worship",desc:"Lose 15 health and gain 10 max health."},{id:"leave",name:"Leave"}]}),new L({id:"dark_sanctuary",name:"Dark Sanctuary",desc:"A mysterious space that offers protection - at a cost.",weight:4,options:[{id:"physical_blow",name:"Physical Blow",desc:"Lose 12 health and reduce aggro by 4."},{id:"mental_blow",name:"Mental Blow",desc:"Lose 5 max health and reduce aggro by 4."},{id:"spiritual_blow",name:"Spiritual Blow",desc:"Lose 4 courage coins and reduce aggro by 4."},{id:"leave",name:"Leave"}]}),new L({id:"bakery",name:"Bakery",desc:"Delicious confections for sale!",weight:6,options:[{id:"buy_1_candy",name:"Get 1 Candy",desc:"For free"},{id:"buy_2_candies",name:"Buy 2 Candies",desc:"For 1 courage coin"},{id:"buy_3_candies",name:"Buy 3 Candies",desc:"For 2 courage coins"},{id:"leave",name:"Leave"}]}),new L({id:"mossy_pedestal",name:"Mossy Pedestal",desc:"It looks ancient. Does it contain any secrets?",weight:1,options:[{id:"touch_the_pedestal",name:"Touch the pedestal",options:[{id:"attack",name:"Attack",desc:"Choose 1 of 3 rare attack cards"},{id:"tool",name:"Tool",desc:"Choose 1 of 3 rare tool cards"},{id:"ability",name:"Ability",desc:"Choose 1 of 3 rare ability cards"},{id:"magic",name:"Magic",desc:"Choose 1 of 3 rare magic cards"}]},{id:"leave",name:"Leave"}]}),new L({id:"three_trunks",name:"Three Trunks",desc:"You come upon three interesting tree trunks. They look dead. And yet, they feel alive.",weight:2,options:[{id:"small_trunk",name:"Small Trunk",desc:"100% to gain 1 courage coin"},{id:"medium_trunk",name:"Medium Trunk",desc:"66% to gain 4 courage coins"},{id:"large_trunk",name:"Large Trunk",desc:"33% to gain 9 courage coins"},{id:"leave",name:"Leave"}]}),new L({id:"leap_of_faith",name:"Leap of Faith",desc:"The landing will sting, but there is a chance of profit.",weight:5,options:[{id:"leap1",name:"Leap",desc:"25% chance to gain a common treasure, lose 5 health",options:[{id:"leap2",name:"Leap Again",desc:"35% chance to gain a common treasure, lose 5 health",options:[{id:"leap3",name:"Leap Again",desc:"45% chance to gain a common treasure, lose 5 health",options:[{id:"leap4",name:"Leap Again",desc:"55% chance to gain a common treasure, lose 5 health",options:[{id:"leap5",name:"Leap Again",desc:"65% chance to gain a common treasure, lose 5 health",options:[{id:"leap6",name:"Leap Again",desc:"75% chance to gain a common treasure, lose 5 health",options:[{id:"leap7",name:"Leap Again",desc:"85% chance to gain a common treasure, lose 5 health",options:[{id:"leap8",name:"Leap Again",desc:"95% chance to gain a common treasure, lose 5 health",options:[{id:"leap9",name:"Leap Again",desc:"100% chance to gain a common treasure, lose 5 health"},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"stained_glass_mirror",name:"Stained Glass Mirror",desc:"How can a mirror be made of stained glass? Whatever the mechanism, it is extremely colorful...",weight:4,options:[{id:"peer_into_the_mirror",name:"Peer into the mirror",options:[{id:"see_color",name:"See Color",desc:"Increase rainbow base by 10"},{id:"see_depth",name:"See Depth",desc:"Increase rainbow base by 5 and max by 5"},{id:"see_clarity",name:"See Clarity",desc:"Increase rainbow base by 5 and decrease rainbow max by 5"},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"singing_cavern",name:"Singing Cavern",desc:"It is pleasant so far. How deep do you want to go?",weight:6,options:[{id:"enter",name:"Enter",options:[{id:"look_around",name:"Look Around",desc:"Ensharden one chosen card"},{id:"go_deeper",name:"Go Deeper",desc:"Ensharden two chosen cards and lose 5 health"},{id:"fully_explore",name:"Fully Explore",desc:"Ensharden three chosen cards and lose 15 health"},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"lucky_spring",name:"Lucky Spring",desc:"Lady luck has shined on you. Do you drink from the blue waters of the spring?",weight:6,options:[{id:"drink_a_draught",name:"Drink a Draught",desc:"Ensharden two random cards"},{id:"leave",name:"Leave"}]}),new L({id:"labyrinth",name:"Labyrinth",desc:"You wonder if this labyrinth contains a minotaur... or worse.",weight:2,options:[{id:"enter",name:"Enter",options:[{id:"straight",name:"Go Straight",options:[{id:"straight1",name:"Go Straight",options:[{id:"straight11",name:"Go Straight",options:[{id:"straight111",name:"Go Straight",options:[{id:"straight1111",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1111",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1111",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left111",name:"Go Left",options:[{id:"straight1112",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1112",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1112",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right111",name:"Go Right",options:[{id:"straight1113",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1113",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1113",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left11",name:"Go Left",options:[{id:"straight112",name:"Go Straight",options:[{id:"straight1121",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1121",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1121",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left112",name:"Go Left",options:[{id:"straight1122",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1122",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1122",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right112",name:"Go Right",options:[{id:"straight1123",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1123",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1123",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right11",name:"Go Right",options:[{id:"straight113",name:"Go Straight",options:[{id:"straight1131",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1131",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1131",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left113",name:"Go Left",options:[{id:"straight1132",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1132",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1132",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right113",name:"Go Right",options:[{id:"straight1133",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1133",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1133",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left1",name:"Go Left",options:[{id:"straight12",name:"Go Straight",options:[{id:"straight121",name:"Go Straight",options:[{id:"straight1211",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1211",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1211",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left121",name:"Go Left",options:[{id:"straight1212",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1212",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1212",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right121",name:"Go Right",options:[{id:"straight1213",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1213",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1213",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left12",name:"Go Left",options:[{id:"straight122",name:"Go Straight",options:[{id:"straight1221",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1221",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1221",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left122",name:"Go Left",options:[{id:"straight1222",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1222",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1222",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right122",name:"Go Right",options:[{id:"straight1223",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1223",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1223",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right12",name:"Go Right",options:[{id:"straight123",name:"Go Straight",options:[{id:"straight1231",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1231",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1231",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left123",name:"Go Left",options:[{id:"straight1232",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1232",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1232",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right123",name:"Go Right",options:[{id:"straight1233",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1233",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1233",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right1",name:"Go Right",options:[{id:"straight13",name:"Go Straight",options:[{id:"straight131",name:"Go Straight",options:[{id:"straight1311",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1311",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1311",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left131",name:"Go Left",options:[{id:"straight1312",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1312",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1312",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right131",name:"Go Right",options:[{id:"straight1313",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1313",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1313",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left13",name:"Go Left",options:[{id:"straight132",name:"Go Straight",options:[{id:"straight1321",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1321",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1321",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left132",name:"Go Left",options:[{id:"straight1322",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1322",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1322",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right132",name:"Go Right",options:[{id:"straight1323",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1323",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1323",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right13",name:"Go Right",options:[{id:"straight133",name:"Go Straight",options:[{id:"straight1331",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1331",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1331",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left133",name:"Go Left",options:[{id:"straight1332",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1332",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1332",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right133",name:"Go Right",options:[{id:"straight1333",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left1333",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right1333",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left",name:"Go Left",options:[{id:"straight2",name:"Go Straight",options:[{id:"straight21",name:"Go Straight",options:[{id:"straight211",name:"Go Straight",options:[{id:"straight2111",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2111",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2111",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left211",name:"Go Left",options:[{id:"straight2112",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2112",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2112",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right211",name:"Go Right",options:[{id:"straight2113",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2113",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2113",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left21",name:"Go Left",options:[{id:"straight212",name:"Go Straight",options:[{id:"straight2121",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2121",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2121",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left212",name:"Go Left",options:[{id:"straight2122",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2122",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2122",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right212",name:"Go Right",options:[{id:"straight2123",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2123",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2123",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right21",name:"Go Right",options:[{id:"straight213",name:"Go Straight",options:[{id:"straight2131",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2131",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2131",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left213",name:"Go Left",options:[{id:"straight2132",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2132",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2132",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right213",name:"Go Right",options:[{id:"straight2133",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2133",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2133",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left2",name:"Go Left",options:[{id:"straight22",name:"Go Straight",options:[{id:"straight221",name:"Go Straight",options:[{id:"straight2211",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2211",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2211",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left221",name:"Go Left",options:[{id:"straight2212",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2212",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2212",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right221",name:"Go Right",options:[{id:"straight2213",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2213",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2213",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left22",name:"Go Left",options:[{id:"straight222",name:"Go Straight",options:[{id:"straight2221",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2221",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2221",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left222",name:"Go Left",options:[{id:"straight2222",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2222",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2222",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right222",name:"Go Right",options:[{id:"straight2223",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2223",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2223",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right22",name:"Go Right",options:[{id:"straight223",name:"Go Straight",options:[{id:"straight2231",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2231",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2231",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left223",name:"Go Left",options:[{id:"straight2232",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2232",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2232",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right223",name:"Go Right",options:[{id:"straight2233",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2233",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2233",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right2",name:"Go Right",options:[{id:"straight23",name:"Go Straight",options:[{id:"straight231",name:"Go Straight",options:[{id:"straight2311",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2311",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2311",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left231",name:"Go Left",options:[{id:"straight2312",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2312",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2312",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right231",name:"Go Right",options:[{id:"straight2313",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2313",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2313",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left23",name:"Go Left",options:[{id:"straight232",name:"Go Straight",options:[{id:"straight2321",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2321",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2321",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left232",name:"Go Left",options:[{id:"straight2322",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2322",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2322",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right232",name:"Go Right",options:[{id:"straight2323",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2323",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2323",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right23",name:"Go Right",options:[{id:"straight233",name:"Go Straight",options:[{id:"straight2331",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2331",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2331",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left233",name:"Go Left",options:[{id:"straight2332",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2332",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2332",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right233",name:"Go Right",options:[{id:"straight2333",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left2333",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right2333",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right",name:"Go Right",options:[{id:"straight3",name:"Go Straight",options:[{id:"straight31",name:"Go Straight",options:[{id:"straight311",name:"Go Straight",options:[{id:"straight3111",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3111",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3111",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left311",name:"Go Left",options:[{id:"straight3112",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3112",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3112",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right311",name:"Go Right",options:[{id:"straight3113",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3113",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3113",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left31",name:"Go Left",options:[{id:"straight312",name:"Go Straight",options:[{id:"straight3121",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3121",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3121",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left312",name:"Go Left",options:[{id:"straight3122",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3122",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3122",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right312",name:"Go Right",options:[{id:"straight3123",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3123",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3123",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right31",name:"Go Right",options:[{id:"straight313",name:"Go Straight",options:[{id:"straight3131",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3131",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3131",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left313",name:"Go Left",options:[{id:"straight3132",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3132",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3132",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right313",name:"Go Right",options:[{id:"straight3133",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3133",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3133",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left3",name:"Go Left",options:[{id:"straight32",name:"Go Straight",options:[{id:"straight321",name:"Go Straight",options:[{id:"straight3211",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3211",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3211",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left321",name:"Go Left",options:[{id:"straight3212",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3212",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3212",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right321",name:"Go Right",options:[{id:"straight3213",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3213",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3213",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left32",name:"Go Left",options:[{id:"straight322",name:"Go Straight",options:[{id:"straight3221",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3221",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3221",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left322",name:"Go Left",options:[{id:"straight3222",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3222",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3222",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right322",name:"Go Right",options:[{id:"straight3223",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3223",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3223",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right32",name:"Go Right",options:[{id:"straight323",name:"Go Straight",options:[{id:"straight3231",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3231",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3231",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left323",name:"Go Left",options:[{id:"straight3232",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3232",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3232",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right323",name:"Go Right",options:[{id:"straight3233",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3233",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3233",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right3",name:"Go Right",options:[{id:"straight33",name:"Go Straight",options:[{id:"straight331",name:"Go Straight",options:[{id:"straight3311",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3311",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3311",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left331",name:"Go Left",options:[{id:"straight3312",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3312",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3312",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right331",name:"Go Right",options:[{id:"straight3313",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3313",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3313",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"left33",name:"Go Left",options:[{id:"straight332",name:"Go Straight",options:[{id:"straight3321",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3321",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3321",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left332",name:"Go Left",options:[{id:"straight3322",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3322",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3322",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right332",name:"Go Right",options:[{id:"straight3323",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3323",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3323",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"right33",name:"Go Right",options:[{id:"straight333",name:"Go Straight",options:[{id:"straight3331",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3331",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3331",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"left333",name:"Go Left",options:[{id:"straight3332",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3332",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3332",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"right333",name:"Go Right",options:[{id:"straight3333",name:"Go Straight",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"left3333",name:"Go Left",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"right3333",name:"Go Right",options:[{id:"leave",name:"You find nothing and exit"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]},{id:"leave",name:"Leave"}]}),new L({id:"sudden_trap",name:"Sudden Trap",desc:"The walls close in and there is nowhere to go. But a mysterious figure offers a hand, for a price.",weight:6,options:[{id:"buy_your_way_out",name:"Buy your way out",desc:"Pay 1 courage coin"}]}),new L({id:"the_liar",name:"The Liar",desc:"She tells you she will give you a gift and you quickly accept. Probably too quickly.",weight:5,options:[{id:"lose_1_shimmer",name:"Lose 1 Shimmer"},{id:"lose_1_sparkle",name:"Lose 1 Sparkle"},{id:"lose_1_aura",name:"Lose 1 Aura"}]}),new L({id:"briar_patch",name:"Briar Patch",desc:"How shall you navigate this bramble thicket?",weight:5,options:[{id:"run_through",name:"Run Through",desc:"Lose 3 max health"},{id:"take_your_time",name:"Take Your Time",desc:"Lose 9 health"}]}),new L({id:"market_of_arms",name:"Market of Arms",desc:"You come across a hooded figure offering a special item in exchange for hauling away some of his junk.",weight:2,options:[{id:"accept_offer",name:"Accept Offer",desc:"Receive a random weapon and 2 clutter"},{id:"reject_offer",name:"Reject Offer"}]})],B=new t;let D=function(){let e=100;return{version:"0.52 Alpha",seed:!1,difficulty:"medium",floor:0,combat:0,round:0,map:1,mapType:"normal",overworld:"forest",boosterPack:"basic",arenasComplete:0,arenasRequired:2,fountainChance:1.4,questChance:1.6,treasureChance:0,candyChance:50,shardChance:0,uncommonChance:10,rareChance:0,legendaryChance:0,critChance:0,attackCardsPlayed:0,cardsDrawn:0,highestDmgRoll:0,incomingDamage:0,toDiscard:0,toDestroy:0,destroyOptional:!1,toPick:0,toResurrect:0,combinedAge:0,toPile:"",toExclude:[],toShow:[],toTransmute:[],fromPile:"",autoplay:!1,currentQuest:void 0,combatEndedFlag:!0,courageTreasureAmount:5,courageCandyAmount:5,courageCardAmount:2,courageInterval:5,removeCardCost:2,tradeCardCost:1,tradeExpired:!1,candySlots:3,cardRewardNumber:3,essenceThresholds:[10,19,29,40],aggroThresholds:[10,15,19,22,25,28,31,33,36,39],aggroThresholds2:[6,11,15,18,21,24,27,30,33,36,39],currentMonsters:[],targetedMonster:{},previousMonsters:[],previousArena:[],monsterGroup:1,animationGap:e,animationDelay:500,animationDmg:100,debug:!1,dev:!1,scenario:"normal",scenarioWhich:"normal",libraryBuilt:!1,armoryBuilt:!1,playsounds:!0,playmusic:!0,tutorial:!1,essences:o,effects:d,abilities:l,actions:c,startingOptions:i,boosterPacks:s,dmgAnimations:async function(a){let t=30*r.randDecimal(),n=20*r.randDecimal(),i=10*r.randDecimal();i=r.chance(50)?i*=-1:i;let s=$('<span style="top:'+n+";left:"+t+"px;transform:rotate("+i+'deg)">'+a.data+"</span>");await function(e,a){return a.data<0&&e.css("color","red"),new Promise((t=>{e.appendTo(a.to).promise(),e.css("scale","2").promise(),e.animate({top:"-100px"}).promise().done((function(){t()}))}))}(s,a),await r.wait(e),s.css("scale",".1"),s.css("opacity","0").promise(),s.css("transform","translateY(-100px)").delay(3e3).promise().done((function(){s.remove()}))},blkAnimations:async function(a){let t=$('<span style="top:0;left:90px;">'+a.data+"</span>");await function(e,a){return new Promise((t=>{e.appendTo(a.to).promise(),$(a.to).closest(".monster").addClass("damaged"),$(a.to).closest(".player-panel").addClass("damaged"),e.css("scale","2").promise().done((function(){t()}))}))}(t,a),await r.wait(e),t.css("opacity","0").delay(300).promise().done((function(){$(".monster, .player-panel").removeClass("damaged"),t.css("opacity","0").delay(2800).promise().done((function(){t.remove()}))}))},statusAnimations:async function(a){let t=$("<span>"+a.data+"</span>");a.hex&&t.addClass("hex"),await function(e,a){return new Promise((t=>{e.appendTo(a.to).promise(),e.css("scale","2").promise().done((function(){t()}))}))}(t,a),await r.wait(e),t.css("scale",".8"),t.css("opacity","0").promise(),t.css("transform","translateY(-30px)").delay(3500).promise().done((function(){t.css("opacity","0").delay(500).promise().done((function(){t.remove()}))}))},rainbowAnimations:async function(e){let a=e>100?100:e,t=player.rainbow.max*(a/100);t=Math.round(t);let n=1.8*a;$(".magic-rainbow").addClass("activated"),$(".magic-rainbow .semi-circle--mask").css("transform","rotate("+n+"deg) translate3d(0, 0, 0)"),$(".magic-rainbow .rainbow-power-current").html(t),$(".magic-rainbow .rainbow-power-max").html(player.rainbow.max),$(".magic-rainbow").attr("data-type",player.rainbow.type),$(".magic-rainbow").removeClass("dark elemental rainbow chaos").addClass(player.rainbow.type),$(".magic-rainbow .magic-type span").html(player.rainbow.type),$(".magic-rainbow .magic-type span").attr("data-type",player.rainbow.type)},message:function(e,a=".debug-inner"){e="<span>"+e+"</span>",this.debug&&$(a).append(e)}}}();window.game=D;let M=function(){let e=window.game;return{clickTile:function(e){$(".map-inner div").removeClass("clickable current");const a=e.addClass("current visited"),t=a.index(),n=a.hasClass("odd-row"),r=a.hasClass("even-row"),i=a.hasClass("first-row"),s=a.hasClass("last-row"),o=a.hasClass("first-col"),d=a.hasClass("last-col"),l=n?11:10,c=n?8:9;i||(n||!d?n&&o?a.siblings().eq(t-l+1).addClass("clickable"):(a.siblings().eq(t-l+1).addClass("clickable"),a.siblings().eq(t-l).addClass("clickable")):r&&a.siblings().eq(t-l).addClass("clickable")),s||(n||!d?n&&o?a.siblings().eq(t+c+1).addClass("clickable"):(a.siblings().eq(t+c+1).addClass("clickable"),a.siblings().eq(t+c).addClass("clickable")):r&&a.siblings().eq(t+c).addClass("clickable")),o||a.prev().addClass("clickable"),d||a.next().addClass("clickable")},buildMap:function(){$(".tile").removeClass("gate ice-gate fire-gate arena fountain quest shimmer sparkle aura current visited clickable marked").attr("data-powertip","").attr("data-essence","").attr("data-amount","").data("amount","").data("essence","").data("powertip",""),$(".tile:first-child").addClass("clickable"),$(".start-arrow").show();let a=0,t=Math.round(100*m.randDecimal()),n=Math.round(100*m.randDecimal()),r=Math.round(100*m.randDecimal()),i=Math.round(100*m.randDecimal()),s=Math.round(100*m.randDecimal()),o=[1,2,3,11,12,21,22],d=[1,2,3,4,11,12,13,21,22,23,31,32],l=[1,2,3,4,5,11,12,13,14,21,22,23,24,31,32,33,41,42,43],c=0,u=0,h=[20,40,60,80],g=[92,94,96,98],p=m.randArrayIndex(h),f=m.randArrayIndex(g);for(;l.indexOf(t)>=0;)t=Math.round(100*m.randDecimal());for(;l.indexOf(n)>=0;)n=Math.round(100*m.randDecimal());for(;l.indexOf(r)>=0;)r=Math.round(100*m.randDecimal());for(;l.indexOf(i)>=0;)i=Math.round(100*m.randDecimal());for(;l.indexOf(s)>=0;)s=Math.round(100*m.randDecimal());$(".tile div").each((function(l){a++;let y=e.arenasRequired-e.arenasComplete,w=1===y?"":"s";if(a==h[p])$(this).html('<span class="icon"></span>'),$(this).parent().addClass("gate ice-gate"),$(this).parent().attr("data-powertip",'Ice Gate: LOCKED (<span class="highlight">'+y+"</span> arena"+w+" required)").data("powertip",'Ice Gate: LOCKED (<span class="highlight">'+y+"</span> arena"+w+" required)");else if(a==g[f])$(this).html('<span class="icon"></span>'),$(this).parent().addClass("gate fire-gate"),$(this).parent().attr("data-powertip",'Fire Gate: LOCKED (<span class="highlight">'+y+"</span> arena"+w+" required)").data("powertip",'Fire Gate: LOCKED (<span class="highlight">'+y+"</span> arena"+w+" required)");else if(a==t|a==n||a==r||a==i||a==s)$(this).html('<span class="icon"></span>'),$(this).parent().addClass("arena"),$(this).parent().attr("data-powertip","Arena Battle").data("powertip","Arena Battle");else if(c+=e.fountainChance,m.chance(c)&&o.indexOf(a)<0)$(this).html('<span class="icon"></span>'),$(this).parent().addClass("fountain"),$(this).parent().attr("data-powertip","Magic Fountain").data("powertip","Magic Fountain"),c=0;else if(u+=e.questChance,m.chance(u)&&d.indexOf(a)<0)$(this).html('<span class="icon"></span>'),$(this).parent().addClass("quest"),$(this).parent().attr("data-powertip","Quest").data("powertip","Quest"),u=0;else{let a=m.randFromArray(e.essences),t="<span class='"+a+"' style='text-transform:capitalize'>"+a+"</span> Essence Combat";$(this).html('<span class="icon"></span>'),$(this).parent().attr("data-essence",a).data("essence",a),$(this).parent().attr("data-amount",1).data("amount",1),$(this).parent().attr("data-powertip",t).data("powertip",t),$(this).parent().addClass(a)}}))}}}(),T=p().player;window.player=T;const Y=function(){let e=g,a=window.game;function t(e){let a="";return a+='<div class="monster-intent"></div>',a+='<div class="monster-name">'+e.name+"</div>",a}async function n(e,a){await u.appendMonster(e,a),r(e)}function r(e){(void 0===e.health.current||!1===e.health.current||""===e.health.current||isNaN(parseFloat(e.health.current)))&&(e.health.current=1);let a=u.getStatPercentage(e.health.current,e.health.max),t=u.getStatPercentage(e.armor,e.health.current);$(".monster[data-guid="+e.guid+"] .monster-armor").html("armor: "+e.armor),$(".monster[data-guid="+e.guid+"] .health-amount").css("width",a+"%"),$(".monster[data-guid="+e.guid+"] .armor-amount").css("width",t+"%"),$(".monster[data-guid="+e.guid+"] .health-number").html(e.health.current),$(".monster[data-guid="+e.guid+"] .armor-number").html(e.armor),$(".monster[data-guid="+e.guid+"] .block-number").html(e.block),0==e.block?($(".monster[data-guid="+e.guid+"] .monster-health .block-amount").removeClass("shown"),$(".monster[data-guid="+e.guid+"] .monster-health").removeClass("blocked")):($(".monster[data-guid="+e.guid+"] .monster-health .block-amount").addClass("shown"),$(".monster[data-guid="+e.guid+"] .monster-health").addClass("blocked"))}function i(r,i=0,d="normal",h=[],g="forest",p=!1,f=!1,y=!1){let w,b;f?b=e.filter((e=>e.id==f)):(b=e.filter((e=>e.tier==r&&e.category==d&&e.context==g)),b=b.filter((e=>!h.filter((a=>a.id===e.id)).length)),p&&(b=e.filter((e=>e.breed==p&&e.context==g))));let v=JSON.parse(JSON.stringify(b));if(w=u.randFromArray(v),null!=w)return a.previousMonsters.push(w),"boss"==d&&a.previousArena.push(w),w.health.current=w.health.base,w.guid=u.randString(),"ghost"==y&&(w.breed="ghost"),s(w),o(w),w.statsDom=t(w),w.effectsDom=l(w),w.abilitiesDom=c(w),w.actionsDom=m(w),n(w,i),w}function s(e){for(let t=0;t<a.effects.length;t++)(("punch"==a.effects[t].id||"sorcery"==a.effects[t].id||"thunder"==a.effects[t].id)&&1==e[a.effects[t].id].current||"punch"!=a.effects[t].id&&"sorcery"!=a.effects[t].id&&"thunder"!=a.effects[t].id&&0==e[a.effects[t].id].current)&&(e[a.effects[t].id].current=e[a.effects[t].id].base),e[a.effects[t].id].persist=!1}function o(e){for(let t=0;t<a.abilities.length;t++)(0==e[a.abilities[t].id].turns||1==e[a.abilities[t].id].persist&&e[a.abilities[t].id].turns<0||0==e[a.abilities[t].id].persist)&&(null!=e[a.abilities[t].id].baseTurn&&(e[a.abilities[t].id].turns=e[a.abilities[t].id].baseTurns),0==e[a.abilities[t].id].turns&&(e[a.abilities[t].id].enabled=!1)),e[a.abilities[t].id].persist=!1}function d(e=!1){if(e)e.statsDom=t(e),e.effectsDom=l(e),e.abilitiesDom=c(e),e.actionsDom=m(e),$(".player-panel .status-bar").html(e.effectsDom+e.abilitiesDom+e.actionsDom);else for(let e=0;e<a.currentMonsters.length;e++){let n=a.currentMonsters[e];n.statsDom=t(n),n.effectsDom=l(n),n.abilitiesDom=c(n),n.actionsDom=m(n),$(".monster[data-guid="+n.guid+"] .status-bar").html(n.effectsDom+n.abilitiesDom+n.actionsDom)}u.setTooltips(".status-bar")}function l(e){let t="";"ghost"==e.breed&&(t+="<div class='single-status tooltip' style='background-position:-482px -6624px;' data-id='ghost' data-powertip='Ghost'></div>");for(let n=0;n<a.effects.length;n++)if("speed"!=a.effects[n].id&&"mana"!=a.effects[n].id&&"rainbow"!=a.effects[n].id)if(("punch"==a.effects[n].id||"sorcery"==a.effects[n].id||"thunder"==a.effects[n].id)&&1==e[a.effects[n].id].current||"punch"!=a.effects[n].id&&"sorcery"!=a.effects[n].id&&"thunder"!=a.effects[n].id&&0==e[a.effects[n].id].current);else{let r=e[a.effects[n].id].turns>0?'<span class="turns">'+e[a.effects[n].id].turns+"</span>":"",i=e[a.effects[n].id].current;"punch"!=a.effects[n].id&&"sorcery"!=a.effects[n].id&&"resistance"!=a.effects[n].id&&"thunder"!=a.effects[n].id||(i=Math.round(100*(i+Number.EPSILON)),"resistance"==a.effects[n].id&&i>100&&(i=100),i+="%");let s='<span class="amount">'+i+"</span>",o="";"momentum"==a.effects[n].id&&(o='<span class="counter">'+e.momentumAmount+"</span>"),"antimomentum"==a.effects[n].id&&(o='<span class="counter">'+e.antimomentumAmount+"</span>");let d=null!=a.effects[n].x?a.effects[n].x:"",l=null!=a.effects[n].y?a.effects[n].y:"",c='<span class="amount '+a.effects[n].id+'" data-amount="'+e[a.effects[n].id].current+'">'+i+'</span> <span class="highlight">'+a.effects[n].name+":</span> "+a.effects[n].desc;t+="<div class='single-status status-effect tooltip' style='background-position:"+d+"px "+l+"px;' data-id='"+a.effects[n].id+"' data-powertip='"+c+"'>"+r+s+o+"</div>"}return t}function c(e){let t="";for(let n=0;n<a.abilities.length;n++)if(e[a.abilities[n].id].enabled){let r=null!=a.abilities[n].x?a.abilities[n].x:"",i=null!=a.abilities[n].y?a.abilities[n].y:"",s='<span class="highlight">'+a.abilities[n].name+":</span> "+a.abilities[n].desc,o=e[a.abilities[n].id].turns>0?'<span class="turns">'+e[a.abilities[n].id].turns+"</span>":"",d="";"resurrect"==a.abilities[n].id&&(d='<span class="counter">'+a.toResurrect+"</span>"),t+="<div class='single-status status-ability tooltip' style='background-position:"+r+"px "+i+"px;' data-id='"+a.abilities[n].id+"' data-powertip='"+s+"'>"+o+d+"</div>"}return t}function m(e){let t="";for(let n=0;n<e.actions.length;n++){let e=l.actions[n].action,r=a.actions.find((a=>a.id===e)),i=r.name,s=r.desc,o=l.actions[n].what,d=l.actions[n].value,l=l.actions[n].to;o=null!=o?" ("+o+")":"",d=null!=d?" +"+d:"",s='<span class="highlight">'+i+":</span> "+s+o+d,t+='<div class="single-status status-action tooltip" style="background-position:'+(null!=a.actions[n].x?a.actions[n].x:"")+"px "+(null!=a.actions[n].y?a.actions[n].y:"")+'px;" data-id="'+a.actions[n].id+'" data-powertip="'+s+'"></div>'}return t}return{monsters:e,dead:function(e){return void 0===e||!(0!=e.health.current&&!e.dead)&&(e.dead=!0,!0)},dying:function(e){return 0==e.health.current&&!e.dead&&(e.dead=!0,!0)},allDead:function(){return!($(".monster:not(.dead):not(.ghost)").length>0)},buildStatsDom:t,buildEffectsDom:l,buildAbilitiesDom:c,buildActionsDom:m,addMonsterToDom:n,updateMonsterStats:r,updateStatusBar:d,summonMonster:function(e,t,n){a.currentMonsters.filter((e=>0==e.dead));let r=i(!1,t,!1,!1,!1,!1,e,n);a.currentMonsters.push(r)},loadMonsters:function(){let e=[],t=a.previousMonsters,n=a.overworld;if(a.previousMonsters=[],"arena"==a.mapType){if(1==a.map)for(let t=0;t<1;t++){let n=i(5,t,"boss",a.previousArena);e.push(n)}else for(let t=0;t<1;t++){let n=i(5,t,"boss",a.previousArena);e.push(n)}a.previousArena=[]}else if("fire_gate"==a.mapType)if(1==a.map)for(let a=0;a<1;a++){let t=i(6,a,"fire_guardian");e.push(t)}else for(let a=0;a<1;a++){let t=i(6,a,"fire_guardian",[],n);e.push(t)}else if("ice_gate"==a.mapType)if(1==a.map)for(let a=0;a<1;a++){let t=i(6,a,"ice_guardian");e.push(t)}else for(let a=0;a<1;a++){let t=i(6,a,"ice_guardian",[],n);e.push(t)}else if("singularity"==a.mapType)for(let a=0;a<1;a++){let t=i(7,a,"singularity",[],"forest",!1,"singularity");e.push(t)}else switch(a.monsterGroup){case 1:if(1==a.map){let n=0,r=20,s=u.monsterNumChance(n,r),o=u.chance(s)?2:1;1!=a.floor&&2!=a.floor||(o=1);for(let a=0;a<o;a++){let n=i(1,a,"normal",t);e.push(n)}}else switch(a.floor){case 1:var r=u.chance(75)?2:1,s=u.chance(75)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","pixie");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"pixie");e.push(t)}break;case 2:r=u.chance(75)?3:2,s=u.chance(75)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","mummy");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"mummy");e.push(t)}break;case 3:r=u.chance(80)?2:1,s=u.chance(80)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","stone_walker");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"stone_walker");e.push(t)}}break;case 2:if(1==a.map){let n=i(2,a,"normal",t);e.push(n)}else switch(a.floor){case 4:r=u.chance(80)?2:1,s=u.chance(80)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","sludge");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"sludge");e.push(t)}break;case 5:r=u.chance(80)?2:1,s=u.chance(80)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","imp");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"imp");e.push(t)}break;case 6:r=u.chance(75)?2:1,s=u.chance(75)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","shatter");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"shatter");e.push(t)}}break;case 3:if(1==a.map){let n=i(1,a,"normal",t);e.push(n),n=i(2,a,"normal",t),e.push(n)}else switch(a.floor){case 7:r=u.chance(75)?2:1,s=u.chance(75)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","void_fairy");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"void_fairy");e.push(t)}break;case 8:u.chance(75),r=2,s=u.chance(75)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","enchantress");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"enchantress");e.push(t)}break;case 9:u.chance(80),r=2,s=u.chance(80)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","power_liche");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"power_liche");e.push(t)}}break;case 4:if(1==a.map){let n=i(3,a,"normal",t);e.push(n)}else switch(a.floor){case 10:u.chance(80),r=2,s=u.chance(80)?3:2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","iron_walker");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"iron_walker");e.push(t)}break;case 11:r=u.chance(75)?3:2,s=u.chance(75)?2:1;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","swarm");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"swarm");e.push(t)}break;case 12:r=u.chance(75)?3:2,s=u.chance(75)?2:1;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","sorcerer");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"sorcerer");e.push(t)}}break;case 5:if(1==a.map){let n=i(4,a,"normal",t);e.push(n)}else switch(a.floor){case 13:r=u.chance(50)?3:2,u.chance(75),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","fel_dragon");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"fel_dragon");e.push(t)}break;case 14:r=u.chance(50)?3:2,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","cunning_dragon");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"cunning_dragon");e.push(t)}break;case 15:r=u.chance(75)?3:2,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","cyberskull");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"cyberskull");e.push(t)}break;case 16:r=u.chance(75)?2:1,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","transfigurer");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"transfigurer");e.push(t)}}break;case 6:if(1==a.map){let n=i(4,a,"normal",t);e.push(n),n=i(2,a,"normal",t),e.push(n)}else switch(a.floor){case 17:u.chance(75),r=1,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","writhing_dragon");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"writhing_dragon");e.push(t)}break;case 18:u.chance(75),r=1,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","darkness_dragon");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"darkness_dragon");e.push(t)}break;case 19:u.chance(75),r=1,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","obsidian_walker");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"obsidian_walker");e.push(t)}break;case 20:u.chance(75),r=1,u.chance(80),s=2;for(let a=0;a<r;a++){let t=i(1,a,"normal",[],"forest","seething_entity");e.push(t)}for(let a=0;a<s;a++){let t=i(1,a,"normal",[],n,"seething_entity");e.push(t)}}break;case 7:if(1==a.map){let n=40,r=0,s=u.monsterNumChance(n,r);if(u.chance(s)){let n=i(4,a,"normal",t);e.push(n);for(let a=0;a<2;a++){let n=i(2,a,"normal",t);e.push(n)}}else{let n=i(4,a,"normal",t);e.push(n),n=i(3,a,"normal",t),e.push(n)}}else switch(a.floor){case 21:var o=i(1,a,"normal",[],n,"pixie");e.push(o),o=i(1,a,"normal",[],n,"shatter"),e.push(o),o=i(1,a,"normal",[],n,"swarm"),e.push(o),o=i(1,a,"normal",[],n,"seething_entity"),e.push(o);break;case 22:o=i(1,a,"normal",[],n,"mummy"),e.push(o),o=i(1,a,"normal",[],n,"power_liche"),e.push(o),o=i(1,a,"normal",[],n,"sorcerer"),e.push(o),o=i(1,a,"normal",[],n,"transfigurer"),e.push(o);break;case 23:o=i(1,a,"normal",[],n,"stone_walker"),e.push(o),o=i(1,a,"normal",[],n,"iron_walker"),e.push(o),o=i(1,a,"normal",[],n,"cunning_dragon"),e.push(o),o=i(1,a,"normal",[],n,"writhing_dragon"),e.push(o)}break;case 8:if(1==a.map){let a=40,n=0,r=u.monsterNumChance(a,n);if(u.chance(r))for(let a=0;a<2;a++){let n=i(4,a,"normal",t);e.push(n)}else for(let a=0;a<4;a++){let t=i(3,a,"normal");e.push(t)}}else switch(a.floor){case 24:o=i(1,a,"normal",[],n,"sludge"),e.push(o),o=i(1,a,"normal",[],n,"enchantress"),e.push(o),o=i(1,a,"normal",[],n,"fel_dragon"),e.push(o),o=i(1,a,"normal",[],n,"darkness_dragon"),e.push(o);break;case 25:o=i(1,a,"normal",[],n,"imp"),e.push(o),o=i(1,a,"normal",[],n,"void_fairy"),e.push(o),o=i(1,a,"normal",[],n,"cyberskull"),e.push(o),o=i(1,a,"normal",[],n,"obsidian_walker"),e.push(o);break;case 26:for(let a=0;a<3;a++){let t=i(1,a,"normal",[],n,"transfigurer");e.push(t)}}break;case 9:if(1==a.map){let n=40,r=0,s=u.monsterNumChance(n,r);if(u.chance(s))for(let a=0;a<5;a++){let t=i(3,a,"normal");e.push(t)}else{let n=i(4,a,"normal",t);e.push(n);for(let a=0;a<3;a++){let t=i(3,a,"normal");e.push(t)}}}else switch(a.floor){case 27:for(let a=0;a<3;a++){let t=i(1,a,"normal",[],n,"writhing_dragon");e.push(t)}break;case 28:for(let a=0;a<3;a++){let t=i(1,a,"normal",[],n,"darkness_dragon");e.push(t)}break;case 29:for(let a=0;a<3;a++){let t=i(1,a,"normal",[],n,"obsidian_walker");e.push(t)}}break;case 10:if(1==a.map){let n=40,r=0,s=u.monsterNumChance(n,r);if(u.chance(s)){for(let a=0;a<2;a++){let n=i(3,a,"normal",t);e.push(n)}for(let a=0;a<2;a++){let n=i(4,a,"normal",t);e.push(n)}}else{for(let a=0;a<2;a++){let n=i(4,a,"normal",t);e.push(n)}let n=i(3,a,"normal",t);e.push(n),n=i(2,a,"normal",t),e.push(n);for(let a=0;a<2;a++){let n=i(1,a,"normal",t);e.push(n)}}}else o=i(1,a,"normal",[],n,"fel_dragon"),e.push(o),o=i(1,a,"normal",[],n,"cunning_dragon"),e.push(o),o=i(1,a,"normal",[],n,"writhing_dragon"),e.push(o),o=i(1,a,"normal",[],n,"darkness_dragon"),e.push(o)}a.currentMonsters=e,d()},setEffects:s,setAbilities:o,updateMonsterGroup:function(){a.floor<4?a.monsterGroup=1:a.floor<7?a.monsterGroup=2:a.floor<10?a.monsterGroup=3:a.floor<13?a.monsterGroup=4:a.floor<17?a.monsterGroup=5:a.floor<21?a.monsterGroup=6:a.floor<24?a.monsterGroup=7:a.floor<27?a.monsterGroup=8:a.floor<30?a.monsterGroup=9:a.monsterGroup=10}}}(),P=b();let q=C(),F=function(){let e=window.game;function a(e){let a=!1;return e.drawCards.length>0&&(a=!0),a}function t(e,a){let t=!0,n=a?10:9;return e.handCards.length>n&&(t=!1),t}function n(e,a){for(let t=0;t<e.drawCards.length;t++){let n=w.getCardAttribute(e.drawCards[t],"natural"),r=!a.supernatural.enabled&&e.drawCards[t].drawn;if(n&&!r)return e.drawCards[t]}return!1}function r(a,t,n,r){let s=!1;s=w.getCardByGuid(n,t.chooseCards);let o=w.getCardAttribute(s,"retain")?" retained":"",d=$("body").hasClass("discarding")?" discardable":"";if(w.removeCardByGuid(s.guid),t.chooseCards=t.chooseCards.filter((e=>e.guid!==s.guid)),"handCards"==r)if(10==t.handCards.length)t.discardCards.push(s);else{t.handCards.push(s);let e=s.playable?"playable":"";w.appendCard(s,".player-cards",e+o+d)}else"deck"==r?C().addCard(n):null==s||""==s||null==s||0==s?alert("Failed to add card to combatDeck."+r):t[r].push(s);return i(a,t),e.playsounds&&v.play("selectCard"),s}function i(e,a){for(let t=0;t<a.handCards.length;t++){let n=w.getCardAttribute(a.handCards[t],"mana"),r=w.getDomCardByGuid(a.handCards[t].guid);n>e.mana.current?r.removeClass("playable"):a.handCards[t].playable&&r.addClass("playable")}}return{drawCards:[],handCards:[],discardCards:[],deadCards:[],chooseCards:[],transmutingCards:[],allLiveCards:function(e){return[...e.drawCards,...e.handCards,...e.discardCards]},allCards:function(e){return[...e.drawCards,...e.handCards,...e.discardCards,...e.deadCards]},sync:function(e,a){a.drawCards=[];for(let t=0;t<e.length;t++){e[t].mana=e[t].baseMana;let n=$.extend(!0,{},e[t]);a.drawCards.push(n)}a.handCards=[],a.discardCards=[],a.deadCards=[]},canDraw:a,shouldDraw:t,getNaturalCard:n,getOldestCard:function(e,a=""){let t=!1,n=-1;for(let r=0;r<e.length;r++)e[r].age>n&&e[r].id!=a.id&&(n=e[r].age,t=e[r]);return t},getOldestPlayableCard:function(e,a=""){let t=!1,n=-1;for(let r=0;r<e.length;r++)e[r].age>n&&e[r].id!=a.id&&e[r].playable&&(n=e[r].age,t=e[r]);return t},drawCard:function(e,r,s=!1,o=!1){if(!t(r,o))return!1;if(a(r)||function(e){e.drawCards=w.shuffle(e.discardCards),e.discardCards=[]}(r),a(r)){let a=!1;if(e.speed.current>0||1==s){let t=w.randArrayIndex(r.drawCards),i=n(r,e);a=i||r.drawCards[t],a.drawn=!0;let o=w.getCardAttribute(a,"retain")?" retained":"",d=a.playable?"playable":"",l=$("body").hasClass("destroying")?" destroyable":"",c=$("body").hasClass("discarding")?" discardable":"";r.handCards.length>10?r.discardCards.push(a):(r.handCards.push(a),w.appendCard(a,".player-cards",d+o+l+c),s||(e.speed.current-=1)),r.drawCards=r.drawCards.filter((e=>e.guid!==a.guid))}return 0!=e.speed.current&&10!=r.handCards.length||$(".draw-card, .draw-all").addClass("disabled"),i(e,r),a}},addDrawCard:function(a,t,n,r){let s=!1;s=w.getCardByGuid(n,t.drawCards);let o=w.getCardAttribute(s,"retain")?" retained":"";if(w.removeCardByGuid(s.guid),t.drawCards=t.drawCards.filter((e=>e.guid!==s.guid)),"handCards"==r)if(10==t.handCards.length)t.discardCards.push(s);else{t.handCards.push(s);let e=s.playable?"playable":"";w.appendCard(s,".player-cards",e+o)}else null==s||""==s||null==s||0==s?alert("Failed to add card to combatDeck."+r):t[r].push(s);return i(a,t),e.playsounds&&v.play("selectCard"),s},addDiscardCard:function(a,t,n,r){let s=!1;s=w.getCardByGuid(n,t.discardCards);let o=w.getCardAttribute(s,"retain")?" retained":"";if(w.removeCardByGuid(s.guid),t.discardCards=t.discardCards.filter((e=>e.guid!==s.guid)),"handCards"==r)if(10==t.handCards.length)t.discardCards.push(s);else{t.handCards.push(s);let e=s.playable?"playable":"";w.appendCard(s,".player-cards",e+o)}else null==s||""==s||null==s||0==s?alert("Failed to add card to combatDeck."+r):t[r].push(s);return i(a,t),e.playsounds&&v.play("selectCard"),s},addDeadCard:function(e,a,t,n){let r=!1;r=w.getCardByGuid(t,a.deadCards);let s=w.getCardAttribute(r,"retain")?" retained":"";if(w.removeCardByGuid(r.guid),a.deadCards=a.deadCards.filter((e=>e.guid!==r.guid)),"handCards"==n)if(10==a.handCards.length)a.discardCards.push(r);else{a.handCards.push(r);let e=r.playable?"playable":"";w.appendCard(r,".player-cards",e+s)}else null==r||""==r||null==r||0==r?alert("Failed to add card to combatDeck."+n):a[n].push(r);return i(e,a),r},addChooseCard:r,discardHand:function(a,t){for(let n=0;n<a.handCards.length;n++){let r=a.handCards[n],i=w.getCardAttribute(r,"retain"),s=w.getCardAttribute(r,"ephemeral");0==i&&0==r.tempRetain?(t.sift.enabled&&"clutter"==r.type&&(s=!0),s?(e.playsounds&&v.play("removeCard"),a.deadCards.push(r)):a.discardCards.push(r),a.handCards=a.handCards.filter((e=>e.guid!==r.guid)),w.removeCardByGuid(r.guid,"discarded"),n--):r.age+=1,r.tempRetain=!1}e.playsounds&&v.play("selectCard")},discardCard:function(a,t,n=!1){if(null==a)return;e.playsounds&&v.play("selectCard");let r=n?"played":"discarded";t.discardCards.push(a),t.handCards=t.handCards.filter((e=>e.guid!==a.guid)),w.removeCardByGuid(a.guid,r)},destroyHand:function(a){for(let e=0;e<a.handCards.length;e++){let t=a.handCards[e];a.deadCards.push(t),a.handCards=a.handCards.filter((e=>e.guid!==t.guid)),w.removeCardByGuid(t.guid,"destroyed"),e--}e.playsounds&&v.play("removeCard")},destroyCard:function(a,t,n=!1){null!=a&&(n||(e.playsounds&&v.play("removeCard"),t.deadCards.push(a)),t.handCards=t.handCards.filter((e=>e.guid!==a.guid)),w.removeCardByGuid(a.guid,"destroyed"))},transmuteCards:function(a,t,n){let i=!1;for(let s=0;s<e.toTransmute.length;s++){let o=b().getAddableCards().filter((a=>1==a.addable&&a.id!==e.toTransmute[s].id&&"legendary"!==a.tier)),d=w.randFromArray(o);d=$.extend(!0,{},d),d.guid=w.randString();let l=C().buildDescription(d);d.desc=l;let c=C().buildSlotsDescription(d);d.slotDesc=c,e.toShow.push(d),a.chooseCards.push(d),"allCards"==e.fromPile?(t.cards.push(d),n.cardsOwned+=1,i=!0):(r(n,a,d.guid,e.fromPile),"handCards"==e.fromPile?a.handCards=a.handCards.filter((a=>a.guid!==e.toTransmute[s].guid)):"drawCards"==e.fromPile?a.drawCards=a.drawCards.filter((a=>a.guid!==e.toTransmute[s].guid)):"discardCards"==e.fromPile&&(a.discardCards=a.discardCards.filter((a=>a.guid!==e.toTransmute[s].guid)))),w.removeCardByGuid(e.toTransmute[s].guid,"destroyed")}return a.chooseCards=[],C().showModifiedCards(a,n),e.playsounds&&v.play("transmuteCard"),i},activateCard:function(e,a){a.handCards=a.handCards.filter((a=>a.guid!==e.guid)),w.removeCardByGuid(e.guid,"played")},destroyExpiredCards:function(a){for(let t=0;t<a.handCards.length;t++){let n=a.handCards[t];0==w.getCardAttribute(n,"expire")&&(e.playsounds&&v.play("removeCard"),a.deadCards.push(n),a.handCards=a.handCards.filter((e=>e.guid!==n.guid)),w.removeCardByGuid(n.guid),t--)}for(let t=0;t<a.drawCards.length;t++){let n=a.drawCards[t];0==w.getCardAttribute(n,"expire")&&(e.playsounds&&v.play("removeCard"),a.deadCards.push(n),a.drawCards=a.drawCards.filter((e=>e.guid!==n.guid)),w.removeCardByGuid(n.guid,"destroyed"),t--)}for(let t=0;t<a.discardCards.length;t++){let n=a.discardCards[t];0==w.getCardAttribute(n,"expire")&&(e.playsounds&&v.play("removeCard"),a.deadCards.push(n),a.discardCards=a.discardCards.filter((e=>e.guid!==n.guid)),w.removeCardByGuid(n.guid),t--)}},incrementExpiredCards:function(e){for(let a=0;a<e.allLiveCards(e).length;a++){let t=e.allLiveCards(e)[a];w.getCardAttribute(t,"expire")>0&&(t.expire-=1)}},addCard:function(e,a,t,n,r=[],s=!1,o=!0,d={}){let l=b().cards.find((({id:a})=>a===e)),c=$.extend(!0,{},l);for(var m in c.guid=s||w.randString(),d)d.hasOwnProperty(m)&&(c[m]=d[m]);let u=C().buildDescription(c);c.desc=u;let h=C().buildSlotsDescription(c);if(c.slotDesc=h,r.length>0)for(let e=0;e<r.length;e++)C().attachShard(c,r[e]);let g=0==o?9:10;if("drawCards"==t)a[t].splice((a[t].length+1)*Math.random()|0,0,c);else{if("handCards"==t&&a.handCards.length>g)a.discardCards.push(c),$(".draw-card, .draw-all").addClass("disabled");else if(null==c||""==c||null==c||0==c)alert("Failed to add card to combatDeck."+t);else if(a[t].push(c),"handCards"==t){let e=w.getCardAttribute(c,"retain")?" retained":"",a=c.playable?"playable":"";a+=$("body").hasClass("discarding")?" discardable":"",w.appendCard(c,".player-cards",a+e)}"handCards"==t&&a.handCards.length>g&&$(".draw-card, .draw-all").addClass("disabled")}i(n,a),C().showModifiedCards(a,n,!0)},initCard:function(e,a={}){let t=$.extend(!0,{},e);for(var n in t.guid=w.randString(),a)a.hasOwnProperty(n)&&(t[n]=a[n]);let r=C().buildDescription(t);t.desc=r;let i=C().buildSlotsDescription(t);return t.slotDesc=i,t},updateCardPlayability:i}}(),I={treasures:R,shards:x,candies:S};window.treasures=I;let E={quests:A};window.quests=E;var O=B.music("overworld.mp3"),U=B.music("overworld-frost.mp3"),H=B.music("overworld-flame.mp3"),z=B.music("singularity.mp3"),W=B.music("fountain.mp3"),N=B.music("victory.wav"),j=B.music("loss.wav"),K=B.music("courage.wav"),V=B.music("arena.wav"),Q=B.music("ice-gate.wav"),J=B.music("fire-gate.wav"),X=[B.music("battle1.mp3"),B.music("battle2.mp3"),B.music("battle3.wav"),B.music("battle4.wav"),B.music("battle5.wav"),B.music("battle6.wav"),B.music("battle7.wav"),B.music("battle8.wav"),B.music("battle9.wav"),B.music("battle10.wav"),B.music("battle11.mp3"),B.music("battle12.mp3"),B.music("battle13.mp3"),B.music("battle14.wav"),B.music("battle15.wav"),B.music("battle16.mp3"),B.music("battle17.mp3"),B.music("battle18.mp3"),B.music("battle19.mp3"),B.music("battle20.mp3"),B.music("battle21.mp3"),B.music("battle22.mp3"),B.music("battle23.mp3")],Z=[B.music("quest1.wav"),B.music("quest2.wav"),B.music("quest3.wav"),B.music("quest4.mp3"),B.music("quest5.mp3"),B.music("quest6.mp3"),B.music("quest7.mp3")],ee=B.sound("soundsprite.mp3");function ae(){O.pause(),U.pause(),H.pause(),z.stop(),W.stop(),N.stop(),j.stop(),K.stop(),V.stop(),Q.stop(),J.stop();for(let e=0;e<X.length;e++)X[e].stop();for(let e=0;e<Z.length;e++)Z[e].stop()}function te(){console.clear(),D.debug&&$("body").addClass("debug"),D.tutorial&&($("body").addClass("tutorial"),$(".game-panel").removeClass("shown")),B.setInitialTooltips(),"easy"==D.difficulty?(D.questChance=2.2,D.fountainChance=2,D.arenasRequired=1,D.debug||(T.health.base=100,T.health.current=100,T.health.max=100)):"medium"==D.difficulty?(D.questChance=1.8,D.fountainChance=1.6,D.arenasRequired=2,D.debug||(T.health.base=75,T.health.current=75,T.health.max=75)):"hard"==D.difficulty?(D.questChance=1.8,D.fountainChance=1.6,D.arenasRequired=2,D.debug||(T.health.base=65,T.health.current=65,T.health.max=65)):"expert"==D.difficulty?(D.questChance=1.8,D.fountainChance=1.6,D.debug||(T.health.base=55,T.health.current=55,T.health.max=55)):"nightmare"==D.difficulty&&(D.questChance=1.5,D.fountainChance=1.3,D.arenasRequired=3,D.candyChance=0,D.debug||(T.health.base=55,T.health.current=55,T.health.max=55)),M.buildMap(),D.debug&&$(".map-inner div").addClass("clickable"),B.setTooltips(".map-inner"),B.setTooltips(".buttons-wrapper"),q.buildDeck(),B.appendStartingBonuses(),function(){let e=I.treasures.filter((e=>1==e.starting));if(e=B.shuffle(e),e.length>0)for(let a=0;a<3;a++){let t=e[a];t.desc=q.buildDescription(t),B.appendTreasure(t,".starting-treasures")}}(),B.appendBoosterPacks(),Y.setEffects(T),Y.setAbilities(T),Y.updateStatusBar(),Ee(),xe(),se()}function ne(){D.map=3,D.floor=0,D.debug&&$("body").addClass("debug"),"easy"!=D.difficulty&&"medium"!=D.difficulty||Fe(T,999),D.mapType="singularity",$(".gate-screen").removeClass("shown"),"normal"!=D.scenario&&ie(D.scenarioWhich),Ee(),se(),ve()}function re(){D.map=2,D.floor=0,T.aggro.current=0,T.aggro.level=0,D.debug&&$("body").addClass("debug"),"easy"!=D.difficulty&&"medium"!=D.difficulty||Fe(T,999),D.overworld="ice_gate"==D.mapType?"frost":"flame",O.stop(),"frost"==D.overworld?!U.playing()&&D.playmusic&&U.play():"flame"==D.overworld&&!H.playing()&&D.playmusic&&H.play(),$(".map > h2").html("The "+D.overworld.toUpperCase()+" World"),$(".gate-screen").removeClass("shown"),$("body").css("background-image","url(./images/map_"+D.mapType+".png"),M.buildMap(),D.arenasComplete=0,$(".tile.ice-gate").removeClass("clickable").data("powertip",'Ice Gate: LOCKED (<span class="highlight">'+D.arenasRequired+"</span> arenas required)").attr("data-powertip",'Ice Gate: LOCKED (<span class="highlight">'+D.arenasRequired+"</span> arenas required)"),$(".tile.fire-gate").removeClass("clickable").data("powertip",'Fire Gate: LOCKED (<span class="highlight">'+D.arenasRequired+"</span> arenas required)").attr("data-powertip",'Fire Gate: LOCKED (<span class="highlight">'+D.arenasRequired+"</span> arenas required)"),D.debug&&$(".map-inner div").addClass("clickable"),B.clearTooltips(),Ee(),"normal"!=D.scenario&&ie(D.scenarioWhich),se()}function ie(e="frozen_forest_combine"){switch(e){case"normal":q.buildDeck();break;case"frozen_forest_combine":Ke("gift_of_power"),Ke("pridwen"),Ke("amulet"),Ke("frozen_knife"),Ke("signet_ring"),Ke("talisman"),Ke("excalibur"),Ke("sifter"),Ke("hummingbird_feather"),Ke("lemon"),Ke("winged_shroud"),Ne("orange_gobstopper"),Ne("cherry_cordial"),Je("rainbow_orb"),Je("leather_armor"),Je("stun"),Je("razzle"),Je("self_enhance"),Je("unstable_attack"),Je("stomp"),Je("chaos_charge"),Je("tail_whip"),Je("repel"),Je("hammer_thrust"),Je("remember"),Je("cutting_ring"),Je("thwart"),Je("strange_mushroom"),Je("safeguard"),Je("delayed_charge"),Je("fleeting_shield"),Je("prescience"),Je("glowing_orb"),Je("mysterious_fissure"),Je("fire_spell"),Je("dazzle"),Je("mezmerize"),Je("adrenaline_rush"),q.attachShard(B.getCardById("stun",q.cards),"flame"),q.attachShard(B.getCardById("razzle",q.cards),"flame"),q.attachShard(B.getCardById("stomp",q.cards),"frost"),q.attachShard(B.getCardById("repel",q.cards),"frost"),q.attachShard(B.getCardById("repel",q.cards),"frost"),q.attachShard(B.getCardById("hammer_thrust",q.cards),"frost"),q.attachShard(B.getCardById("remember",q.cards),"frost"),q.attachShard(B.getCardById("cutting_ring",q.cards),"frost"),q.attachShard(B.getCardById("thwart",q.cards),"flame"),q.attachShard(B.getCardById("thwart",q.cards),"frost"),q.attachShard(B.getCardById("safeguard",q.cards),"flame"),q.attachShard(B.getCardById("delayed_charge",q.cards),"flame"),q.attachShard(B.getCardById("fleeting_shield",q.cards),"frost"),q.attachShard(B.getCardById("prescience",q.cards),"flame"),q.attachShard(B.getCardById("glowing_orb",q.cards),"frost"),q.attachShard(B.getCardById("mysterious_fissure",q.cards),"flame"),q.attachShard(B.getCardById("fire_spell",q.cards),"flame"),q.attachShard(B.getCardById("dazzle",q.cards),"flame"),q.attachShard(B.getCardById("mezmerize",q.cards),"flame"),q.attachShard(B.getCardById("mezmerize",q.cards),"flame"),xe("shimmer",14),xe("sparkle",15),xe("aura",10),Ie(9),D.candyChance=10,D.shardChance=45,D.critChance=16,D.highestDmgRoll=43,D.boosterPack="combine",D.uncommonChance=30,D.rareChance=5,D.legendaryChance=0,T.aggro.current=16,T.aggro.level=2,T.stance="sparkle";break;case"singularity_rainbow":Ke("gift_of_longevity"),Ke("frozen_knife"),Ke("awl_of_the_master"),Ke("torch"),Ke("magic_dust"),Ke("labrys_of_zeus"),Ke("hawthorn_staff"),Ke("alatyr"),Ke("shimmering_fragment"),Ke("swift_feather"),Ke("talisman"),Ke("winged_mantle"),Ke("gleaming_emerald"),Ke("pridwen"),Ke("vibrating_shiv"),Ke("hummingbird_feather"),Ke("falcon_feather"),Ke("luminous_crown"),Ne("white_truffle"),Ne("vanilla_pudding"),Je("rainbow_orb"),Je("shield"),Je("leather_armor"),Je("stun"),Je("sparks"),Je("remember"),Je("rainbow_charge"),Je("robustness"),Je("ambush"),Je("deter"),Je("rainbow_charm"),Je("safeguard"),Je("patience"),Je("hardened_feathers"),Je("amass"),Je("sudden_barrage"),Je("strange_tail"),Je("devastator"),Je("plate_armor"),Je("acuity"),Je("luminous_rainbow_spell"),Je("midas_touch"),Je("stamina"),Je("forbid"),Je("adrenaline_rush"),Je("deter"),Je("grow"),Je("secret_arts"),Je("overpowered"),Je("mystical_energy"),Je("attuned_barrier"),Je("weaponsmith"),Je("blazing_torch"),Je("prisma"),Je("bulwark"),Je("crippling_stare"),q.attachShard(B.getCardById("shield",q.cards),"frost"),q.attachShard(B.getCardById("stun",q.cards),"flame"),q.attachShard(B.getCardById("sparks",q.cards),"frost"),q.attachShard(B.getCardById("remember",q.cards),"frost"),q.attachShard(B.getCardById("remember",q.cards),"frost"),q.attachShard(B.getCardById("rainbow_charge",q.cards),"flame"),q.attachShard(B.getCardById("robustness",q.cards),"flame"),q.attachShard(B.getCardById("deter",q.cards),"frost"),q.attachShard(B.getCardById("deter",q.cards),"frost"),q.attachShard(B.getCardById("safeguard",q.cards),"flame"),q.attachShard(B.getCardById("patience",q.cards),"frost"),q.attachShard(B.getCardById("amass",q.cards),"frost"),q.attachShard(B.getCardById("amass",q.cards),"flame"),q.attachShard(B.getCardById("sudden_barrage",q.cards),"flame"),q.attachShard(B.getCardById("acuity",q.cards),"frost"),q.attachShard(B.getCardById("acuity",q.cards),"frost"),q.attachShard(B.getCardById("midas_touch",q.cards),"frost"),q.attachShard(B.getCardById("stamina",q.cards),"frost"),q.attachShard(B.getCardById("forbid",q.cards),"flame"),q.attachShard(B.getCardById("forbid",q.cards),"flame"),q.attachShard(B.getCardById("adrenaline_rush",q.cards),"flame"),q.attachShard(B.getCardById("mystical_energy",q.cards),"flame"),q.attachShard(B.getCardById("mystical_energy",q.cards),"flame"),q.attachShard(B.getCardById("attuned_barrier",q.cards),"flame"),q.attachShard(B.getCardById("attuned_barrier",q.cards),"flame"),q.attachShard(B.getCardById("bulwark",q.cards),"frost"),xe("shimmer",14),xe("sparkle",8),xe("aura",22),D.candyChance=40,D.shardChance=10,D.critChance=21,D.highestDmgRoll=142,D.boosterPack="rainbow",D.uncommonChance=50,D.rareChance=12,D.legendaryChance=0,D.overworld="frost",T.stance="aura",T.health.max=130,T.health.current=120,T.health.base=75,T.rainbow.max=35,T.rainbow.base=8,T.rainbow.current=8,T.armor=120,T.aggro.current=17,T.aggro.level=3;break;case"super_flame_combine":Ke("gift_of_strength"),Ke("hammerblade"),Ke("hickory_staff"),Ke("library_card"),Ke("falcon_feather"),Ke("hawthorn_staff"),Ke("pewter_mug"),Ke("hemlock_staff"),Ke("locket"),Ke("shimmering_fragment"),Ke("signet_ring"),Ke("pridwen"),Ke("winged_cloak"),Ke("hummingbird_feather"),Ke("death_vial"),Ke("black_cauldron"),Ne("orange_gobstopper"),Ne("pixie_sugar"),Ne("white_chocolate_chips"),Je("stun"),Je("self_enhance"),Je("burning_strike"),Je("hardened_feathers"),Je("clever_trick"),Je("plate_armor"),Je("dark_codex"),Je("divert"),Je("fissile"),Je("wing_sweep"),Je("provisioned_attack"),Je("guzzle"),Je("fissile"),Je("divert"),Je("ambush"),Je("fortress"),Je("fleeting_shelter"),Je("ultra_kill"),Je("masterwork"),Je("elude"),Je("thwart"),Je("divert"),Je("midas_touch"),Je("elude"),Je("overpowered"),Je("supernatural"),Je("colossus"),Je("sidestep"),Je("elude"),Je("sidestep"),Je("sidestep"),Je("trade_up"),Je("mystical_energy"),Je("firmament_mover"),q.attachShard(B.getCardById("stun",q.cards),"frost"),q.attachShard(B.getCardById("clever_trick",q.cards),"flame"),q.attachShard(B.getCardById("dark_codex",q.cards),"frost"),q.attachShard(B.getCardById("wing_sweep",q.cards),"frost"),q.attachShard(B.getCardById("wing_sweep",q.cards),"flame"),q.attachShard(B.getCardById("provisioned_attack",q.cards),"frost"),q.attachShard(B.getCardById("provisioned_attack",q.cards),"frost"),q.attachShard(B.getCardById("fortress",q.cards),"flame"),q.attachShard(B.getCardById("ultra_kill",q.cards),"frost"),q.attachShard(B.getCardById("ultra_kill",q.cards),"frost"),q.attachShard(B.getCardById("masterwork",q.cards),"flame"),q.attachShard(B.getCardById("thwart",q.cards),"frost"),q.attachShard(B.getCardById("thwart",q.cards),"flame"),q.attachShard(B.getCardById("midas_touch",q.cards),"flame"),q.attachShard(B.getCardById("overpowered",q.cards),"frost"),q.attachShard(B.getCardById("overpowered",q.cards),"flame"),q.attachShard(B.getCardById("colossus",q.cards),"flame"),q.attachShard(B.getCardById("trade_up",q.cards),"frost"),q.attachShard(B.getCardById("trade_up",q.cards),"flame"),xe("shimmer",10),xe("sparkle",7),xe("aura",24),Ie(4),D.candyChance=50,D.shardChance=20,D.critChance=4,D.highestDmgRoll=168,D.boosterPack="combine",D.uncommonChance=36,D.rareChance=14,D.legendaryChance=0,D.overworld="flame",T.stance="aura",T.health.max=151,T.health.current=151,T.health.base=75,T.rainbow.max=20,T.rainbow.base=0,T.rainbow.current=0,T.armor=150,T.aggro.current=11,T.aggro.level=2;break;case"frost_combine":Ke("gift_of_protection"),Ke("snakestone"),Ke("dew_of_yarva"),Ke("hummingbird_feather"),Ke("red_envelope"),Ke("charged_wand"),Ke("signet_ring"),Ke("hickory_staff"),Ne("vanilla_pudding"),Je("rainbow_orb"),Je("shield"),Je("leather_armor"),Je("stun"),Je("self_enhance"),Je("thwack"),Je("concuss"),Je("thwack"),Je("provisioned_attack"),Je("flash_of_magic"),Je("shimmer_stance"),Je("bravery"),Je("neigh"),Je("flash_of_magic"),Je("paralyzing_touch"),Je("rainbow_charm"),Je("delightful"),Je("thwart"),Je("dark_codex"),Je("aura_stance"),Je("sparkle_stance"),Je("blockade"),q.attachShard(B.getCardById("shield",q.cards),"frost"),q.attachShard(B.getCardById("stun",q.cards),"flame"),q.attachShard(B.getCardById("concuss",q.cards),"flame"),q.attachShard(B.getCardById("provisioned_attack",q.cards),"frost"),q.attachShard(B.getCardById("provisioned_attack",q.cards),"frost"),q.attachShard(B.getCardById("bravery",q.cards),"flame"),q.attachShard(B.getCardById("neigh",q.cards),"frost"),q.attachShard(B.getCardById("paralyzing_touch",q.cards),"flame"),q.attachShard(B.getCardById("paralyzing_touch",q.cards),"flame"),q.attachShard(B.getCardById("delightful",q.cards),"frost"),q.attachShard(B.getCardById("thwart",q.cards),"frost"),q.attachShard(B.getCardById("thwart",q.cards),"frost"),xe("shimmer",24),xe("sparkle",17),xe("aura",17),Ie(19),D.candyChance=40,D.shardChance=20,D.critChance=4,D.highestDmgRoll=66,D.boosterPack="combine",D.uncommonChance=50,D.rareChance=0,D.legendaryChance=0,D.overworld="forest",T.stance="shimmer",T.health.max=141,T.health.current=119,T.health.base=75,T.rainbow.max=20,T.rainbow.base=0,T.rainbow.current=0,T.armor=39,T.aggro.current=18,T.aggro.level=2;break;case"frost_cycle":Ke("gift_of_conjuring"),Ke("pridwen"),Ke("glowing_sludge"),Ke("ancient_runestone"),Ke("hickory_staff"),Ke("hemlock_staff"),Ne("peanut_butter_cup"),Ne("nut_clusters"),Je("shield"),Je("shield"),Je("leather_armor"),Je("stun"),Je("bottled_speed"),Je("tail_whip"),Je("quick_stab"),Je("elemental_charm"),Je("cleanse"),Je("divert"),Je("amass"),Je("glowing_orb"),Je("make_ready"),Je("delayed_charge"),Je("shimmer_stance"),Je("strange_mushroom"),Je("seeing_ring"),Je("strangefire"),Je("devastator"),Je("paralyzing_touch"),q.attachShard(B.getCardById("stun",q.cards),"frost"),q.attachShard(B.getCardById("cleanse",q.cards),"flame"),q.attachShard(B.getCardById("cleanse",q.cards),"frost"),q.attachShard(B.getCardById("amass",q.cards),"frost"),q.attachShard(B.getCardById("amass",q.cards),"flame"),q.attachShard(B.getCardById("make_ready",q.cards),"frost"),xe("shimmer",12),xe("sparkle",3),xe("aura",2),Ie(35),D.candyChance=60,D.shardChance=40,D.critChance=3,D.highestDmgRoll=60,D.boosterPack="cycle",D.uncommonChance=50,D.rareChance=0,D.legendaryChance=0,D.overworld="forest",T.stance="shimmer",T.health.max=125,T.health.current=123,T.health.base=75,T.rainbow.max=20,T.rainbow.base=0,T.rainbow.current=0,T.armor=63,T.aggro.current=18,T.aggro.level=2;break;case"super_frost_cycle":Ke("hemlock_staff"),Ke("gift_of_protection"),Ke("unending_hourglass"),Ke("red_envelope"),Ke("pewter_mug"),Ke("mark_of_narfallow"),Ke("bronze_helm"),Ke("sifter"),Ke("signet_ring"),Ke("excalibur"),Ke("falcon_feather"),Ke("swift_feather"),Ke("eternal_shield"),Ke("organic_staff"),Ke("hawthorn_staff"),Ke("ornamental_staff"),Ke("hickory_staff"),Ne("gumball"),Ne("candy_lemon_slice"),Ne("blueberry_gobstopper"),Je("stun"),Je("bottled_speed"),Je("plate_armor"),Je("tail_whip"),Je("tail_whip"),Je("strange_mushroom"),Je("auto_attack"),Je("recoil"),Je("clever_maneuver"),Je("blockade"),Je("target"),Je("repel"),Je("hardened_features"),Je("aura_stance"),Je("devastator"),Je("flywheel"),Je("remember"),Je("critical_hit"),Je("elite_maneuver"),Je("fractured_orb"),Je("robustness"),Je("cutting_ring"),Je("sparkle_stance"),Je("paralyzing_touch"),Je("whinny"),Je("sacrifice"),Je("entity"),Je("overpowered"),Je("reaper"),q.attachShard(B.getCardById("stun",q.cards),"frost"),q.attachShard(B.getCardById("tail_whip",q.cards),"flame"),q.attachShard(B.getCardById("tail_whip",q.cards),"flame"),q.attachShard(B.getCardById("auto_attack",q.cards),"frost"),q.attachShard(B.getCardById("recoil",q.cards),"flame"),q.attachShard(B.getCardById("clever_maneuver",q.cards),"flame"),q.attachShard(B.getCardById("blockade",q.cards),"frost"),q.attachShard(B.getCardById("blockade",q.cards),"frost"),q.attachShard(B.getCardById("target",q.cards),"frost"),q.attachShard(B.getCardById("repel",q.cards),"flame"),q.attachShard(B.getCardById("repel",q.cards),"flame"),q.attachShard(B.getCardById("devastator",q.cards),"frost"),q.attachShard(B.getCardById("devastator",q.cards),"frost"),q.attachShard(B.getCardById("remember",q.cards),"flame"),q.attachShard(B.getCardById("remember",q.cards),"flame"),q.attachShard(B.getCardById("critical_hit",q.cards),"flame"),q.attachShard(B.getCardById("elite_maneuver",q.cards),"frost"),q.attachShard(B.getCardById("cutting_ring",q.cards),"flame"),xe("shimmer",7),xe("sparkle",12),xe("aura",17),Ie(8),D.candyChance=20,D.shardChance=45,D.critChance=6,D.highestDmgRoll=93,D.boosterPack="cycle",D.uncommonChance=20,D.rareChance=18,D.legendaryChance=0,D.overworld="frost",T.stance="aura",T.health.max=135,T.health.current=120,T.health.base=75,T.rainbow.max=20,T.rainbow.base=0,T.rainbow.current=0,T.armor=97,T.aggro.current=16,T.aggro.level=3}}function se(e=!0){$(".status .map-type span").html(D.mapType),$(".status .momentumAmount span").html(T.momentumAmount);for(let e=0;e<D.effects.length;e++)$(".status ."+D.effects[e].id+" span").html("["+T[D.effects[e].id].temp.toString()+"] / "+T[D.effects[e].id].current+" / "+T[D.effects[e].id].base+" : "+T[D.effects[e].id].turns+" : "+T[D.effects[e].id].persist+" : "+T[D.effects[e].id].hexed);for(let e=0;e<D.abilities.length;e++)$(".status ."+D.abilities[e].id+" span").html(T[D.abilities[e].id].enabled+" : "+T[D.abilities[e].id].turns+" : "+T[D.effects[e].id].persist);Y.updateStatusBar(T),$(".draw-cards span").html(F.drawCards.length),$(".discard-cards span").html(F.discardCards.length),$(".dead-cards span").html(F.deadCards.length),$(".game-courage > span").html(T.courage),$(".booster-pack span").addClass(D.boosterPack+"-pack"),$(".booster-pack").data("powertip",'Selected Booster Pack: <span class="highlight">'+D.boosterPack.substr(0,1).toUpperCase()+D.boosterPack.substr(1)+"</span>. Click to view all booster pack cards.").attr("data-powertip",'Selected Booster Pack: <span class="highlight">'+D.boosterPack.substr(0,1).toUpperCase()+D.boosterPack.substr(1)+"</span>. Click to view all booster pack cards."),B.setTooltips(".booster-pack"),$(".game-floor span").html(D.floor),$(".game-round span").html(D.round),$(".all-cards span.counter").html(T.cardsOwned),$(".library span.counter").html(P.getTotalCards()),$(".incoming-damage span").html(D.incomingDamage);let a=B.getStatPercentage(T.health.current,T.health.max),t=B.getStatPercentage(T.armor,T.health.current);$(".player-health .health-amount").css("width",a+"%"),$(".player-health .armor-amount").css("width",t+"%"),$(".player-health .health-number").html(T.health.current),$(".player-health .max-health-number").html(T.health.max),$(".player-health .armor-number").html(T.armor),$(".player-health .block-number").html(T.block),$(".crit-bar .crit-bar-inner").css("width",D.critChance+"%"),$(".crit-bar .level").html(D.critChance+"%"),$(".mana span").html(T.mana.current+"/"+T.mana.base),$(".speed span").html(T.speed.current+"/"+T.speed.base),$(".stance .icon-stance").attr("data-stance",T.stance),$(".stance .icon-stance").data("powertip","<span class='highlight'>Stance:</span> <span class='"+T.stance+"'>"+T.stance+"</span>"),$(".highest-damage-roll span").html(D.highestDmgRoll),$(".treasure-chance span").html(D.treasureChance),$(".candy-chance span").html(D.candyChance),$(".shard-chance span").html(D.shardChance),$(".uncommon-chance span").html(D.uncommonChance),$(".rare-chance span").html(D.rareChance),0==T.block?($(".player-health .block-amount").removeClass("shown"),$(".player-health").removeClass("blocked")):($(".player-health .block-amount").addClass("shown"),$(".player-health").addClass("blocked")),e&&oe()}function oe(e="handCards",a=null){let t=F.handCards,n=$(".player-cards .card");"drawCards"==e?(t=F.drawCards,n=$(".draw-cards-panel .cards .card")):"discardCards"==e?(t=F.discardCards,n=$(".discard-cards-panel .cards .card")):"deadCards"==e?(t=F.deadCards,n=$(".dead-cards-panel .cards .card")):"chooseCards"==e?(t=a,n=$(".choose-cards-panel .cards .card")):"shardCards"==e?(t=a,n=$(".shard-cards-panel .cards .card")):"allCards"==e?(t=q.cards,n=$(".all-cards-panel .cards .card")):"packCards"==e?(t=a,n=$(".pack-cards-panel .cards .card")):"showCards"==e&&(t=a,n=$(".show-cards .card")),n.each((function(){de($(this),t)}))}function de(e,a){let t=e.data("guid"),n=B.getCardByGuid(t,a);if(null==n)return;e.find(".blk").each((function(e){let a=$(this).data("amount"),t=a+T.solid.current;t<0&&(t=0),n.age>0&&(1!=T.wisdom.current?t+=Math.round(n.age*T.wisdom.current):t+=n.age),$(this).html(t),$(this).attr("data-amount",t);let r="";t>a?r="better":t<a&&(r="worse"),$(this).addClass(r)})),e.find(".armor").each((function(e){let a=$(this).data("amount"),t=a+T.craft.current;t<0&&(t=0),n.age>0&&(1!=T.wisdom.current?t+=Math.round(n.age*T.wisdom.current):t+=n.age),$(this).html(t),$(this).attr("data-amount",t);let r="";t>a?r="better":t<a&&(r="worse"),$(this).addClass(r)})),e.find(".desc-dmg .dmg").each((function(e){let a=$(this).data("amount"),t=a;0!=T.might.current&&(a+=T.might.current),0!=T.momentumAmount&&(a+=T.momentumAmount);let r=D.combatEndedFlag?T.punch.base:T.punch.current;1!=r&&(a=Math.round(a*r)),n.age>0&&(1!=T.wisdom.current?a+=Math.round(n.age*T.wisdom.current):a+=n.age),a<0&&(a=0),$(this).html(a),$(this).attr("data-amount",a);let i=a>t?"better":"worse";a==t&&(i=""),$(this).addClass(i)})),e.find(".magic").each((function(e){let a=$(this).data("amount"),t=a;0!=T.conjure.current&&(a+=T.conjure.current);let r=D.combatEndedFlag?T.sorcery.base:T.sorcery.current;1!=r&&(a=Math.round(a*r)),n.age>0&&(1!=T.wisdom.current?a+=Math.round(n.age*T.wisdom.current):a+=n.age),a<0&&(a=0),$(this).html(a),$(this).attr("data-amount",a);let i=a>t?"better":"worse";a==t&&(i=""),$(this).addClass(i)})),e.find(".current-health-amount").each((function(e){let a=$(this).data("amount"),t=a+T.mend.current;n.age>0&&(1!=T.wisdom.current?t+=Math.round(n.age*T.wisdom.current):t+=n.age),$(this).html(t),$(this).attr("data-amount",t);let r="";t>a?r="better":t<a&&(r="worse"),$(this).addClass(r)}));let r=B.getCardAttribute(n,"use");e.find(".use").html(r);let i=B.getCardAttribute(n,"linger");e.find(".linger").html(i);let s=B.getCardAttribute(n,"expire");e.find(".expire").html(s);let o=B.getCardAttribute(n,"age");e.find(".age").html(o);let d=B.getCardAttribute(n,"mana"),l=B.getCardAttribute(n,"baseMana"),c=d<l?"better":"worse";d==l&&(c=""),e.find(".mana").html(d).addClass(c)}function le(){D.playsounds&&ee.play("viewCards"),Y.setEffects(T),Y.setAbilities(T),se(),$(".all-cards-panel").addClass("shown"),$(".all-cards-panel .cards").empty();for(let e=0;e<q.cards.length;e++)B.appendCard(q.cards[e],".all-cards-panel .cards");oe("allCards")}function ce(){if(!D.libraryBuilt){D.libraryBuilt=!0,$(".library-panel .cards, .library-treasures, .library-candies").empty();for(let e=0;e<I.candies.length;e++){let a=I.candies[e];a.desc=q.buildDescription(a),B.appendCandy(a,".library-candies",!1)}for(let e=0;e<I.treasures.length;e++){let a=I.treasures[e];a.desc=q.buildDescription(a),B.appendTreasure(a,".library-treasures")}P.buildLibrary()}}function me(){D.playsounds&&ee.play("viewCards"),$(".draw-cards-panel").addClass("shown"),$(".draw-cards-panel .cards").empty();for(let e=0;e<F.drawCards.length;e++)B.appendCard(F.drawCards[e],".draw-cards-panel .cards");oe("drawCards")}function ue(){D.playsounds&&ee.play("viewCards"),$(".discard-cards-panel").addClass("shown"),$(".discard-cards-panel .cards").empty();for(let e=0;e<F.discardCards.length;e++)B.appendCard(F.discardCards[e],".discard-cards-panel .cards");oe("discardCards")}function he(){D.playsounds&&ee.play("viewCards"),$(".dead-cards-panel").addClass("shown"),$(".dead-cards-panel .cards").empty();for(let e=0;e<F.deadCards.length;e++)B.appendCard(F.deadCards[e],".dead-cards-panel .cards");oe("deadCards")}function ge(e,a="pickable"){$(".choose-cards-panel").addClass("shown"),$(".choose-cards-panel .cards").empty();for(let a=0;a<e.length;a++)B.appendCard(e[a],".choose-cards-panel .cards");$(".choose-cards-panel .card").addClass(a),$(".choose-cards-panel .card").addClass(D.toPile),"deck"!=D.toPile&&oe("chooseCards",e)}function pe(e){D.playsounds&&ee.play("viewCards"),$(".pack-cards-panel").addClass("shown"),$(".pack-cards-panel h2").html("<span>"+e+"</span> booster pack cards");let a="Self Enhance";"rainbow"==e?a="Sparks":"cycle"==e&&(a="Bottled Speed"),$(".pack-cards-panel .message").html("These are all the possible card rewards for this booster pack, plus you start with <span></span>"),$(".pack-cards-panel .message span").html(a),$(".pack-cards-panel .cards").empty(),$(".pack-cards-panel .select").attr("data-pack",e);let t=b().getAddableCards(!1,!1,e);for(let e=0;e<t.length;e++){let a=q.buildDescription(t[e]);t[e].desc=a;let n=q.buildSlotsDescription(t[e]);t[e].slotDesc=n,B.appendCard(t[e],".pack-cards-panel .cards")}}function fe(){D.playsounds&&ee.play("viewCards"),$(".pack-cards-panel").addClass("shown"),$(".pack-cards-panel h2").html("All available cards"),$(".pack-cards-panel .cards").empty(),$(".pack-cards-panel .message").html("These are all the basic cards plus your selected booster pack cards.");let e=b().getAddableCards(!1,!1,!1);for(let a=0;a<e.length;a++){let t=q.buildDescription(e[a]);e[a].desc=t;let n=q.buildSlotsDescription(e[a]);e[a].slotDesc=n,B.appendCard(e[a],".pack-cards-panel .cards")}}function ye(){if(D.playsounds&&ee.play("viewCards"),$(".armory-panel").addClass("shown"),!D.armoryBuilt){D.armoryBuilt=!0;let e=b().getWeapons();for(let a=0;a<e.length;a++){let t=q.buildDescription(e[a]);e[a].desc=t;let n=q.buildSlotsDescription(e[a]);e[a].slotDesc=n,B.appendCard(e[a],".armory-panel .cards")}}}function we(e,a=q.cards){$(".shard-cards-panel").addClass("shown"),$(".draw-card, .end-turn, .draw-all").addClass("disabled"),$(".shard-cards-panel .cards").empty(),$(".shard-cards-panel").attr("data-shard",e),$(".shard-cards-panel h2 span").html(e),D.playsounds&&ee.play("clickShard");for(let e=0;e<a.length;e++)q.hasOpenSlot(a[e])&&B.appendCard(a[e],".shard-cards-panel .cards")}function be(){$(".trade-cards-panel .message").html("Choose a card to trade away."),$(".trade-cards-panel").addClass("shown"),$(".trade-cards-panel .cards").empty(),D.playsounds&&ee.play("viewCards");let e=q.getTradeableCards();for(let a=0;a<e.length;a++)B.appendCard(e[a],".trade-cards-panel .cards")}async function ve(e=!1){D.toShow=[],D.combatEndedFlag=!1,D.incomingDamage=0,D.floor+=1,D.combat+=1,D.round=0,ae();let a="./images/floor"+D.combat+".png";$("body").removeClass("arena ice_gate fire_gate selecting destroying retaining"),$(".start-arrow").hide(),$(".combat-text, .combat-text h2.begin-combat").addClass("shown"),$(".courage-amount, .aggro-amount").empty(),e?e.hasClass("arena")?(D.playsounds&&ee.play("aggroLevel"),D.mapType="arena",a="./images/arena"+(D.arenasComplete+1)+".png",$("body").addClass("arena"),D.arenasComplete+=1,setTimeout((function(){!V.playing()&&D.playmusic&&V.play()}),200)):e.hasClass("ice-gate")?(D.playsounds&&ee.play("aggroLevel"),D.mapType="ice_gate",a="./images/ice_gate.png",$("body").addClass("ige-gate"),setTimeout((function(){!Q.playing()&&D.playmusic&&Q.play()}),200)):e.hasClass("fire-gate")?(D.playsounds&&ee.play("aggroLevel"),D.mapType="fire_gate",a="./images/fire_gate.png",$("body").addClass("fire-gate"),setTimeout((function(){!J.playing()&&D.playmusic&&J.play()}),200)):(D.mapType="normal",setTimeout((function(){!X[D.floor%X.length].playing()&&D.playmusic&&X[D.floor%X.length].play()}),200)):"singularity"==D.mapType&&($("body").addClass("singularity"),D.mapType="singularity",a="./images/singularity.png",setTimeout((function(){!z.playing()&&D.playmusic&&z.play()}),200)),$(".monster-panel-wrapper").css("background-image","url("+a+")"),$(".message, .button-done").removeClass("shown"),$(".combat").addClass("shown"),$(".candy").removeClass("trashable").addClass("clickable"),$("body").addClass("combating"),$(".player-cards").removeClass("unavailable").empty(),$("body").removeClass("discarding"),$(".discard-done").removeClass("shown"),$(".card").removeClass("discard discardable"),$(".discard-message").removeClass("shown"),e&&(e.hasClass("visited")||await xe(e.attr("data-essence"),e.attr("data-amount")));for(let e=0;e<T.treasures.length;e++)T.treasures[e].trigger.counter<0&&0==T.treasures[e].permanent&&Qe(T.treasures[e]);Y.setEffects(T),Y.setAbilities(T),F.sync(q.cards,F),se(),Y.updateMonsterGroup(),Y.loadMonsters(),T.rainbow.current>=T.rainbow.max&&T.rainbow.max>0&&(await B.wait(1500),await Ba(T.rainbow.type,T),Aa(T));let t=B.getStatPercentage(T.rainbow.current,T.rainbow.max);$(".magic-rainbow .rainbow-power").css("width",t+"%"),$(".magic-rainbow .rainbow-power-current").html(T.rainbow.current),$(".magic-rainbow .rainbow-power-max").html(T.rainbow.max),$(".magic-rainbow").attr("data-type",T.rainbow.type),$(".magic-rainbow").removeClass("dark elemental rainbow chaos muddled").addClass(T.rainbow.type),$(".magic-rainbow .magic-type span").html(T.rainbow.type),$(".magic-rainbow .magic-type span").attr("data-type",T.rainbow.type),$(".magic-rainbow .semi-circle--mask").css("transform","rotate("+1.8*t+"deg) translate3d(0, 0, 0)").removeClass("activated"),await B.wait(1200),$(".combat-text .draw-cards-arrow").addClass("shown"),await B.wait(400),$(".combat-text h2.begin-combat").removeClass("shown"),await _e()}function Ce(e){ae(),!W.playing()&&D.playmusic&&W.play(),"expert"!=D.difficulty&&"nightmare"!=D.difficulty||(D.floor+=1,Ee(1)),D.mapType="fountain",e?($(".fountain-visited").addClass("shown"),$(".magic-fountain").addClass("shown"),$(".magic-fountain .fountain-options").removeClass("shown")):($(".fountain-visited").removeClass("shown"),$(".magic-fountain").addClass("shown"),$(".magic-fountain .fountain-options").addClass("shown"),se())}function ke(e=!1){ae(),setTimeout((function(){!Z[D.floor%Z.length].playing()&&D.playmusic&&Z[D.floor%Z.length].play()}),200),D.mapType="quest",$(".quest-screen").addClass("shown"),"expert"!=D.difficulty&&"nightmare"!=D.difficulty||(D.floor+=1,Ee(1));let a=E.quests.filter((e=>0==e.seen)),t=B.weightedRandom(a);if(e){$(".quest-options").empty(),$(".quest-screen h2").html("Deja Vu"),$(".quest-description").html("You swear you have seen this place before...");let e={id:"leave",name:"Leave"};B.appendOption(e,".quest-options",!1)}else if(null!=t){t.seen=!0,D.currentQuest=t,$(".quest-screen h2").html(t.name),$(".quest-description").html(t.desc);let e="./images/quest-"+t.id+".png";$(".quest-screen").css("background-image","url("+e+")"),$(".quest-options").empty();for(let e=0;e<t.options.length;e++)B.appendOption(t.options[e],".quest-options",t.id)}else{$(".quest-screen h2").html("..."),$(".quest-description").html("There is nothing left.");let e={id:"leave",name:"Leave"};B.appendOption(e,".quest-options",!1)}}async function xe(e,a){if(null==e)for(let e=0;e<D.essences.length;e++)B.updateEssencePercentage(D.essences[e]);else if(null!=e){let t=(a=parseFloat(a))>0?"+"+a:a;if(t&&D.statusAnimations({data:'<span class="essence-text '+e+'">'+t+"</span>",to:".essence-amount",hex:!1}),a<0)T[e].current+=a,await B.updateEssencePercentage(e);else for(let t=0;t<a;t++){D.playsounds&&ee.play(e+"Amount"),T[e].current+=1;let a=T[e].current;if(D.essenceThresholds.includes(a)&&T[e].level==D.essenceThresholds.indexOf(a)&&(T[e].level+=1,$(".essence-bar.sparkle span.level").html(T.sparkle.level),$(".essence-bar.shimmer span.level").html(T.shimmer.level),$(".essence-bar.aura span.level").html(T.aura.level),$(".essence-bar."+e).addClass("level-up"),await B.wait(1200),D.playsounds&&ee.play("essenceLevel"),$(".essence-bar."+e).removeClass("level-up"),D.essenceThresholds[0]==a)){q.addCard(e+"_stance"),F.addCard(e+"_stance",F,"drawCards",T);let a=B.getCardById(e+"_stance",q.cards);D.toShow.push(a),q.showModifiedCards(F,T,!0)}await B.updateEssencePercentage(e)}se()}$(".essence-bar.sparkle span.level").html(T.sparkle.level),$(".essence-bar.shimmer span.level").html(T.shimmer.level),$(".essence-bar.aura span.level").html(T.aura.level)}async function _e(){B.clearTooltips(),$(".combat-text, .combat-text h2.player-turn").addClass("shown"),oe("allCards"),D.round+=1,D.message("Begin player turn "+D.round),T.blk<0&&(T.blk=0),T.armor<0&&(T.armor=0),T.protection.enabled?T.block+=T.stout.current:T.block=T.stout.current,T.block<0&&(T.block=0),T.mana.current=T.mana.base;let e=0;if("aura"==T.stance?T.mana.current+=1:"sparkle"==T.stance||"shimmer"==T.stance&&(Da(1,T),Ra(10,T)),D.round>1&&(T.prepared.enabled&&D.cardsDrawn<=4&&(e=6-D.cardsDrawn),T.speed.current>0))if("none"==T.stance)Ra(4*T.speed.current,T);else if("aura"==T.stance)T.mana.current+=Math.round(T.speed.current*T.aura.level);else if("sparkle"==T.stance){let e=Math.round(T.speed.current*T.sparkle.level*3);e>0&&Te({effect:"might",amount:e,turns:1},T,1)}else"shimmer"==T.stance&&(Da(Math.floor(T.speed.current*T.shimmer.level),T),Ra(Math.floor(T.speed.current*T.shimmer.level*4),T));if(T.lemonade.current>0){let e=F.drawCards.filter((e=>"clutter"==e.type));Fe(T,e.length*T.lemonade.current),T.health.current>T.health.max&&(T.health.current=T.health.max)}if(T.regen.current>0&&(Fe(T,T.regen.current),T.regen.current-=1),T.summon.current>0&&La({type:T.rainbow.type,amount:T.summon.current},T),T.irradiate.current>0)for(let e=0;e<D.currentMonsters.length;e++)await Ya(T.irradiate.current,T,[D.currentMonsters[e]]),Y.updateMonsterStats(D.currentMonsters[e]);T.fatigued.current>0&&Te({effect:"might",amount:-T.fatigued.current,turns:-1,hex:!0},T),T.vulnerable.current>0&&Te({effect:"solid",amount:-T.vulnerable.current,turns:-1,hex:!0},T),T.stifled.current>0&&Te({effect:"conjure",amount:-T.stifled.current,turns:-1,hex:!0},T),T.speed.current=T.speed.base+e,D.cardsDrawn=0,Da(T.muster.current,T),F.updateCardPlayability(T,F),$(".card.retained:not(.unplayable").addClass("playable"),$(".card").removeClass("retain"),$(".draw-card, .draw-all").removeClass("disabled"),$(".crit").removeClass("shown"),Se("turns"),Ge(),ga(),Be(T,!1,!0),Ye(T,!1,!0),Y.updateStatusBar(),se(),await B.wait(1e3),$(".combat-text, .combat-text h2, .combat-text .draw-cards-arrow").removeClass("shown")}function Se(e){switch(e){case"turns":for(let e=0;e<T.treasures.length;e++){let a=T.treasures[e].trigger;a.counter>-1&&("turn"!=a.per||a.once?"turns"==a.when&&(a.counter+=1,a.counter==a.at&&(a.once&&!a.activated?Qe(T.treasures[e]):a.once||(Qe(T.treasures[e]),a.counter=0))):a.counter=0,$('.treasure[data-id="'+T.treasures[e].id+'"] span.counter').html(a.counter))}break;case"cardsPlayed":for(let e=0;e<T.treasures.length;e++){let a=T.treasures[e].trigger;if(a.counter>-1&&"cardsPlayed"==a.when){a.counter+=1;let t=-1==a.at?T.speed.base:a.at;a.counter==t&&(Qe(T.treasures[e]),a.counter=0),$('.treasure[data-id="'+T.treasures[e].id+'"] span.counter').html(a.counter)}}break;case"attackCardsPlayed":for(let e=0;e<T.treasures.length;e++){let a=T.treasures[e].trigger;a.counter>-1&&"attackCardsPlayed"==a.when&&(a.counter+=1,a.counter==a.at&&(Qe(T.treasures[e]),a.counter=0),$('.treasure[data-id="'+T.treasures[e].id+'"] span.counter').html(a.counter))}break;case"toolCardsPlayed":for(let e=0;e<T.treasures.length;e++){let a=T.treasures[e].trigger;a.counter>-1&&"toolCardsPlayed"==a.when&&(a.counter+=1,a.counter==a.at&&(Qe(T.treasures[e]),a.counter=0),$('.treasure[data-id="'+T.treasures[e].id+'"] span.counter').html(a.counter))}break;case"magicCardsPlayed":for(let e=0;e<T.treasures.length;e++){let a=T.treasures[e].trigger;a.counter>-1&&"magicCardsPlayed"==a.when&&(a.counter+=1,a.counter==a.at&&(Qe(T.treasures[e]),a.counter=0),$('.treasure[data-id="'+T.treasures[e].id+'"] span.counter').html(a.counter))}}}async function $e(e,a=null,t="handCards",n=!1,r=!1){let i=!1,s=!1;if(a&&(s=a.data("guid")),"draw"==e){if(!F.canDraw(F)&&T.wield.current>0){let e=T.rainbow.max-T.rainbow.current+(T.wield.current-1)*T.rainbow.max;La({type:T.rainbow.type,amount:e},T)}D.playsounds&&ee.play("drawCard"),i=F.drawCard(T,F,n,r)}else"drawCards"==e?i=F.addDrawCard(T,F,s,t):"discardCards"==e?i=F.addDiscardCard(T,F,s,t):"deadCards"==e?i=F.addDeadCard(T,F,s,t):"chooseCards"==e&&(i=F.addChooseCard(T,F,s,t));i&&await wa(i,!1,"draw"),i&&null!=B.getCardFromPile(i,F.handCards)&&de(B.getDomCardByGuid(i.guid),F.handCards),se(!1)}function Ge(){D.incomingDamage=0,Re("query")}async function Re(e="perform"){let a=D.currentMonsters.filter((e=>0==e.dead));if(T.hypnotize.enabled){let e=B.randFromArray(a);D.targetedMonster=e}else D.targetedMonster={};for(let n=0;n<a.length;n++){if(a[n].dead)continue;if(a[n].frozen.enabled)continue;let r="",i="",s=a[n];"perform"==e&&(s.resurrect.enabled&&Sa([{action:"summonMonster",what:"random",value:D.toResurrect,tier:[3,4,5]}],s),D.toResurrect=0,$(".monster[data-guid="+s.guid+"]").addClass("taking-turn"),s.protection.enabled?s.block+=s.stout.current:s.block=s.stout.current,Da(s.muster.current,s),s.regen.current>0&&(Fe(s,s.regen.current),s.regen.current-=1),Fe(s,s.heal.current),Be(s,!1,!0),Ye(s,!1,!0),Y.updateMonsterStats(s));let o=s.moveSet,d=Ae(o,s.pattern);s.chosenMoveSetIndex>-1&&(d=s.chosenMoveSetIndex);let l=o[d],c=l.dmg,m=l.blk,u=l.armor,h=l.effects,g=l.abilities,p=l.actions;for(var t in s.blk<0&&(s.blk=0),s.armor<0&&(s.armor=0),c)if(c.hasOwnProperty(t)){let a=c[t];if("expert"==D.difficulty&&(a+=2),"nightmare"==D.difficulty&&(a*=.2),"flame"==s.context&&(a+=(T.aggro.level/4+.5)*a),"ice_gate"!=D.mapType&&"fire_gate"!=D.mapType&&"arena"!=D.mapType||(a=(T.aggro.level/2+1)*a),"query"==e){let e=Math.round((a+s.might.current)*s.punch.current);e<0&&(e=0),D.incomingDamage+=e,r+='<span class="tooltip" data-powertip="Attack for '+e+' damage"><span class="intent-dmg intent-amount">'+e+'</span><span class="intent-dmg-icon intent-icon"></span></span>'}else{if(D.targetedMonster.guid==s.guid?await Ga(s,a,!1,!0):await Ma(s,a),Y.allDead())return await B.wait(800),void qe();await B.wait(D.animationGap)}}for(var t in m)if(m.hasOwnProperty(t)){let a=m[t];"nightmare"==D.difficulty&&(a+=5),"frost"==s.context&&(a+=Math.round((T.aggro.level/4+.5)*a)),"query"==e?(a+=s.solid.current,r+='<span class="tooltip" data-powertip="Gain '+a+' block"><span class="intent-blk intent-amount">'+a+'</span><span class="intent-blk-icon intent-icon"></span></span>'):(Ra(a,s),await B.wait(300))}for(var t in u)if(u.hasOwnProperty(t))if("query"==e){let e=u[t]+s.craft.current;r+='<span class="tooltip" data-powertip="Gain '+e+' armor"><span class="intent-armor intent-amount">'+e+'</span><span class="intent-armor-icon intent-icon"></span></span>'}else Da(u[t],s),await B.wait(300);if(null!=h)for(let a=0;a<h.length;a++){let t=s,n="Gain ",o=h[a].turns>0?" ("+h[a].turns+" turns)":"",d=h[a].effect,l=D.effects.find((({id:e})=>e===d)),c=h[a].amount;if(h[a].hex&&(t=T,n="Hex "),"punch"!=d&&"sorcery"!=d&&"resistance"!=d&&"thunder"!=d&&"veil"!=d||(c=Math.round(100*(c+Number.EPSILON)),c+="%"),"query"==e)i=n+c+" "+l.name+o,h[a].hex?r+='<span class="intent-hex effect-hex intent-icon tooltip" data-powertip="'+i+'"></span>':r+='<span class="intent-buff effect-buff intent-icon tooltip" data-powertip="'+i+'"></span>';else{let e=null==h[a].turns?-1:h[a].turns;Te(h[a],t,e),await B.wait(300)}}if(null!=g)for(let a=0;a<g.length;a++){let t=s,n="Gain ",o=null==g[a].turns?-1:g[a].turns,d=g[a].turns>0?" ("+g[a].turns+" turns)":"",l=g[a].ability,c=D.abilities.find((({id:e})=>e===l));g[a].hex&&(t=T,n="Hex "),"query"==e?(i=n+c.name+d,g[a].hex?r+='<span class="intent-hex ability-hex intent-icon tooltip" data-powertip="'+i+'"></span>':r+='<span class="intent-buff ability-buff intent-icon tooltip" data-powertip="'+i+'"></span>'):(Pe(g[a],t,o),await B.wait(300))}if(null!=p&&p.length>0)if("query"==e)for(let e=0;e<p.length;e++){let a="Action: ",t=p[e].action,n=D.actions.find((e=>e.id===t)),s=n.name,o=(n.desc,p[e].what),d=p[e].value,l=p[e].type,c=p[e].to,m=p[e].desc,u="+";if("summonMonster"==t){if(o.constructor===Array){let e=" Random (";for(let a=0;a<o.length;a++)e+=Y.monsters.filter((e=>e.id==o[a]))[0].name+", ";o=e.slice(0,-2)+")"}else o=Y.monsters.filter((e=>e.id==o)),o=" "+o[0].name;u="&times;",l=null!=l?" ("+l+")":""}else"kill"==t?(s="Die",o="",l="",d="",c=""):(o=null!=o?" ("+o+")":"",l=null!=l?" ("+l+")":"");d=null!=d?" "+u+d:"","drawCards"==c&&(c="Draw Cards"),"handCards"==c&&(c="Hand"),"discardCards"==c&&(c="Discard Cards"),c="removeHexes"==t||"summonMonster"==t||"kill"==t?"":"removeBuffs"==t?null!=d?" from "+c:"":null!=d?" to "+c:"",i=null!=m?m:a+s+o+l+d+c,r+="removeHexes"==t?'<span class="intent-buff action-buff intent-icon tooltip" data-powertip="'+i+'"></span>':"summonMonster"==t?'<span class="intent-summon action-hex intent-icon tooltip" data-powertip="'+i+'"></span>':'<span class="intent-hex action-hex intent-icon tooltip" data-powertip="'+i+'"></span>'}else Sa(p,a[n]),await B.wait(300);"query"==e?(s.chosenMoveSetIndex=d,$(".monster[data-guid="+s.guid+"] .monster-intent").html(r),B.setTooltips(".monster-intent")):(Y.updateMonsterStats(s),$(".monster[data-guid="+s.guid+"]").removeClass("taking-turn")),await B.wait(100)}se()}async function Le(e=!0){$(".end-turn").addClass("disabled"),Be(T),Ye(T),Y.updateStatusBar(T);let a=D.currentMonsters.filter((e=>0==e.dead));for(let e=0;e<a.length;e++)a[e].stockpile.enabled&&a[e].block>0&&Da(a[e].block,a[e]),Be(a[e],!0),Ye(a[e],!0),Y.updateMonsterStats(D.currentMonsters[e]);Y.updateStatusBar(),$("body").addClass("selecting retaining"),D.message("End player turn "+D.round),T.expirex.enabled||F.destroyExpiredCards(F),F.incrementExpiredCards(F),F.chooseCards=[],D.toPile="handCards",oe("allCards"),$(".player-cards .card").removeClass("playable selected"),T.retain.current>0&&e&&F.handCards.length>0?($(".player-panel .standard-message").html("choose cards to retain").addClass("shown"),$(".retain-done").addClass("shown"),$(".player-cards .card").addClass("retainable"),$(".draw-card, .draw-all").addClass("disabled")):($(".player-panel .standard-message").removeClass("shown"),$(".retain-done").removeClass("shown"),$(".player-cards .card").removeClass("retain retainable"),F.discardHand(F,T),async function(){$(".combat-text, .combat-text h2.enemy-turn").addClass("shown"),await B.wait(1e3),$(".combat-text, .combat-text h2").removeClass("shown"),await B.wait(800),await Re();let e=D.currentMonsters.filter((e=>0==e.dead));for(let a=0;a<e.length;a++)Be(e[a]),Ye(e[a]),Y.updateMonsterStats(D.currentMonsters[a]),D.message("Begin "+e[a].guid+" turn "+D.round);Y.updateStatusBar(),function(){let e=D.currentMonsters.filter((e=>0==e.dead));for(let a=0;a<e.length;a++)D.message("End "+e[a].guid+" turn "+D.round),e[a].chosenMoveSetIndex=-1,Be(e[a],!1,!0),Ye(e[a],!1,!0),Y.updateStatusBar(e[a]);T.stockpile.enabled&&T.block>0&&Da(T.block,T),Be(T,!0),Ye(T,!0),Y.updateStatusBar(T),p().dead(T)||_e()}()}(),$("body").removeClass("selecting retaining")),$(".magic-rainbow").removeClass("activated"),await B.wait(1e3),$(".end-turn").removeClass("disabled")}function Ae(e,a){if("fixed"==a){let a=D.round;for(;a>e.length;)a-=e.length;return a-1}return B.pickAWinningItem(e)}function Be(e,a=!1,t=!1){for(let n=0;n<D.effects.length;n++)if((!a&&!D.effects[n].delay&&!t&&!D.effects[n].offset||a&&D.effects[n].delay||t&&D.effects[n].offset)&&"fatality"!=D.effects[n].id){let a=0,t=null!=e[D.effects[n].id].temp[a]&&e[D.effects[n].id].temp[a];t&&(e[D.effects[n].id].temp.splice(0,1),e[D.effects[n].id].current-=t,t=null!=e[D.effects[n].id].temp[0]&&e[D.effects[n].id].temp[0],t&&(e[D.effects[n].id].current+=t)),e[D.effects[n].id].turns>0&&(e[D.effects[n].id].turns-=1,e[D.effects[n].id].turns),e[D.effects[n].id].current=Math.round(100*(e[D.effects[n].id].current+Number.EPSILON))/100}e.momentumAmount=0,e.antimomentumAmount=0}function De(e){for(let a=0;a<D.effects.length;a++)if("rainbow"==D.effects[a].id)e[D.effects[a].id].hexed&&(e[D.effects[a].id].hexed=!1);else{let t=e[D.effects[a].id].hexed,n=D.effects[a].hex;if(t="sorcery"==D.effects[a].id||"punch"==D.effects[a].id||"thunder"==D.effects[a].id?e[D.effects[a].id].current<1:!!(e[D.effects[a].id].current<0||n),t){let t="sorcery"==D.effects[a].id||"punch"==D.effects[a].id||"thunder"==D.effects[a].id?1:0;e[D.effects[a].id].temp=[],e[D.effects[a].id].turns=0,e[D.effects[a].id].current=t,e[D.effects[a].id].hexed=!1}}}function Me(e){if(!e.eternal.enabled){for(let a=0;a<D.effects.length;a++)if("rainbow"!=D.effects[a].id&&void 0!==e[D.effects[a].id]){let t=D.effects[a].hex;if(!0!==e[D.effects[a].id].hexed&&!t){let t="sorcery"==D.effects[a].id||"punch"==D.effects[a].id||"thunder"==D.effects[a].id?1:0;e[D.effects[a].id].temp=[],e[D.effects[a].id].turns=0,e[D.effects[a].id].current=t}}for(let a=0;a<D.abilities.length;a++)"toothache"!=D.abilities[a].id&&void 0!==e[D.abilities[a].id]&&(e[D.abilities[a].id].enabled=!1,e[D.abilities[a].id].turns=0)}}async function Te(e,a,t=-1){let n=D.effects.find((({id:a})=>a===e.effect)),r=!1;if(void 0!==n&&(n.hex||e.hex)&&(r=!0),a.vex.current>0&&r)a.vex.current-=1,D.playsounds&&ee.play("vex");else{let i=$(".player .status-text");if("monster"==a.type&&(i=$(".monster[data-guid="+a.guid+"] .status-text")),null!=e.amount){let s=Math.round(100*(a[e.effect].current+e.amount+Number.EPSILON))/100,o=e.amount;if("punch"!=e.effect&&"speed"!=e.effect&&"thunder"!=e.effect&&"sorcery"!=e.effect&&"resistance"!=e.effect&&"veil"!=e.effect||s<0&&(s=0),a[e.effect].current=s,"rainbow"!=e.effect&&t>-1)if("fatality"==e.effect)0==a[e.effect].temp.length?a[e.effect].temp.push(e.amount):a[e.effect].temp[0]=Math.round(100*(a[e.effect].temp[0]+e.amount+Number.EPSILON))/100;else for(let n=1;n<=t;n++){let t=a[e.effect].temp[n-1]+e.amount;(void 0===t||isNaN(parseFloat(t)))&&(t=e.amount),t=Math.round(100*(t+Number.EPSILON))/100,0==a[e.effect].temp.length?a[e.effect].temp.push(e.amount):a[e.effect].temp[n-1]=t}if(t>-1?t>a[e.effect].turns&&(a[e.effect].turns=t):a[e.effect].turns=t,e.persist&&(a[e.effect].persist=e.persist),"punch"!=e.effect&&"sorcery"!=e.effect&&"resistance"!=e.effect&&"thunder"!=e.effect&&"veil"!=e.effect||(o=Math.round(100*(o+Number.EPSILON)),o+="%"),r)a[e.effect].hexed=!0,D.playsounds&&ee.play("hex"),D.statusAnimations({data:o+" "+e.effect,to:i,hex:!0}),a.angered.current>0&&Te({effect:"might",amount:a.angered.current,turns:-1},a);else{a[e.effect].hexed=!1;let t=n.sound?n.sound:"applyEffect";D.playsounds&&ee.play(t),D.statusAnimations({data:o+" "+e.effect,to:i,hex:!1})}}else if(null!=e.base){a[e.effect].base+=e.base,a[e.effect].current=a[e.effect].base,a[e.effect].turns=t;let r=n.sound?n.sound:"applyEffect";D.playsounds&&ee.play(r);let s=e.base;"punch"!=e.effect&&"sorcery"!=e.effect&&"resistance"!=e.effect&&"thunder"!=e.effect&&"veil"!=e.effect||(s=Math.round(100*(s+Number.EPSILON)),s+="%"),D.statusAnimations({data:s+" "+e.effect,to:i,hex:!1})}"rainbow"==e.effect&&Aa(a)}"monster"==a.type&&Y.updateStatusBar(),se()}function Ye(e,a=!1,t=!1){for(let n=0;n<D.abilities.length;n++)"card"!==D.abilities[n].context&&(!a&&!D.abilities[n].delay&&!t&&!D.abilities[n].offset||a&&D.abilities[n].delay||t&&D.abilities[n].offset)&&(e[D.abilities[n].id].turns>1?(e[D.abilities[n].id].turns-=1,e[D.abilities[n].id].enabled=!0):0==e[D.abilities[n].id].permanent&&e[D.abilities[n].id].turns>-1&&(e[D.abilities[n].id].turns=0,e[D.abilities[n].id].enabled=!1))}function Pe(e,a,t=-1){let n=a[e.ability].enabled&&-1==a[e.ability].baseTurns,r=D.abilities.find((({id:a})=>a===e.ability)),i=!1;if(r.hex&&(i=!0),a.vex.current>0&&i)a.vex.current-=1,D.playsounds&&ee.play("vex");else{a[e.ability].enabled=e.enabled;let i=$(".player .status-text");if("monster"==a.type&&(i=$(".monster[data-guid="+a.guid+"] .status-text")),n||(a[e.ability].permanent?a[e.ability].baseTurns+=t:a[e.ability].baseTurns=e.baseTurns),e.hex)a[e.ability].turns=0,a[e.ability].enabled=!1,D.playsounds&&ee.play("hex"),D.statusAnimations({data:r.name,to:i,hex:!0}),a.angered.current>0&&Te({effect:"might",amount:a.angered.current,turns:-1},a);else{n||(-1==e.baseTurns?a[e.ability].turns=-1:a[e.ability].turns+=t);let r=D.abilities.find((({id:a})=>a===e.ability)),s=r.sound?r.sound:"applyAbility";D.playsounds&&ee.play(s),D.statusAnimations({data:r.name,to:i,hex:!1})}a[e.ability].baseTurns<-1&&(a[e.ability].baseTurns=-1),a[e.ability].turns<-1&&(a[e.ability].turns=-1),e.persist&&(a[e.ability].persist=e.persist),e.permanent&&(a[e.ability].permanent=e.permanent)}"monster"==a.type&&Y.updateStatusBar(),se()}function qe(){if(!D.combatEndedFlag){ae();let e=1;"arena"==D.mapType?(D.playsounds&&ee.play("arenaRewards"),e=D.arenasComplete):D.playsounds&&ee.play("rewards"),"singularity"!=D.mapType&&(setTimeout((function(){"frost"==D.overworld?!U.playing()&&D.playmusic&&U.play():"flame"==D.overworld?!H.playing()&&D.playmusic&&H.play():!O.playing()&&D.playmusic&&O.play()}),3e3),setTimeout((function(){$(".combat, .show-cards, .message, .button-done").removeClass("shown"),$("body").removeClass("combating selecting destroying retaining"),$(".player-cards, .monster-panel").empty(),na()}),2e3)),$(".candy").removeClass("clickable").addClass("trashable"),D.combatEndedFlag=!0,D.message("End combat floor "+D.combat),Fe(T,T.heal.current),Ie(1),Ee(e),"nightmare"==D.difficulty?(D.candyChance+=8,D.shardChance+=3):(D.candyChance+=10,D.shardChance+=5),T.block=0,function(){for(let e=0;e<D.effects.length;e++)(T[D.effects[e].id].turns>-1&&1!=T[D.effects[e].id].persist||-1==T[D.effects[e].id].turns)&&(T[D.effects[e].id].temp=[],T[D.effects[e].id].turns=0,"punch"==D.effects[e].id||"sorcery"==D.effects[e].id||"thunder"==D.effects[e].id?T[D.effects[e].id].current=1:T[D.effects[e].id].current=0);T.momentumAmount=0,T.antimomentumAmount=0}(),function(){for(let e=0;e<D.abilities.length;e++)(0==T[D.abilities[e].id].persist&&T[D.abilities[e].id].turns>-1||0==T[D.abilities[e].id].permanent&&T[D.abilities[e].id].turns<1)&&(T[D.abilities[e].id].enabled=!1,T[D.abilities[e].id].turns=0)}(),function(){for(let e=0;e<T.treasures.length;e++){let a=T.treasures[e].trigger;a.counter>-1&&("turn"==a.per||a.once&&"combat"==a.per)&&(a.counter=0,$('.treasure[data-id="'+T.treasures[e].id+'"] span.counter').html(a.counter)),a.activated=!1}}(),"singularity"==D.mapType?Ue("victory"):function(){$(".rewards").addClass("shown"),$(".rewards-loot").empty(),$(".rewards-loot-wrapper").removeClass("shown"),D.toExclude=[];for(let e=0;e<D.cardRewardNumber;e++){let e=q.decideCard();B.appendCard(e,".rewards-cards")}if(B.chance(D.candyChance)){D.candyChance-=20,D.candyChance<0&&(D.candyChance=0);let e=B.weightedRandom(I.candies),a=$.extend(!0,{},e);a.desc=q.buildDescription(a);let t=T.candies.length<D.candySlots;B.appendCandy(a,".rewards-loot",t),$(".rewards-loot-wrapper").addClass("shown")}if(B.chance(D.shardChance)&&q.numOpenSlots()>0){D.shardChance-=15,D.shardChance<0&&(D.shardChance=0);var e=B.randArrayIndex(I.shards);B.appendShard(I.shards[e],".rewards-loot"),$(".rewards-loot-wrapper").addClass("shown")}}(),$(".magic-rainbow").removeClass("activated")}}function Fe(e,a){if(0==a)return;D.playsounds&&ee.play("heal");let t=(a=parseFloat(a))+e.mend.current;e.health.current+=t,e.health.current>e.health.max&&(e.health.current=e.health.max);let n=$(".player-health .health-gained");"monster"==e.type&&(n=$(".monster[data-guid="+e.guid+"] .health-gained")),D.dmgAnimations({data:t,to:n}),se()}function Ie(e){e=parseFloat(e),T.courage+=e;let a=e>0?"+"+e:e;e>0&&D.playsounds&&ee.play("frolic"),D.statusAnimations({data:'<span class="courage-text">'+a+"</span>",to:".courage-amount",hex:!1}),se()}async function Ee(e){let a=1==D.map?D.aggroThresholds:D.aggroThresholds2;if(null!=e){let t=(e=parseFloat(e))>0?"+"+e:e;if(D.statusAnimations({data:'<span class="aggro-text">'+t+"</span>",to:".aggro-amount",hex:!1}),e<0)for(let t=0;t>e;t--)T.aggro.current-=1,a.includes(T.aggro.current+1)&&(T.aggro.level-=1,$(".aggro-bar span.level").html(T.aggro.level),$(".aggro-bar span.current").html(T.aggro.current),$(".aggro-bar").addClass("level-up"),await B.wait(1100),$(".aggro-bar").removeClass("level-up"));else for(let t=0;t<e;t++){let e=1;"easy"==D.difficulty&&(e=B.chance(50)?1:0),T.aggro.current+=e,(a.includes(T.aggro.current)||T.aggro.current>a.at(-1))&&(D.playsounds&&ee.play("aggroLevel"),T.aggro.level+=1,$(".aggro-bar span.level").html(T.aggro.level),$(".aggro-bar span.current").html(T.aggro.current),$(".aggro-bar").addClass("level-up"),await B.wait(1100),$(".aggro-bar").removeClass("level-up"))}}$(".aggro-bar span.level").html(T.aggro.level),$(".aggro-bar span.current").html(T.aggro.current),$(".aggro-bar span.threshold").html(a[T.aggro.level]),B.updateAggroPercentage(),se()}function Oe(e,a=3){ae(),D.playsounds&&ee.play("loot"),setTimeout((function(){"frost"==D.overworld?!U.playing()&&D.playmusic&&U.play():"flame"==D.overworld?!H.playing()&&D.playmusic&&H.play():!O.playing()&&D.playmusic&&O.play()}),1e3),$(".loot-screen").addClass("shown");let t=I.treasures.filter((e=>0==e.owned&&e.tier<=a));switch(e){case"shard":var n=B.randArrayIndex(I.shards);B.appendShard(I.shards[n],".loot-items"),$(".loot-screen .message").html("You found a shard.");break;case"arena":if(t=I.treasures.filter((e=>0==e.owned&&e.tier==a)),t.length>0){t=B.shuffle(t);for(let e=0;e<3;e++){let a=t[e];a.desc=q.buildDescription(a),B.appendTreasure(a,".loot-items")}}$(".loot-screen .message").html('Choose&nbsp;<span class="highlight">ONE</span>&nbsp;of these powerful treasures.');break;case"gate":if(t=I.treasures.filter((e=>0==e.owned&&e.tier==a)),t.length>0){t=B.shuffle(t);for(let e=0;e<3;e++){let a=t[e];a.desc=q.buildDescription(a),B.appendTreasure(a,".loot-items")}}$(".loot-screen .message").html('Choose&nbsp;<span class="highlight">ONE</div>&nbsp;legendary treasure.');break;case"treasure":if(t.length>0){let e=B.weightedRandom(t);e.desc=q.buildDescription(e),B.appendTreasure(e,".loot-items")}var r=B.chance(75)?1:2;for(let e=0;e<r;e++)n=B.randArrayIndex(D.essences),B.appendEssence(D.essences[n],".loot-items");if(B.chance(D.shardChance)&&q.numOpenSlots()>0&&(D.shardChance-=5,D.shardChance<0&&(D.shardChance=0),n=B.randArrayIndex(I.shards),B.appendShard(I.shards[n],".loot-items")),B.chance(D.candyChance)){D.candyChance-=20,D.candyChance<0&&(D.candyChance=0);let e=B.weightedRandom(I.candies),a=$.extend(!0,{},e);a.desc=q.buildDescription(a);let t=T.candies.length<D.candySlots;B.appendCandy(a,".loot-items",t)}$(".loot-screen .message").html("Spoils of war.");break;case"candy":for(let e=0;e<a;e++){let e=B.weightedRandom(I.candies),a=$.extend(!0,{},e);a.desc=q.buildDescription(a);let t=T.candies.length<D.candySlots;B.appendCandy(a,".loot-items",t)}$(".loot-screen .message").html("Spoils of war.")}}function Ue(e){ae(),$(".combat").removeClass("shown"),$("body").removeClass("combating"),"victory"==e?($(".victory").addClass("shown"),!N.playing()&&D.playmusic&&N.play()):($(".loss").addClass("shown"),!j.playing()&&D.playmusic&&j.play())}function He(){ae(),D.playsounds&&ee.play("gate"),$(".gate-screen").addClass("shown")}function ze(){if("fountain"==D.mapType)return!1;if(D.mapType="normal",D.floor%D.courageInterval==0){B.setTooltip(".courage-gamble"),B.setTooltip(".courage-trade"),B.setTooltip(".courage-remove"),B.setTooltip(".remove-courage"),B.setTooltip(".trade-courage"),D.tradeExpired=!1,ae(),!K.playing()&&D.playmusic&&K.play(),$(".courage-screen").addClass("shown"),$(".courage-remove").addClass("shown"),$(".courage-gamble").addClass("shown"),q.getTradeableCards()?$(".courage-trade").addClass("shown"):$(".courage-trade").removeClass("shown");let e=[],a=I.treasures.filter((e=>0==e.owned));for(let t=0;t<D.courageTreasureAmount;t++){let t=B.weightedRandom(a);if(e.push(t),a=a.filter((e=>e.id!==t.id)),null==t)break;t.desc=q.buildDescription(t),B.appendTreasure(t,".courage-items")}for(let e=0;e<D.courageCandyAmount;e++){let e=B.weightedRandom(I.candies);e.desc=q.buildDescription(e);let a=T.candies.length<D.candySlots;B.appendCandy(e,".courage-items",a)}for(let e=0;e<D.courageCardAmount;e++){let e=q.decideCard("attack");B.appendCard(e,".courage-cards")}for(let e=0;e<D.courageCardAmount;e++){let e=q.decideCard("tool");B.appendCard(e,".courage-cards")}for(let e=0;e<D.courageCardAmount;e++){let e=q.decideCard("magic");B.appendCard(e,".courage-cards")}for(let e=0;e<D.courageCardAmount;e++){let e=q.decideCard("ability","uncommon");B.appendCard(e,".courage-cards")}We()}}function We(){$(".courage-items .treasure-courage").each((function(e){$(this).attr("data-amount")>T.courage?$(this).parent().addClass("too-expensive"):$(this).parent().removeClass("too-expensive")})),$(".courage-items .candy-courage").each((function(e){$(this).attr("data-amount")>T.courage?$(this).parent().addClass("too-expensive"):$(this).parent().removeClass("too-expensive")})),$(".courage-cards .card-courage").each((function(e){$(this).attr("data-amount")>T.courage?$(this).parent().addClass("too-expensive"):$(this).parent().removeClass("too-expensive")})),D.removeCardCost>T.courage?$(".courage-remove").addClass("too-expensive"):$(".courage-remove").removeClass("too-expensive"),D.tradeCardCost>T.courage?$(".courage-trade").addClass("too-expensive"):$(".courage-trade").removeClass("too-expensive"),se()}function Ne(e){if(T.candies.length<D.candySlots){D.playsounds&&ee.play("addCandy");let a=I.candies.find((({id:a})=>a===e)),t=$.extend(!0,{},a);t.desc=q.buildDescription(t),p().addCandy(t,T),T.candies.length==D.candySlots&&$(".loot-items .candy").removeClass("clickable")}}async function je(e,a=!1){D.playsounds&&ee.play("addCandy");let t=T.candies.find((({guid:a})=>a===e));T.candies=T.candies.filter((e=>e.guid!==t.guid));let n=t.dmg;if(a){let e=D.currentMonsters.filter((e=>e.guid==a.data("guid")));if(null!=n&&n.length>0)for(let a=0;a<n.length;a++)if(await Ga(e[0],n[a],!1,!1,!1,!1),Y.allDead()){qe();break}}let r=t.blk;if(null!=r&&r.length>0)for(let e=0;e<r.length;e++)Ra(r[e],T);let i=t.armor;if(null!=i&&i.length>0)for(let e=0;e<i.length;e++)Da(i[e],T);let s=t.effects;if(null!=s)for(let e=0;e<s.length;e++){let a=null==s[e].turns?-1:s[e].turns;Te(s[e],T,a)}let o=t.abilities;if(null!=o)for(let e=0;e<o.length;e++){let a=null==o[e].turns?-1:o[e].turns;Pe(o[e],T,a)}let d=t.actions;null!=d&&await Sa(d)&&F.updateCardPlayability(T,F);let l=t.magic;if(null!=l)for(let e=0;e<l.length;e++)if(La(l[e],T),Y.allDead()){qe();break}$(".loot-items .candy").addClass("clickable"),se()}function Ke(e){D.playsounds&&ee.play("addTreasure");let a=I.treasures.find((({id:a})=>a===e));if(null==a)return!1;a.desc=q.buildDescription(a),p().addTreasure(a,T),a.permanent&&Qe(a)}function Ve(e){D.playsounds&&ee.play("buyItem"),Je(e);let a=B.getCardById(e,P);T.courage-=a.courage,We(),q.getTradeableCards()&&!D.tradeExpired&&$(".courage-trade").addClass("shown")}async function Qe(e){if(null!=e.effects)for(let a=0;a<e.effects.length;a++){let t=null==e.effects[a].turns?-1:e.effects[a].turns;Te(e.effects[a],T,t)}if(null!=e.abilities)for(let a=0;a<e.abilities.length;a++){let t=null==e.abilities[a].baseTurns?e.abilities[a].turns:e.abilities[a].baseTurns;null==t&&(t=-1),Pe(e.abilities[a],T,t)}null!=e.actions&&await Sa(e.actions),e.trigger.activated=!0,se()}function Je(e){D.playsounds&&ee.play("tool2"),q.addCard(e),se()}function Xe(e,a=0){D.playsounds&&ee.play("removeCard"),T.courage-=a,q.removeCard(e),We(),se()}function Ze(e){if(e.hasClass("selected"))!function(e){D.playsounds&&ee.play("deselectCard"),e.removeClass("selected"),na(),$(".monster").removeClass("clickable")}(e),$(".card.combinable").removeClass("combine-compatible"),F.updateCardPlayability(T,F),e.find(".button.play-card").remove();else{let a=B.getCardByGuid(e.data("guid"),F.handCards);null!=a&&($(".card.playable").removeClass("selected"),$(".button.play-card").remove(),$("body").hasClass("selecting")||(e.hasClass("combinable")&&($(".card.playable:not(.combinable").removeClass("playable"),e.addClass("selected"),B.hasPlayAction(a)&&e.hasClass("playable")&&B.appendConfirm(a,e)),"monster"==a.target?(D.playsounds&&ee.play("selectCard"),e.addClass("selected"),$(".monster:not(.dead)").addClass("clickable"),function(e){$("#curve, #arrow").addClass("shown"),ta=e[0];const a=ta.getBoundingClientRect();var t;t={x:a.x+a.width/2,y:a.y+a.height/2},ea=t,ra(),ia({x:a.x+a.width/2,y:a.y+a.height/2})}(e)):e.hasClass("combinable")||fa(e)))}}jQuery(document).ready((function(e){D.dev&&e(".starting-room, .choose-booster-pack").css("display","none"),D.debug&&e(".end-combat").addClass("shown"),e(".game-loading-progress").addClass("loaded"),ae(),setTimeout((function(){e("#game-loading").addClass("hidden"),B.setSplashTooltips()}),1e3),setTimeout((function(){e(".game-loading-progress").removeClass("loaded")}),2e3),e("#splash .difficulty").click((function(a){e("#splash .difficulty").removeClass("toggled-on"),e(this).addClass("toggled-on"),D.difficulty=e(this).data("difficulty")})),e("#splash .begin").click((function(a){if("frost"==D.overworld?!U.playing()&&D.playmusic&&U.play():"flame"==D.overworld?!H.playing()&&D.playmusic&&H.play():!O.playing()&&D.playmusic&&O.play(),e("#splash").removeClass("shown"),e("body").hasClass("game-started")||e("#story-panel").addClass("shown"),!e("body").hasClass("game-started")){e("#game-loading").removeClass("hidden"),e(".game-loading-progress").addClass("loaded");let a=e("input#custom-seed").val();""==a&&(a=(Math.random()+1).toString(36).substring(2)),D.seed=a,B.setGameSeed(a),e(".game-seed span").html(a),e(".game-version span").html(D.version),setTimeout((function(){e("#game-loading").addClass("hidden")}),1100),setTimeout((function(){"frost"==D.scenario?(D.overworld="frost",D.mapType="ice_gate",re()):"flame"==D.scenario?(D.overworld="flame",D.mapType="fire_gate",re()):"singularity"==D.scenario?(D.mapType="singularity",ne()):te()}),1e3),setTimeout((function(){e("#game-loading").remove()}),3e3)}e("body").addClass("game-started")})),e("#story-panel .start-journey").click((function(a){e("#story-panel").removeClass("shown")})),e("#close-tutorial").click((function(){D.tutorial=!1,e("body").removeClass("tutorial"),e(".starting-room.game-panel").addClass("shown")})),e("#step1 .next-button").click((function(){e(this).parent().removeClass("shown"),e("#step2").addClass("shown")})),e("#step2 .next-button").click((function(){e(this).parent().removeClass("shown"),e("#step3").addClass("shown")})),e("#step3 .next-button").click((function(){e(this).parent().removeClass("shown"),e("#step4").addClass("shown")})),e("#step4 .next-button").click((function(){e(this).parent().removeClass("shown"),e("#step5").addClass("shown")})),e("#step5 .next-button").click((function(){e(this).parent().removeClass("shown"),e("#step6").addClass("shown")})),e("#step6 .next-button").click((function(){e(this).parent().removeClass("shown"),e("#step7").addClass("shown")})),e("#step7 .next-button").click((function(){e(this).parent().removeClass("shown"),D.tutorial=!1,e("body").removeClass("tutorial"),e(".starting-room.game-panel").addClass("shown")})),e(".button, .icon-button").click((function(){})),e(".settings-panel .button:not(.difficulty)").click((function(){e(this).toggleClass("toggled-on"),e(this).hasClass("toggled-on")?e(this).find("span").html("on"):e(this).find("span").html("off")})),e(".music").click((function(){e(this).hasClass("toggled-on")?D.playmusic=!0:(ae(),D.playmusic=!1)})),e(".sound").click((function(){e(this).hasClass("toggled-on")?D.playsounds=!0:D.playsounds=!1})),e(".tutorial").click((function(){e(this).hasClass("toggled-on")?D.tutorial=!0:D.tutorial=!1})),e(".settings").click((function(a){e("#splash").toggleClass("shown"),e("#splash .begin").html("Resume Game")})),e(document).on("click",".status-toggle",(function(a){e(".status").toggleClass("shown")})),e(document).on("click",".debug-toggle",(function(a){e(".debug-log").toggleClass("shown")})),e(".map-inner .current").next().addClass("clickable"),e(".map-inner .current").siblings().eq(e(this).index()+10).addClass("clickable"),e(document).on("click",".view-map",(function(a){e(this).closest(".game-panel").removeClass("shown"),e(".view-map-done-wrapper").addClass("shown"),e(".view-map-done").attr("data-target",e(this).attr("data-game-panel"))})),e(document).on("click",".view-map-done",(function(a){e(this).closest(".view-map-done-wrapper").removeClass("shown");let t=e(this).attr("data-target");e("."+t).addClass("shown")})),e(document).on("click",".starting-options .button",(function(a){D.playsounds&&ee.play("startingBonus"),e(".starting-options").removeClass("shown"),e(".starting-room").removeClass("shown"),e(".starting-treasure").addClass("shown"),function(e){let a=e.attr("data-att"),t=e.attr("data-key"),n=e.attr("data-amount"),r=e.attr("data-entity"),i=e.attr("data-action");if(null==r||"player"==r?r=T:"game"==r&&(r=D),n=parseFloat(n),null!=t)"shimmer"==a||"sparkle"==a||"aura"==a?xe(a,n):"aggro"==a?Ee(n):r[a][t]+=n;else if(null!=a)r[a]+=n;else if(null!=i){if("addRare"==i){let e=b().cards.filter((e=>1==e.addable&&"rare"==e.tier)),a=B.randFromArray(e);q.addCard(a.id);let t=B.getCardById(a.id,q.cards);D.toShow.push(t),q.showModifiedCards(F,T,!0),r.health.current-=12}else if("addCommonTreasure"==i){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id)}else if("addUncommonTreasure"==i){let e=I.treasures.filter((e=>0==e.owned&&2==e.tier));Ke(B.weightedRandom(e).id),r.health.current-=20}else if("addRareTreasure"==i){let e=I.treasures.filter((e=>0==e.owned&&3==e.tier));Ke(B.weightedRandom(e).id),r.health.current-=10,r.health.max-=10}Y.setEffects(T),Y.setAbilities(T),Y.updateStatusBar()}"health"==a&&Fe(r,n),se()}(e(this))})),e(document).on("click",".starting-treasure .treasure, .starting-treasure .done",(function(a){D.playsounds&&ee.play("startingBonus"),e(".starting-treasure").removeClass("shown"),e(".choose-booster-pack").addClass("shown"),Ke(e(this).attr("data-id")),se()})),e(document).on("click",".starting-booster-packs .pack-button",(function(a){pe(e(this).attr("data-pack"))})),e(document).on("click",".booster-pack.clickable",(function(a){D.playsounds&&ee.play("startingBonus"),e(".choose-booster-pack").addClass("shown"),e(".pack-cards-panel .select, .choose-booster-pack .view-map").hide(),e(".choose-booster-pack .message").html("You can view the cards in each booster pack here."),e(".choose-booster-pack h2").html("Booster Packs")})),e(document).on("click",".view-basic",(function(e){fe()})),e(document).on("click",".pack-cards-panel .select",(function(a){D.playsounds&&ee.play("choosePack"),e(".pack-cards-panel").removeClass("shown"),e(".starting-booster-packs").removeClass("shown"),e(".choose-booster-pack").removeClass("shown"),e(".booster-pack").addClass("clickable"),function(e){let a=e.attr("data-pack"),t="",n=[];t="combine"==a?"self_enhance":"rainbow"==a?"sparks":"bottled_speed",q.addCard(t),n=B.getCardById(t,q.cards),D.toShow.push(n),q.showModifiedCards(F,T,!0),D.boosterPack=a,se()}(e(this))})),e(document).on("click",".pack-cards-panel .back",(function(a){D.playsounds&&ee.play("doneCards"),e(".pack-cards-panel").removeClass("shown")})),e(document).on("click",".starting-room .done",(function(a){e(".starting-room").removeClass("shown"),e(".starting-treasure").addClass("shown")})),e(document).on("click",".choose-booster-pack .done",(function(a){e(".choose-booster-pack").removeClass("shown"),e(".booster-pack").addClass("clickable")})),e(document).on("click",".tile.clickable",(function(a){if(e(".map-inner").css("pointer-events","none"),setTimeout((function(){e(".map-inner").css("pointer-events","auto")}),2e3),e(this).hasClass("fountain")?Ce(!!e(this).hasClass("visited")):e(this).hasClass("quest")?ke(!!e(this).hasClass("visited")):ve(e(this)),M.clickTile(e(this)),e(".tile.arena.visited").removeClass("clickable"),D.arenasComplete<D.arenasRequired){let a=D.arenasRequired-D.arenasComplete,t=1===a?"":"s";e(".tile.ice-gate").removeClass("clickable").data("powertip",'Ice Gate: LOCKED (<span class="highlight">'+a+"</span> arena"+t+" required)").attr("data-powertip",'Ice Gate: LOCKED (<span class="highlight">'+a+"</span> arena"+t+" required)"),e(".tile.fire-gate").removeClass("clickable").data("powertip",'Fire Gate: LOCKED (<span class="highlight">'+a+"</span> arena"+t+" required)").attr("data-powertip",'Fire Gate: LOCKED (<span class="highlight">'+a+"</span> arena"+t+" required)")}else e(".tile.ice-gate").addClass("clickable").data("powertip",'Ice Gate: <span class="highlight">UNLOCKED</span>').attr("data-powertip",'Ice Gate: <span class="highlight">UNLOCKED</span>'),e(".tile.fire-gate").addClass("clickable").data("powertip",'Fire Gate: <span class="highlight">UNLOCKED</span>').attr("data-powertip",'Fire Gate: <span class="highlight">UNLOCKED</span>');D.debug&&e(".map-inner div").addClass("clickable")})),e(".tile").mousedown((function(a){3===a.which&&e(this).toggleClass("marked")})),e(".tile").mouseenter((function(a){3===a.which&&e(this).toggleClass("marked")})),e("*").on("contextmenu",(function(){if(!D.debug)return!1})),e(document).on("click",".end-turn:not(.disabled)",(function(e){Le()})),e(document).on("click",".end-combat",(function(e){qe()})),e(document).on("click",".rewards-cards .card",(function(a){D.playsounds&&ee.play("drawCard"),Je(e(this).data("id")),e(".rewards-cards").addClass("unavailable"),e(this).addClass("disappearing").delay(1e3).queue((function(){e(".rewards-cards").removeClass("unavailable").empty().dequeue()}))})),e(document).on("click",".rewards-skip",(function(a){e(".rewards-cards").removeClass("unavailable").empty(),e(".rewards").removeClass("shown"),D.treasureChance+=Math.round(.75*D.floor),"arena"==D.mapType?(Oe("arena",3),D.treasureChance=0):"ice_gate"==D.mapType||"fire_gate"==D.mapType?(Oe("gate",4),D.treasureChance=0):B.chance(D.treasureChance)?(Oe("treasure"),D.treasureChance=0):ze()})),e(document).on("click",".rewards-loot .treasure, .loot-screen .treasure",(function(a){Ke(e(this).data("id")),e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).remove().dequeue()}))})),e(document).on("click",".rewards-loot .shard, .loot-screen .shard",(function(a){D.toPick=1,D.toPile="allCards",q.numOpenSlots(q.cards)>0&&(we(e(this).data("id")),e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).remove().dequeue()})))})),e(document).on("click",".rewards-loot .candy.clickable, .loot-screen .candy.clickable",(function(a){Ne(e(this).data("id")),e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).remove().dequeue()}))})),e(document).on("click",".loot-screen .essence",(function(a){xe(e(this).data("id"),1),e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).remove().dequeue()}))})),e(document).on("click",".candies .candy.clickable:not(.trashable)",(function(a){T.toothache.enabled||(e(this).hasClass("targeted")?e(this).hasClass("selected")?(e(this).removeClass("selected"),e(".monster").removeClass("candy-target")):(e(this).addClass("selected"),e(".monster").addClass("candy-target")):(je(e(this).data("guid")),e(this).remove()))})),e(document).on("click",".trash-candy-confirm .eat-candy",(function(a){let t=e(this).parent().attr("data-candy-guid");je(t),e(".candy[data-guid="+t+"]").remove(),e(".rewards-loot .candy, .loot-items .candy").addClass("clickable"),e(".trash-candy-confirm").removeClass("shown")})),e(document).on("click",".candies .candy.trashable",(function(a){e(".candy.trashable").removeClass("selected"),e(this).addClass("selected"),e(".trash-candy-confirm").addClass("shown"),e(".trash-candy-confirm").attr("data-candy-guid",e(this).data("guid")),B.getCandyById(e(this).data("id"),I.candies).combatOnly?e(".trash-candy-confirm .eat-candy").addClass("disabled"):e(".trash-candy-confirm .eat-candy").removeClass("disabled")})),e(document).on("click",".trash-candy-confirm .cancel",(function(a){e(".trash-candy-confirm").removeClass("shown"),e(".candy.trashable").removeClass("selected")})),e(document).on("click",".trash-candy-confirm .trash-candy",(function(a){let t=e(this).parent().attr("data-candy-guid");!function(e){D.playsounds&&ee.play("trashCandy");let a=T.candies.find((({guid:a})=>a===e));T.candies=T.candies.filter((e=>e.guid!==a.guid))}(t),e(".candy[data-guid="+t+"]").remove(),e(".rewards-loot .candy, .loot-items .candy").addClass("clickable"),e(".trash-candy-confirm").removeClass("shown")})),e(document).on("click",".shard-cards-panel .card",(function(a){let t=e(".shard-cards-panel").attr("data-shard"),n=t;"random"==t&&(n=B.randFromArray(I.shards),n=n.id);let r=B.getCardByGuid(e(this).data("guid"),q.cards);"allCards"!==D.toPile&&"deck"!==D.toPile&&(r=B.getCardByGuid(e(this).data("guid"),F[D.toPile])),D.playsounds&&ee.play("attachShard"),q.attachShard(r,n),D.toShow.push(r),q.showModifiedCards(F,T,!0),D.toPick-=1,oe("showCards",q.cards),oe(D.toPile),q.hasOpenSlot(r)||e(this).parent().remove(),0==D.toPick&&(e(".shard-cards-panel").removeClass("shown"),e(".draw-card, .draw-all, .end-turn").removeClass("disabled"),F.chooseCards=[])})),e(document).on("click",".player-cards .card",(function(a){let t=e(this).hasClass("combinable"),n=e(this).hasClass("playable");if(t){let a=e(this).data("id"),t=!1,n=e('.card.combinable[data-id="'+a+'"].selected');e(n).each((function(){e(this).parent().hasClass("destroying")||(t=!0)})),t&&!e(this).hasClass("selected")?(e(this).addClass("selected"),pa(e(this))):(e('.card.combinable[data-id="'+a+'"]').addClass("combine-compatible"),Ze(e(this)))}else n&&Ze(e(this))})),e(document).on("click",".player-cards .card .play-card",(function(a){fa(e(this).parent())})),e(document).on("click",".card.retainable",(function(a){sa(e(this))})),e(document).on("click",".card.discardable",(function(a){e("body").hasClass("destroying")||oa(e(this))})),e(document).on("click",".card.destroyable",(function(a){da(e(this))})),e(document).on("click",".monster.clickable",(function(a){fa(e(".card.selected"),e(this))})),e(document).on("click",".monster.candy-target",(function(a){e(".monster").removeClass("candy-target"),je(e(".candy.selected").data("guid"),e(this)),e(".candy.selected").remove()})),e(document).on("click",".draw-card:not(.disabled)",(function(e){D.cardsDrawn+=1,$e("draw")})),e(document).on("click",".draw-all:not(.disabled)",(function(e){!async function(){for(let e=T.speed.current;e>0;e--)D.cardsDrawn+=1,$e("draw"),await B.wait(D.animationGap)}()})),e(document).on("click",".library",(function(a){var t;D.playsounds&&ee.play("viewCards"),e(".library-panel, .library-loader").addClass("shown"),(t=jQuery.Deferred(),setTimeout((function(){t.resolve(),ce()}),100),t).done((function(){e(".library-loader").removeClass("shown")})).fail((function(){console.log("Failed to load card library.")}))})),e(document).on("click",".all-cards",(function(e){le()})),e(document).on("click",".draw-cards",(function(e){me()})),e(document).on("click",".discard-cards",(function(e){ue()})),e(document).on("click",".dead-cards",(function(e){he()})),e(document).on("click",".draw-cards-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),D.toPick=0,e(".draw-cards-panel").removeClass("shown"),e(".draw-cards-panel .card").removeClass("pickable"),e(".draw-cards-panel .message").html(""),e(".draw-cards").removeClass("disabled")})),e(document).on("click",".discard-cards-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),D.toPick=0,e(".discard-cards-panel").removeClass("shown"),e(".discard-cards-panel .card").removeClass("pickable"),e(".discard-cards-panel .message").html("")})),e(document).on("click",".dead-cards-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),D.toPick=0,e(".dead-cards-panel").removeClass("shown"),e(".dead-cards-panel .card").removeClass("pickable"),e(".dead-cards-panel .message").html("")})),e(document).on("click",".choose-cards-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),D.toPick=0,e(".choose-cards-panel").removeClass("shown"),e(".choose-cards-panel .card").removeClass("pickable"),e(".choose-cards-panel .message").html(""),F.chooseCards=[]})),e(document).on("click",".all-cards-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),e(".all-cards-panel").removeClass("shown")})),e(document).on("click",".library-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),e(".library-panel").removeClass("shown")})),e(document).on("click",".trade-cards-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),e(".trade-cards-panel").removeClass("shown")})),e(document).on("click",".armory-panel .done",(function(a){D.playsounds&&ee.play("doneCards"),e(".armory-panel").removeClass("shown")})),e(document).on("click",".trade-cards-panel .view-armory",(function(e){ye()})),e(document).on("click",".library-panel .card",(function(a){D.debug&&(D.playsounds&&ee.play("drawCard"),Je(e(this).data("id")))})),e(document).on("click",".library-panel .library-treasures .treasure",(function(a){D.debug&&(D.playsounds&&ee.play("drawCard"),Ke(e(this).data("id")))})),e(document).on("click",".draw-cards-panel .pickable",(function(a){D.toPick-=1,$e("drawCards",e(this)),D.toPick<1&&(e(".draw-cards-panel").removeClass("shown"),e(".draw-cards-panel .card").removeClass("pickable"),e(".draw-cards-panel .message").html(""),e(".draw-cards").removeClass("disabled"))})),e(document).on("click",".discard-cards-panel .pickable",(function(a){D.toPick-=1,$e("discardCards",e(this)),D.toPick<1&&(e(".discard-cards-panel").removeClass("shown"),e(".discard-cards-panel .card").removeClass("pickable"),e(".discard-cards-panel .message").html(""))})),e(document).on("click",".dead-cards-panel .pickable",(function(a){D.toPick-=1,$e("deadCards",e(this)),0==D.toPick&&(e(".dead-cards-panel").removeClass("shown"),e(".dead-cards-panel .card").removeClass("pickable"),e(".dead-cards-panel .message").html(""))})),e(document).on("click",".choose-cards-panel .pickable",(function(a){D.toPick-=1,e(this).hasClass("deck")?Je(e(this).attr("data-id")):$e("chooseCards",e(this),D.toPile),0==D.toPick&&(e(".choose-cards-panel").removeClass("shown"),e(".choose-cards-panel .card").removeClass("pickable"),e(".choose-cards-panel .message").html(""),F.chooseCards=[])})),e(document).on("click",".choose-cards-panel .transmutable",(function(a){if(e(this).hasClass("selected")){e(this).removeClass("selected"),D.toPick+=1;let a=e(this).data("guid");D.toTransmute=D.toTransmute.filter((e=>e.guid!==a))}else if(D.toPick>0){e(this).addClass("selected"),D.toPick-=1;let a=q.cards;D.combatEndedFlag||(a=F.allCards(F));let t=B.getCardByGuid(e(this).data("guid"),a);D.toTransmute.push(t)}})),e(document).on("click",".choose-cards-panel .done.transmute",(function(e){ha()})),e(document).on("click",".choose-cards-panel .removable",(function(a){e(this).hasClass("selected")?(e(this).removeClass("selected"),D.toPick+=1):(e(this).addClass("selected"),D.toPick-=1,0==D.toPick&&(D.playsounds&&ee.play("buyItem"),Xe(e(this).data("guid")),e(".choose-cards-panel").removeClass("shown"),e(".choose-cards-panel .card").removeClass("pickable"),e(".choose-cards-panel .message").html("")))})),e(document).on("click",".retain-done",(function(e){Le(!1)})),e(document).on("click",".discard-done",(function(e){la()})),e(document).on("click",".destroy-done",(function(e){ma()})),e(document).on("click",".fountain-drink",(function(a){Fe(T,e(this).attr("data-amount")),Da(e(this).attr("data-armor"),T),e(".magic-fountain").removeClass("shown")})),e(document).on("click",".fountain-bathe",(function(a){Sa([{action:"stat",what:"health",key:"max",value:parseFloat(e(this).attr("data-amount"))}]),Fe(T,e(this).attr("data-amount")),e(".magic-fountain").removeClass("shown")})),e(document).on("click",".fountain-search",(function(e){Oe("shard")})),e(document).on("click",".fountain-frolic",(function(a){Ie(e(this).attr("data-amount")),e(".magic-fountain").removeClass("shown")})),e(document).on("click",".fountain-skip",(function(a){e(".magic-fountain").removeClass("shown")})),e(document).on("click",".quest-options .button",(function(a){$a(e(this))})),e(document).on("click",'.quest-options .button[data-option="leave"]',(function(a){e(".quest-screen").removeClass("shown"),e(".quest-options").empty()})),e(document).on("click",".courage-items .treasure:not(.too-expensive)",(function(){!function(e){D.playsounds&&ee.play("buyItem"),Ke(e);let a=B.getTreasureById(e,I.treasures);T.courage-=a.courage,We()}(e(this).attr("data-id")),e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).remove().dequeue()}))})),e(document).on("click",".courage-items .candy:not(.too-expensive)",(function(){(function(e){let a=!1;if(T.candies.length<3){D.playsounds&&ee.play("buyItem"),Ne(e);let t=B.getCandyById(e,I.candies);T.courage-=t.courage,We(),a=!0}return a})(e(this).attr("data-id"))&&e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).remove().dequeue()}))})),e(document).on("click",".courage-cards .card:not(.too-expensive)",(function(){D.playsounds&&ee.play("drawCard"),Ve(e(this).attr("data-id")),e(this).addClass("disappearing").delay(1e3).queue((function(){e(this).parent().remove().dequeue()}))})),e(document).on("click",".courage-remove:not(.too-expensive)",(function(){le(),e(".all-cards-panel .card").addClass("clickable")})),e(document).on("click",".courage-gamble",(function(){e(".courage-gamble").removeClass("shown"),Sa([{action:"addCard",value:1,type:"any",to:"deck",permanent:!0}])})),e(document).on("click",".courage-trade:not(.too-expensive)",(function(){be(),e(".trade-cards-panel .card").addClass("clickable")})),e(document).on("click",".all-cards-panel .card.clickable",(function(){let a=e(this).attr("data-guid"),t=D.removeCardCost;D.removeCardCost+=1,Xe(a,t),e(".courage-remove").data("amount",D.removeCardCost).attr("data-amount",D.removeCardCost),e(".courage-remove span").html(D.removeCardCost),e(this).addClass("disappearing").delay(1e3).queue((function(){e(".all-cards-panel").removeClass("shown"),e(this).parent().remove().dequeue()}))})),e(document).on("click",".trade-cards-panel .card.clickable",(function(){if(e("body").hasClass("trading")){e(".trade-cards-panel").addClass("disabled"),e("body").removeClass("trading"),e(".trade-cards-panel .done").addClass("shown"),Je(e(this).attr("data-id"));let a=D.tradeCardCost;D.tradeCardCost<32&&(D.tradeCardCost*=2),T.courage-=a,e(".courage-trade").data("amount",D.tradeCardCost).attr("data-amount",D.tradeCardCost),e(".courage-trade span").html(D.tradeCardCost),D.playsounds&&ee.play("trade"),We(),D.toShow=[],D.tradeExpired=!0,e(this).addClass("disappearing").delay(500).queue((function(){e(".trade-cards-panel").removeClass("shown"),T.guild_member.enabled&&q.getTradeableCards()||e(".courage-trade").removeClass("shown"),e(this).parent().remove().dequeue(),e(".trade-cards-panel").removeClass("disabled")}))}else{e(".trade-cards-panel .message").html("Choose what you want to receive for your trade."),e("body").addClass("trading"),e(".trade-cards-panel .done").removeClass("shown");let a=e(this).attr("data-guid"),t=B.getCardByGuid(a,q.cards);Xe(a),e(".trade-cards-panel .cards").empty();for(let e=0;e<t.trade.length;e++){let a=B.getCardById(t.trade[e],b().cards),n=q.buildDescription(a);a.desc=n;let r=q.buildSlotsDescription(a);a.slotDesc=r,B.appendCard(a,".trade-cards-panel .cards"),D.toShow.push(a)}e(".trade-cards-panel .card").addClass("clickable")}})),e(document).on("click",".courage-done",(function(a){e(".courage-screen").removeClass("shown"),e(".courage-items, .courage-cards").empty(),e(".courage-remove").removeClass("too-expensive"),e(".courage-trade").removeClass("too-expensive")})),e(document).on("click",".loot-items .treasure",(function(a){e(".loot-items .treasure").remove()})),e(document).on("click",".loot-done",(function(a){e(".loot-screen").removeClass("shown"),e(".magic-fountain").removeClass("shown"),e(".loot-items").empty(),"ice_gate"==D.mapType||"fire_gate"==D.mapType?1==D.map||2==D.map?(2==D.map&&e(".gate-screen .message").html("You have beaten the second Guardian, but your journey continues..."),He()):Ue("victory"):"arena"!=D.mapType&&"normal"!=D.mapType||ze()})),e(document).on("click",".gate-done",(function(e){2==D.map?ne():re()})),e(document).on("click",".play-again",(function(e){location.reload()}))})),$("#curve")[0];let ea={x:0,y:0},aa={x:0,y:0},ta=null;function na(){ea={x:0,y:0},aa={x:0,y:0},$("#curve, #arrow").removeClass("shown")}function ra(){var e=parseFloat(ea.x),a=parseFloat(ea.y),t=parseFloat(aa.x),n=parseFloat(aa.y),r=.5*(t+e),i=.5*(n+a),s=Math.atan2(n-a,t-e)-Math.PI/2,o=r+90*Math.cos(s),d=i+90*Math.sin(s),l=document.getElementById("cp");l.setAttribute("cx",o),l.setAttribute("cy",d);var c="M"+e+" "+a+" Q "+o+" "+d+" "+t+" "+n;document.getElementById("curve").setAttribute("d",c);var m=document.getElementById("arrow");m.setAttribute("x",t-40),m.setAttribute("y",n-40)}function ia(e){aa=e,ra()}function sa(e){let a=B.getCardByGuid(e.data("guid"),F.handCards);e.hasClass("retain")?(e.removeClass("retain"),a.tempRetain=!1):$(".card.retain").length<T.retain.current&&(e.addClass("retain"),a.tempRetain=!0)}function oa(e){e.hasClass("discard")?(e.removeClass("discard"),$(".discard-done").removeClass("shown")):$(".card.discard").length<D.toDiscard&&(e.addClass("discard"),$(".discard-done").removeClass("shown"),0!=$(".player-cards .card:not(.discard)").length&&$(".card.discard").length!=D.toDiscard||$(".discard-done").addClass("shown"))}function da(e){e.hasClass("destroy")?(e.removeClass("destroy"),D.destroyOptional||$(".destroy-done").removeClass("shown")):$(".card.destroy").length<D.toDestroy&&(e.addClass("destroy"),D.destroyOptional||$(".destroy-done").removeClass("shown"),0!=$(".player-cards .card:not(.destroy)").length&&$(".card.destroy").length!=D.toDestroy||$(".destroy-done").addClass("shown"))}async function la(){$(".card.discard").each((async function(e){await ca($(this))})).promise().done((function(){$("body").removeClass("discarding"),$(".discard-done").removeClass("shown"),$(".card").removeClass("discard discardable"),$(".discard-message").removeClass("shown"),T.speed.current>0&&$(".draw-card, .draw-all").removeClass("disabled"),D.toDiscard=0,F.updateCardPlayability(T,F),se(),$("body").hasClass("destroying")&&0!=F.handCards.length||($("body").removeClass("selecting"),$(".destroy-message").removeClass("shown"))}))}async function ca(e){let a=B.getCardByGuid(e.data("guid"),F.handCards);null!=a&&(F.discardCard(a,F),T.preserve.current>0&&Ra(T.preserve.current,T),await wa(a,!1,"discard"),se())}async function ma(){$(".card.destroy").each((async function(e){await ua($(this))})).promise().done((function(){$("body").removeClass("destroying"),$(".destroy-done").removeClass("shown"),$(".card").removeClass("destroy destroyable"),$(".destroy-message").removeClass("shown"),T.speed.current>0&&$(".draw-card, .draw-all").removeClass("disabled"),D.toDestroy=0,D.destroyOptional=!1,F.updateCardPlayability(T,F),se(),$("body").hasClass("discarding")&&0!=F.handCards.length||($("body").removeClass("selecting"),$(".discard-message").removeClass("shown"))}))}async function ua(e){let a=B.getCardByGuid(e.data("guid"),F.handCards);if(F.destroyCard(a,F),T.ward.current>0&&Ra(T.ward.current,T),await wa(a,!1,"destroy"),T.replenish?.current>0){let e=[{action:"draw",value:T.replenish.current}];await Sa(e)}se()}function ha(){if(F.transmuteCards(F,q,T))for(let e=0;e<D.toTransmute.length;e++)Xe(D.toTransmute[e].guid);D.toTransmute=[],$(".choose-cards-panel").removeClass("shown"),$(".choose-cards-panel .card").removeClass("pickable"),$(".choose-cards-panel .message").html(""),$(".choose-cards-panel .cards").empty(),$(".choose-cards-panel .done").show(),$(".choose-cards-panel .done").removeClass("transmute")}function ga(e=0){let a=D.attackCardsPlayed+T.rowdy.current;a>100&&(a=100),D.critChance=a;let t=e>0&&"+"+e;t&&D.statusAnimations({data:'<span class="crit-text">'+t+"</span>",to:".aggro-amount",hex:!1})}function pa(e){$(".card.combinable.selected").each((function(){let e=B.getCardByGuid($(this).data("guid"),F.handCards);D.combinedAge+=Number(e.age)})).promise().done((function(){fa(e,void 0,"combine",!1),T.fend.current>0&&Ra(T.fend.current,T),$(".card.combinable.selected").each((function(){let e=B.getCardByGuid($(this).data("guid"),F.handCards);F.destroyCard(e,F,!0),wa(e,!1,"vanishes"),D.playsounds&&ee.play("combineCards")})).promise().done((function(){$(".card.combinable").removeClass("combine-compatible"),D.combinedAge=0,se()}))}))}async function fa(e,a=void 0,t=!1,n=!0){$("body").removeClass("discarding selecting destroying"),$(".monster").removeClass("clickable"),$(".crit").removeClass("shown"),e.removeClass("selected playable").addClass("playing"),na();let r=B.getCardByGuid(e.data("guid"),F.handCards),i=B.getCardByGuid(e.data("guid"),q.cards);if(null==r)return!1;r.playing=!0;let s=r.sound?r.sound:r.type+"Card";D.playsounds&&ee.play(s);let o=!1;if(null!=a&&"all"!==r.target)if("random"==a){let e=D.currentMonsters.filter((e=>0==e.dead));o=[B.randFromArray(e)]}else o=D.currentMonsters.filter((e=>e.guid==a.data("guid")));let d=B.getCardAttribute(r,"mana"),l=1;B.getShardNum(r,"any"),"?"==d&&n&&(l=T.mana.current,T.mystery.current>0&&(l+=T.mystery.current)),"?"==d&&n?T.mana.current=0:n&&(T.mana.current-=d),T.mana.current<=0&&(T.mana.current=0),T.speed.current<=0&&(T.speed.current=0),T.antimomentumAmount>0&&await Ya(T.antimomentumAmount,a,[T]),T.marked.current>0&&await Ya(T.marked.current,a,[T],!1,!1,!1,!1,!1,!1);for(let e=0;e<D.currentMonsters.length;e++)D.currentMonsters[e].marked.current>0&&await Ya(D.currentMonsters[e].marked.current,T,[D.currentMonsters[e]],!1,!1,!1,!1,!1,!1),Y.updateMonsterStats(D.currentMonsters[e]);T.insulate.current>0&&Ra(T.insulate.current,T),await wa(r,o,t,l,!0),"attack"==r.type&&(T.momentumAmount+=T.momentum.current),T.antimomentumAmount+=T.antimomentum.current;let c=B.getCardAttribute(r,"linger"),m=B.getCardAttribute(r,"breakable"),u=B.getCardAttribute(r,"use");if(function(e){let a=B.getCardAttribute(e,"vanish"),t=B.getCardAttribute(e,"use"),n=B.getCardAttribute(e,"breakable");return a||0==t||n&&0==t}(r)){let a=!1;if(m&&(Xe(e.data("guid")),a=!0),"combine"==t&&(a=!0),F.destroyCard(r,F,a),await wa(r,!1,"vanishes"),T.replenish?.current>0){let e=[{action:"draw",value:T.replenish.current}];await Sa(e)}}else!function(e){return"ability"==B.getCardAttribute(e,"type")}(r)?c<1&&F.discardCard(r,F,"played"):F.activateCard(r,F);if(u>0&&(u-=1,ya(r,"use",1),m&&(null==i?(r.use-=1,r.shardUpgrades.use-=1):(i.use-=1,i.shardUpgrades.use-=1))),c>0&&(c-=1,ya(r,"linger",1)),"ability"==r.type&&T.bless.enabled){let e=[];for(let a=0;a<F.handCards.length;a++)B.getCardAttribute(F.handCards[a],"mana")>0&&e.push(F.handCards[a]);let a=B.randFromArray(e);console.log("tried to bless",a),null!=a&&(a.mana=0,null!=a.shardUpgrades.mana&&(a.shardUpgrades.mana=0),null!=a.bothShardUpgrades.mana&&(a.bothShardUpgrades.mana=0),null!=a.iceShardUpgrades.mana&&(a.iceShardUpgrades.mana=0),null!=a.fireShardUpgrades.mana&&(a.fireShardUpgrades.mana=0),oe("handCards"))}F.updateCardPlayability(T,F),e.removeClass("playing"),r.playing=!1,T.speed.current>0&&F.handCards.length<10&&$(".draw-card, .draw-all").removeClass("disabled"),Y.updateStatusBar(),"attack"==r.type&&Se("attackCardsPlayed"),"tool"==r.type&&Se("toolCardsPlayed"),"magic"==r.type&&Se("magicCardsPlayed"),Se("cardsPlayed"),se(),"attack"==r.type&&ga(1),Ge()}function ya(e,a,t){let n=a+"_2";null!=e[a]&&(e[a]-=t),null!=e.shardUpgrades[a]&&(e.shardUpgrades[a]-=t),null!=e.iceShardUpgrades[a]&&(e.iceShardUpgrades[a]-=t),null!=e.iceShardUpgrades[n]&&(e.iceShardUpgrades[n]-=t),null!=e.fireShardUpgrades[a]&&(e.fireShardUpgrades[a]-=t),null!=e.fireShardUpgrades[n]&&(e.fireShardUpgrades[n]-=t),null!=e.bothShardUpgrades[a]&&(e.bothShardUpgrades[a]-=t)}async function wa(e,a,t,n=1,r=!1){let i=D.currentMonsters.filter((e=>0==e.dead)),s=a;if(0==s||null==s){let n=B.getCardAttribute(e,"target",t);0!=n&&null!=n?(s=n,"all"==s?(s=i,a=i):"player"==s?(a=[T],s=void 0):s=B.shuffle(i)):(s=B.shuffle(i),a=[T])}let o=B.getCardAttribute(e,"blk",t);await va(o,n,e,r);let d=B.getCardAttribute(e,"armor",t);await Ca(d,n,e,r);let l=B.getCardAttribute(e,"dmg",t);if(await ba(l,s,n,e,t,r),Y.allDead())return;let c=B.getCardAttribute(e,"effects",t);await ka(c,a,n,e,r);let m=B.getCardAttribute(e,"abilities",t);await xa(m,a,e,r);let u=B.getCardAttribute(e,"magic",t);await _a(u,n,e,r);let h=B.getCardAttribute(e,"actions",t);if(await Sa(h,s,n,e,r),r&&B.hasAttribute(e,T.stance)){await B.wait(300),D.playsounds&&ee.play(T.stance+"Amount"),D.statusAnimations({data:'<span class="'+T.stance+'-text">'+T.stance+"</span> Effect",to:".stance-text",hex:!1});let i=B.getCardAttribute(e,"dmg",T.stance);await ba(i,s,n,e,t,r);let o=B.getCardAttribute(e,"blk",T.stance);await va(o,n,e,r);let d=B.getCardAttribute(e,"armor",T.stance);await Ca(d,n,e,r);let l=B.getCardAttribute(e,"effects",T.stance);await ka(l,a,n,e,r);let c=B.getCardAttribute(e,"abilities",T.stance);await xa(c,a,e,r);let m=B.getCardAttribute(e,"magic",T.stance);await _a(m,n,e,r);let u=B.getCardAttribute(e,"actions",T.stance);await Sa(u,!1,n,e,r)}F.updateCardPlayability(T,F)}async function ba(e,a,t,n=!1,r=!1,i=!1){if(e.length)for(let s=0;s<t;s++)for(let t=0;t<e.length;t++){let s="draw"!=r&&"discard"!=r&&"destroy"!=r&&B.chance(D.critChance),o=e[t];if(a){let e=!1;if("attack"==n.type&&"draw"!=r&&"discard"!=r&&"destroy"!=r&&(T.explode?.enabled&&(o*=2,T.explode.turns-=1,T.explode.turns<1&&(T.explode.enabled=!1)),T.fatality.current>0&&D.highestDmgRoll*T.fatality.current>o&&(e=!0,o=D.highestDmgRoll*T.fatality.current,T.fatality.turns>0))){T.fatality.turns-=1;let e=T.fatality.turns,a=null!=T.fatality.temp[e]?T.fatality.temp[e]:0;a>0&&(T.fatality.current-=a,T.fatality.temp.splice(e,1))}for(let t=0;t<a.length;t++)if(n.age>0&&(1==T.wisdom.current||e?o+=n.age:o+=Math.round(n.age*T.wisdom.current)),await Ga(a[t],o,e,!1,s,i),s?(D.attackCardsPlayed=0,$(".crit").addClass("shown"),D.playsounds&&ee.play("attack23")):D.attackCardsPlayed+=1,Y.allDead())return await B.wait(800),void qe()}else await Ma(!1,e[t]);await B.wait(D.animationDmg),ga()}}async function va(e,a,t=!1,n=!1){if(e.length)for(let n=0;n<a;n++)for(let a=0;a<e.length;a++)t.age>0&&(1!=T.wisdom.current?e[a]+=Math.round(t.age*T.wisdom.current):e[a]+=t.age),Ra(e[a],T),await B.wait(D.animationGap)}async function Ca(e,a=1,t=!1,n=!1){if(e.length)for(let n=0;n<a;n++)for(let a=0;a<e.length;a++)t.age>0&&(1!=T.wisdom.current?e[a]+=Math.round(t.age*T.wisdom.current):e[a]+=t.age),Da(e[a],T),await B.wait(D.animationGap)}async function ka(e,a=!1,t=1,n=!1,r=!1){if(null!=e)for(let n=0;n<t;n++)for(let t=0;t<e.length;t++)for(let n=0;n<a.length;n++){let r=T;if(e[t].hex&&a[n])r=a[n];else if(e[t].hex){let e=D.currentMonsters.filter((e=>0==e.dead));r=B.shuffle(e),r=r[0]}let i=null==e[t].turns?-1:e[t].turns;Te(e[t],r,i),await B.wait(D.animationGap)}}async function xa(e,a=!1,t=!1,n=!1){if(null!=e)for(let n=0;n<e.length;n++)for(let r=0;r<a.length;r++){let i=T,s=void 0!==e[n].target?e[n].target:"monster",o=null==e[n].turns?-1:e[n].turns;if(e[n].hex&&a[r])i=a[r],o=0;else if(e[n].hex){let e=D.currentMonsters.filter((e=>0==e.dead));i=B.shuffle(e),i=i[0],o=0}else a[r]&&"monster"==t.target&&"monster"==s&&(i=a[r]);Pe(e[n],i,o),await B.wait(D.animationGap)}}async function _a(e,a,t=!1,n=!1){if(e.length)for(let n=0;n<a;n++)for(let a=0;a<e.length;a++)t.age>0&&(1!=T.wisdom.current?e[a].amount+=Math.round(t.age*T.wisdom.current):e[a].amount+=t.age),La(e[a],T),await B.wait(D.animationGap),se()}async function Sa(e,a=!1,t=1,n=!1,r=!1){let i=!0;if(null!=e)for(let o=0;o<t;o++)for(let t=0;t<e.length;t++){let o=D.actions.find((({id:a})=>a===e[t].action));switch(void 0!==o&&D.playsounds&&void 0!==o.sound&&ee.play(o.sound),e[t].action){case"addCard":{let a=void 0!==e[t].hex&&e[t].hex;if(T.vex.current>0&&a){T.vex.current-=1,D.playsounds&&ee.play("vex");break}D.toShow=[];let r="",i={},s={},o=[],d=null!=e[t].modifiers?e[t].modifiers:{},l=null!=e[t].with?e[t].with:[];$(".player-panel .standard-message").html("").removeClass("shown");let c=D.actions.find((({id:a})=>a===e[t].action)),m=!!c.sound&&c.sound;D.playsounds&&m&&ee.play(m),null!=e[t].what?r=e[t].what:null!=e[t].type?o=null!=e[t].tier?"any"==e[t].type?b().cards.filter((a=>1==a.addable&&a.tier==e[t].tier)):"converter"==e[t].type||"bottled"==e[t].type?b().cards.filter((a=>a.type==e[t].type&&a.tier==e[t].tier)):"weapon"==e[t].type?b().cards.filter((a=>1==a.weapon&&a.tier==e[t].tier)):b().cards.filter((a=>a.type==e[t].type&&a.tier==e[t].tier&&1==a.addable)):"any"==e[t].type?b().cards.filter((e=>1==e.addable)):"converter"==e[t].type||"bottled"==e[t].type||"clutter"==e[t].type?b().cards.filter((a=>a.type==e[t].type)):"weapon"==e[t].type?b().cards.filter((e=>1==e.weapon)):b().cards.filter((a=>a.type==e[t].type&&1==a.addable)):null!=e[t].tier&&(o=b().cards.filter((a=>1==a.addable&&a.tier==e[t].tier))),o=o.filter((e=>"basic"==e.pack||e.pack==D.boosterPack)),"weapon"!=e[t].type&&(o=o.filter((e=>"legendary"!=e.tier)));for(let a=0;a<e[t].value;a++)if(s=B.randFromArray(o),o=o.filter((e=>e.id!==s.id)),i=r,""==r&&(i=s.id),null!=e[t].select){if(s=F.initCard(s,d),F.chooseCards.push(s),D.toPile=e[t].to,l.length>0)for(let e=0;e<l.length;e++)q.attachShard(s,l[e])}else{d.age=D.combinedAge;let a=B.randString();if("deck"!=e[t].to&&F.addCard(i,F,e[t].to,T,l,a,n,d),e[t].permanent&&q.addCard(i,a),s=B.getCardById(i,b().cards),null!=s){let e=q.buildDescription(s);s.desc=e,D.toShow.push(s)}}F.chooseCards.length>0&&null!=e[t].select?(D.toPick=e[t].select,ge(B.sort(F.chooseCards))):q.showModifiedCards(F,T,!0);break}case"remove":D.toPick=e[t].select,(s=q.cards).length>0&&(D.toPick>s.length&&(D.toPick=s.length),ge(s,"removable"));break;case"ensharden":{D.toPick=e[t].select,D.toPile=e[t].from,D.toShow=[];var s=[];let a=e[t].type,r=a;s="handCards"==e[t].from?n?F.handCards.filter((e=>e.guid!==n.guid)):F.handCards:"drawCards"==e[t].from?F.drawCards:"discardCards"==e[t].from?F.discardCards:"deck"==e[t].from?q.cards:F.allLiveCards(F);let i=q.numOpenSlots(s);for(let e=0;e<s.length;e++)q.hasOpenSlot(s[e])&&(B.appendCard(s[e],".shard-cards-panel .cards"),F.chooseCards.push(s[e]));if(F.chooseCards.length>0)if(e[t].random){let e=D.toPick;e<0&&(e=q.numOpenSlots(F.chooseCards));for(let t=0;t<e;t++){"random"==a&&(r=B.randFromArray(I.shards),r=r.id);let e=B.randFromArray(F.chooseCards);null!=e&&(D.playsounds&&ee.play("attachShard"),q.attachShard(e,r),D.toShow.push(e),q.hasOpenSlot(e)||(F.chooseCards=F.chooseCards.filter((a=>a.guid!==e.guid))))}oe(D.toPile)}else D.toPick>i&&(D.toPick=i),i>0&&we(a,F.chooseCards);q.showModifiedCards(F,T,!0);break}case"draw":for(let a=0;a<e[t].value;a++)$e("draw",null,"handCards",!0,r);break;case"discard":if(F.handCards.length>1)if(D.autoplay)for(let a=0;a<e[t].value;a++){let e=F.handCards;e=e.filter((e=>0==e.playing));let a=B.randFromArray(e);if(void 0!==a){let e=B.getDomCardByGuid(a.guid);await ca(e)}}else $(".discard-message").html("choose cards to <span>discard</span>").addClass("shown"),$(".player-cards .card").addClass("discardable").removeClass("playable"),$(".draw-card, .draw-all").addClass("disabled"),$("body").addClass("discarding selecting"),D.toDiscard=e[t].value,i=!1;break;case"destroy":if(F.handCards.length>1)if(D.autoplay)for(let a=0;a<e[t].value;a++){let e=F.handCards;e=e.filter((e=>0==e.playing));let a=B.randFromArray(e);if(void 0!==a){let e=B.getDomCardByGuid(a.guid);await ua(e)}}else $(".destroy-message").html("choose cards to <span>destroy</span>").addClass("shown"),e[t].optional&&(D.destroyOptional=!0,$(".destroy-done").addClass("shown")),$(".player-cards .card").addClass("destroyable").removeClass("playable"),$(".draw-card, .draw-all").addClass("disabled"),$("body").addClass("destroying selecting"),D.toDestroy=e[t].value,i=!1;break;case"transmute":if(D.toPick=e[t].select,D.fromPile=e[t].from,D.autoplay){for(let a=0;a<e[t].select;a++){let e=F.handCards;e=e.filter((e=>0==e.playing));let a=B.randFromArray(e);void 0!==a&&D.toTransmute.push(a)}ha()}else $(".choose-cards-panel .message").html("choose cards to transmute").addClass("shown"),s=[],(s="handCards"==e[t].from?n?F.handCards.filter((e=>e.guid!==n.guid)):F.handCards:"drawCards"==e[t].from?F.drawCards:"discardCards"==e[t].from?F.discardCards:q.cards).length>0&&(D.toPick>s.length&&(D.toPick=s.length),ge(s,"transmutable"),$(".choose-cards-panel .done").addClass("transmute"));break;case"findDrawCard":if(F.drawCards.length>0)if(D.autoplay)for(let a=0;a<e[t].value;a++){me(),await B.wait(500);let e=$(".draw-cards-panel .card");e.length>0&&$e("drawCards",$(B.randFromArray(e))),$(".draw-cards-panel").removeClass("shown"),$(".draw-cards-panel .card").removeClass("pickable"),$(".draw-cards-panel .message").html(""),await B.wait(250)}else D.toPick=e[t].value,me(),$(".draw-cards-panel .card").addClass("pickable"),$(".draw-cards-panel .message").html("Add cards to your hand"),$(".draw-cards").addClass("disabled");break;case"findDiscardCard":if(F.discardCards.length>0)if(D.autoplay)for(let a=0;a<e[t].value;a++){ue(),await B.wait(500);let e=$(".discard-cards-panel .card");e.length>0&&$e("discardCards",$(B.randFromArray(e))),$(".discard-cards-panel").removeClass("shown"),$(".discard-cards-panel .card").removeClass("pickable"),$(".discard-cards-panel .message").html(""),await B.wait(250)}else D.toPick=e[t].value,ue(),$(".discard-cards-panel .card").addClass("pickable"),$(".discard-cards-panel .message").html("Add cards to your hand");break;case"findDeadCard":if(F.deadCards.length>0)if(D.autoplay)for(let a=0;a<e[t].value;a++){he(),await B.wait(500);let e=$(".dead-cards-panel .card");e.length>0&&$e("deadCards",$(B.randFromArray(e))),$(".dead-cards-panel").removeClass("shown"),$(".dead-cards-panel .card").removeClass("pickable"),$(".dead-cards-panel .message").html(""),await B.wait(250)}else D.toPick=e[t].value,he(),$(".dead-cards-panel .card").addClass("pickable"),$(".dead-cards-panel .message").html("Add cards to your hand");break;case"stat":{let a=e[t].key,r=e[t].what,i=e[t].value,s=void 0===e[t].additive||e[t].additive,o=void 0!==e[t].hex&&e[t].hex;if(T.vex.current>0&&o){T.vex.current-=1,D.playsounds&&ee.play("vex");break}"double"===i&&(i=T[r][a],("punch"===r||"thunder"===r)&&i>1&&(i-=1)),n&&"health"==r&&"current"==a&&n.age>0&&(1!=T.wisdom.current?i+=Math.round(n.age*T.wisdom.current):i+=n.age),"stance"==r&&i!=T.stance&&("sparkle"==i?(T.might.base+=3,T.might.current+=3):"sparkle"==T.stance&&(T.might.base-=3,T.might.current-=3),T.shapeshifter.current>0&&Ra(T.shapeshifter.current,T)),"aura"==r&&T.aura.level>D.essences.length?r="mana":"sparkle"==r&&T.sparkle.level>D.essences.length?(r="health",i=5):"shimmer"==r&&T.shimmer.level>D.essences.length&&(r="speed",i=2),null==a?"courage"==r?(T[r]+=i,We()):T[r]=i:"type"==a?T[r][a]=i:("health"==r?"max"==a?T.health.max+=i:Fe(T,i):"courage"==r?Ie(i):"aura"!=r&&"sparkle"!=r&&"shimmer"!=r&&(s?T[r][a]+=i:T[r][a]=i,"mana"==r&&T.mana.current<0&&(T.mana.current=0)),"speed"==r&&i>0&&$(".draw-card, .draw-all").removeClass("disabled")),"rainbow"==r&&(T.rainbow.current,T.rainbow.max,La({type:T.rainbow.type,amount:0},T)),T.health.max<T.health.current&&(T.health.current=T.health.max),T.armor>T.health.current&&(T.armor=T.health.current),"aura"==r||"sparkle"==r||"shimmer"==r?xe(r,i):"rainbow"!=r&&D.playsounds&&(i>0?"courage"==r?ee.play("courage"):ee.play("statUp"):ee.play("statDown"));break}case"removeHexes":"player"==e[t].to?De(T):"self"==e[t].to&&De(a);break;case"removeBuffs":"player"==e[t].to?Me(T):"self"!=e[t].to&&"target"!=e[t].to||Me(a[0]);break;case"playOldest":{let e=F.getOldestPlayableCard(F.handCards,n);e&&fa(B.getDomCardByGuid(e.guid),"random",!1,!1);break}case"playHand":{let e=F.handCards;D.autoplay=!0,$("body, .map-inner").addClass("unavailable"),$("body").removeClass("combating");for(let a=0;a<e.length;a++)if(e[a].guid!=n.guid){let t=B.getDomCardByGuid(e[a].guid);await fa(t,"random",!1,!1),await B.wait(D.animationGap)}D.autoplay=!1,$("body, .map-inner").removeClass("unavailable"),$("body").addClass("combating");break}case"discardHand":{let e=F.handCards;D.autoplay=!0,$("body, .map-inner").addClass("unavailable"),$("body").removeClass("combating");for(let a=0;a<e.length;a++)if(e[a].guid!=n.guid){let t=B.getDomCardByGuid(e[a].guid);await ca(t),await B.wait(300)}D.autoplay=!1,$("body, .map-inner").removeClass("unavailable"),$("body").addClass("combating");break}case"destroyHand":{let e=F.handCards;D.autoplay=!0,$("body, .map-inner").addClass("unavailable"),$("body").removeClass("combating");for(let a=0;a<e.length;a++)if(e[a].guid!=n.guid){let t=B.getDomCardByGuid(e[a].guid);await ua(t),await B.wait(300)}D.autoplay=!1,$("body, .map-inner").removeClass("unavailable"),$("body").addClass("combating");break}case"summonMonster":{let a=void 0!==e[t].form&&e[t].form;if(e[t].what.constructor===Array)for(let n=0;n<e[t].value;n++){let r=D.round+"-"+n,i=B.randFromArray(e[t].what);Y.summonMonster(i,r,a),await B.wait(D.animationGap)}else if("random"==e[t].what)for(let n=0;n<e[t].value;n++){let r=D.round+"-"+n,i=Y.monsters.filter((e=>"normal"==e.category&&"ghost"!=e.breed&&e.context==D.overworld));void 0!==e[t].tier&&e[t].tier.constructor===Array&&(i=Y.monsters.filter((a=>"ghost"!=a.breed&&a.context==D.overworld&&e[t].tier.includes(a.tier))));let s=B.randFromArray(i);Y.summonMonster(s.id,r,a),await B.wait(D.animationGap)}else for(let n=0;n<e[t].value;n++){let r=D.round+"-"+n;Y.summonMonster(e[t].what,r,a),await B.wait(D.animationGap)}break}case"kill":"player"==e[t].to?Ta(T):"self"==e[t].to&&Ta(a);break;case"rainbowShield":Ra(Math.round(e[t].value*T.rainbow.max),T);break;case"chargedShield":Ra(Math.round(e[t].value*T.rainbow.current),T)}await B.wait(D.animationGap),se()}return i}async function $a(e){let a=D.currentQuest,t=a.id,n=e.attr("data-option"),r=B.getQuestSubOptions(a,n);switch(t){case"workshop":"quickness"==n?(Ke("artisanal_boots"),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()):"thickness"==n?(Ke("artisanal_chestplate"),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()):"strength"==n?(Ke("artisanal_sword"),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()):"wizardry"==n&&(Ke("artisanal_hat"),$(".quest-screen").removeClass("shown"),$(".quest-options").empty());break;case"oracle":if("simplicity"==n){let e=[{action:"remove",select:1,from:"allCards"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("metamorphosis"==n){let e=[{action:"transmute",select:1,from:"allCards"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("improvement"==n){let e=[{action:"ensharden",type:"random",select:1,from:"deck",random:!1}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"alchemy_lab":if("transform"==n){let e=[{action:"transmute",select:3,from:"allCards"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"midnight_glade":if("sleep"==n){let e=[{action:"remove",select:1,from:"allCards"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"midnight_meadow":if("sleep"==n){let e=[{action:"remove",select:1,from:"allCards"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"challenge":if("meet_challenge"==n)if(B.chance(75))Ie(3);else{let e=[{action:"stat",what:"health",key:"current",value:-3}];await Sa(e)}if("rematch"==n)if(B.chance(50))Ie(5);else{let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("final_battle"==n){if(B.chance(25))Ie(10);else{let e=[{action:"stat",what:"health",key:"current",value:-10}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"deep_well":if("wish_for_protection"==n)await Ca([35]),$(".quest-screen").removeClass("shown"),$(".quest-options").empty();else if("wish_for_healing"==n)Fe(T,25),$(".quest-screen").removeClass("shown"),$(".quest-options").empty();else if("wish_for_long_life"==n){let e=[{action:"stat",what:"health",key:"max",value:10}];await Sa(e),Fe(T,10),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"library":if("find_a_card"==n){let e=[{action:"addCard",select:1,value:20,type:"any",to:"deck"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"altar":if("minor_sacrifice"==n){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"current",value:-4}];await Sa(a)}else if("major_sacrifice"==n){let e=I.treasures.filter((e=>0==e.owned&&2==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"current",value:-12}];await Sa(a)}else if("ultimate_sacrifice"==n){let e=I.treasures.filter((e=>0==e.owned&&3==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"current",value:-21}];await Sa(a)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"reliquary":if("old_relic"==n){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"max",value:-2}];await Sa(a)}else if("ancient_relic"==n){let e=I.treasures.filter((e=>0==e.owned&&2==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"max",value:-5}];await Sa(a)}else if("primeval_relic"==n){let e=I.treasures.filter((e=>0==e.owned&&3==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"max",value:-9}];await Sa(a)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"oratory":if("pray"==n){let e=[{action:"stat",what:"health",key:"current",value:-15}];await Sa(e),Ie(5)}else if("meditate"==n){let e=[{action:"stat",what:"shimmer",key:"current",value:3},{action:"stat",what:"health",key:"current",value:-15}];await Sa(e)}else if("fast"==n){let e=[{action:"stat",what:"sparkle",key:"current",value:3},{action:"stat",what:"health",key:"current",value:-15}];await Sa(e)}else if("hold_vigil"==n){let e=[{action:"stat",what:"aura",key:"current",value:3},{action:"stat",what:"health",key:"current",value:-15}];await Sa(e)}else if("worship"==n){let e=[{action:"stat",what:"health",key:"max",value:10},{action:"stat",what:"health",key:"current",value:-15}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"dark_sanctuary":if("physical_blow"==n){let e=[{action:"stat",what:"health",key:"current",value:-12}];await Sa(e),Ee(-4)}else if("mental_blow"==n){let e=[{action:"stat",what:"health",key:"max",value:-5}];await Sa(e),Ee(-4)}else"spiritual_blow"==n&&(Ie(-4),Ee(-4));$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"bakery":"buy_1_candy"==n?Oe("candy",1):"buy_2_candies"==n?T.courage>1?(Ie(-1),Oe("candy",2)):Oe("candy",1):"buy_3_candies"==n&&(T.courage>2?(Ie(-2),Oe("candy",3)):T.courage>1?(Ie(-1),Oe("candy",2)):Oe("candy",1)),$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"mossy_pedestal":if("attack"==n){let e=[{action:"addCard",select:1,value:3,type:"attack",tier:"rare",to:"deck"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("tool"==n){let e=[{action:"addCard",select:1,value:3,type:"tool",tier:"rare",to:"deck"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("ability"==n){let e=[{action:"addCard",select:1,value:3,type:"ability",tier:"rare",to:"deck"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("magic"==n){let e=[{action:"addCard",select:1,value:3,type:"magic",tier:"rare",to:"deck"}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"three_trunks":"small_trunk"==n&&Ie(1),"medium_trunk"==n&&B.chance(66)&&Ie(4),"large_trunk"==n&&B.chance(33)&&Ie(9),$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"leap_of_faith":if("leap1"==n){if(B.chance(25)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap2"==n){if(B.chance(35)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap3"==n){if(B.chance(45)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap4"==n){if(B.chance(55)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap5"==n){if(B.chance(65)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap6"==n){if(B.chance(75)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap7"==n){if(B.chance(85)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap8"==n){if(B.chance(95)){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}let e=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(e)}if("leap9"==n){let e=I.treasures.filter((e=>0==e.owned&&1==e.tier));Ke(B.weightedRandom(e).id);let a=[{action:"stat",what:"health",key:"current",value:-5}];await Sa(a),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"stained_glass_mirror":if("see_color"==n){let e=[{action:"stat",what:"rainbow",key:"base",value:10}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("see_depth"==n){let e=[{action:"stat",what:"rainbow",key:"base",value:5},{action:"stat",what:"rainbow",key:"max",value:5}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("see_clarity"==n){let e=[{action:"stat",what:"rainbow",key:"base",value:5},{action:"stat",what:"rainbow",key:"max",value:-5}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"singing_cavern":if("look_around"==n){let e=[{action:"ensharden",type:"random",select:1,from:"deck",random:!1}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("go_deeper"==n){let e=[{action:"ensharden",type:"random",select:2,from:"deck",random:!1},{action:"stat",what:"health",key:"current",value:-5}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else if("fully_explore"==n){let e=[{action:"ensharden",type:"random",select:3,from:"deck",random:!1},{action:"stat",what:"health",key:"current",value:-15}];await Sa(e),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}break;case"lucky_spring":if("drink_a_draught"==n){let e=[{action:"ensharden",type:"random",select:2,from:"deck",random:!0}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"labyrinth":if("right3221"==n){if(B.chance(75)){let e=I.treasures.filter((e=>0==e.owned&&2==e.tier));Ke(B.weightedRandom(e).id),Oe("candy",3),Ie(9)}else{let e=[{action:"stat",what:"health",key:"current",value:-15}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}else"right1113"==n||"straight1211"==n||"straight1311"==n||"left2122"==n||"straight2213"==n||"right2312"==n||"straight3211"==n||"right3221"==n||"right3322"==n||"straight3331"==n?(Oe("candy",3),Ie(6),$(".quest-screen").removeClass("shown"),$(".quest-options").empty()):"left1113"!=n&&"left1222"!=n&&"left1211"!=n&&"left1233"!=n&&"straight1122"!=n&&"straight1132"!=n&&"straight1332"!=n&&"right1131"!=n&&"right1133"!=n&&"right1231"!=n&&"straight1221"!=n&&"straight1233"!=n&&"straight1332"!=n&&"right1121"!=n&&"right1133"!=n&&"right1233"!=n&&"straight1122"!=n&&"straight1231"!=n&&"straight1232"!=n&&"right1112"!=n&&"right1212"!=n&&"right1312"!=n&&"straight1132"!=n&&"straight1232"!=n&&"straight1331"!=n&&"left2111"!=n&&"left2123"!=n&&"left2131"!=n&&"right2121"!=n&&"right2123"!=n&&"right2133"!=n&&"left2211"!=n&&"left2223"!=n&&"left2233"!=n&&"right2213"!=n&&"right2223"!=n&&"right2233"!=n&&"straight2111"!=n&&"straight2131"!=n&&"straight2231"!=n&&"right2311"!=n&&"right2313"!=n&&"right2322"!=n&&"left2311"!=n&&"left2321"!=n&&"left2333"!=n&&"right2311"!=n&&"right2312"!=n&&"right2333"!=n&&"straight3111"!=n&&"straight3113"!=n&&"straight3211"!=n&&"right3122"!=n&&"right3123"!=n&&"right3131"!=n&&"left3111"!=n&&"left3112"!=n&&"left3113"!=n&&"right3211"!=n&&"right3212"!=n&&"right3213"!=n&&"left3221"!=n&&"left3232"!=n&&"left3233"!=n&&"right3311"!=n&&"right3312"!=n&&"right3313"!=n&&"straight3311"!=n&&"straight3321"!=n&&"straight3331"!=n&&"left3313"!=n&&"left3312"!=n&&"left3323"!=n&&"straight3322"!=n&&"straight3332"!=n&&"straight3333"!=n&&"right3321"!=n&&"right3322"!=n&&"right3333"!=n||(Oe("candy",1),Ie(3),$(".quest-screen").removeClass("shown"),$(".quest-options").empty());break;case"sudden_trap":"buy_your_way_out"==n&&Ie(-1),$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"the_liar":if("lose_1_shimmer"==n){let e=[{action:"stat",what:"shimmer",key:"current",value:-1}];await Sa(e)}if("lose_1_sparkle"==n){let e=[{action:"stat",what:"sparkle",key:"current",value:-1}];await Sa(e)}if("lose_1_aura"==n){let e=[{action:"stat",what:"aura",key:"current",value:-1}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"briar_patch":if("run_through"==n){let e=[{action:"stat",what:"health",key:"max",value:-3}];await Sa(e)}if("take_your_time"==n){let e=[{action:"stat",what:"health",key:"current",value:-9}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty();break;case"market_of_arms":if("accept_offer"==n){let e=[{action:"addCard",value:1,type:"weapon",to:"deck",permanent:!0},{action:"addCard",value:2,type:"clutter",to:"deck",permanent:!0}];await Sa(e)}$(".quest-screen").removeClass("shown"),$(".quest-options").empty()}if(r.options){$(".quest-options").empty();for(let e=0;e<r.options.length;e++)B.appendOption(r.options[e],".quest-options",t)}se(),await B.wait(D.animationGap)}async function Ga(e,a,t=!1,n=!1,r=!1,i=!0){!t&&i&&(a+=T.might.current,a*=T.punch.current),i&&(a+=T.momentumAmount),a=(a=Math.round(a))<0?0:a;let s=e.unreachable?.enabled,o=r&&!t?function(e,a=!1){let t=5;t+=T.mastery.current;let n=B.randIntFromInterval(t)/10+1,r=Math.round(e*n);r+=T.fierce.current;let i=a?"<strike>"+r+"</strike> 1":r;return $(".crit").addClass("shown").find("span").html(i),r}(a,s):a;await Ya(o,T,[e],!1,!1,t,n,r,i),Y.updateMonsterStats(e),Y.dying(e)&&D.playsounds&&ee.play("death"),Y.dead(e)&&B.removeMonster(e)}function Ra(e,a,t=!1){if(null!=a){let n=e;t||(n=e+a.solid.current),n>0&&(setTimeout((function(){D.playsounds&&ee.play("gainBlk")}),300),a.block+=n,a.block>999&&(a.block=999)),D.message(a.name+" ("+a.guid+") gains "+n+" block")}}async function La(e,a){let t=e.type;"aligned"==e.type?t=a.rainbow.type:"random"==e.type&&(t=B.randFromArray(["rainbow","chaos","dark","elemental"])),a.rainbow.max<0&&(a.rainbow.max=0),0==a.rainbow.current&&(a.rainbow.type=t);let n=Math.round(T.sorcery.current*(e.amount+T.conjure.current));n<0&&(n=0),a.rainbow.current+=n,t==a.rainbow.type&&"muddled"!=a.rainbow.type||(D.playsounds&&ee.play("muddleMagic"),a.rainbow.type="muddled",a.arcane.current>0&&(a.rainbow.current+=a.arcane.current));let r=2,i=3,s=2,o=10;a.amplify?.enabled&&(r*=2,i*=2,s*=2,o*=2);let d=D.currentMonsters.filter((e=>0==e.dead));if(a.magick?.enabled){if("rainbow"==a.rainbow.type)await Ya(r,void 0,d,!1,!1);else if("elemental"==a.rainbow.type)Ra(i,T);else if("dark"==a.rainbow.type)Da(s,T);else if("chaos"==a.rainbow.type){let e=[B.randFromArray(d)];await Ya(o,void 0,e,!1,!1)}for(let e=0;e<D.currentMonsters.length;e++)if(Y.updateMonsterStats(D.currentMonsters[e]),Y.dying(D.currentMonsters[e])&&D.playsounds&&ee.play("death"),Y.dead(D.currentMonsters[e])&&B.removeMonster(D.currentMonsters[e]),Y.allDead())return void qe()}a.rainbow.current>=a.rainbow.max&&a.rainbow.max>0?await Ba(t,a):a.enchanter.current>0&&(a.thunder.current+=a.enchanter.current/10),Aa(T),D.message(a.name+"("+a.guid+") applies "+n+" "+t+" magic")}function Aa(e){let a=B.getStatPercentage(e.rainbow.current,e.rainbow.max);a>100&&(a=100),a<0&&(a=0),a*=1.8;let t=e.rainbow.current<=e.rainbow.max?e.rainbow.current:e.rainbow.max;t=Math.round(t),$(".magic-rainbow .semi-circle--mask").css("transform","rotate("+a+"deg) translate3d(0, 0, 0)").removeClass("activated"),$(".magic-rainbow .rainbow-power-current").html(t),$(".magic-rainbow .rainbow-power-max").html(e.rainbow.max),$(".magic-rainbow").attr("data-type",e.rainbow.type),$(".magic-rainbow").removeClass("dark elemental rainbow chaos muddled").addClass(e.rainbow.type),$(".magic-rainbow .magic-type span").html(e.rainbow.type),$(".magic-rainbow .magic-type span").attr("data-type",T.rainbow.type)}async function Ba(e,a){if($(".player-cards").addClass("unavailable"),Y.allDead())return;a.mage.current>0&&(a.lightning.current+=a.mage.current),T.cover.current>0&&Ra(T.cover.current,T),a.rainbow.current-=a.rainbow.max;let t="elemental"==a.rainbow.type,n="dark"==a.rainbow.type,r="chaos"==a.rainbow.type?3*a.rainbow.max:a.rainbow.max,i=B.getStatPercentage(a.rainbow.current,a.rainbow.max),s=T.lightning.current,o=T.thunder.current;T.amplify?.enabled&&(s>0&&(s*=2),o>1)&&(o+=o-1),r+=s,r=Math.round(r*o),await D.rainbowAnimations(i),D.playsounds&&ee.play("activateRainbow"),await B.wait(D.animationDelay);let d=D.currentMonsters.filter((e=>0==e.dead)),l="muddled"==a.rainbow.type||"chaos"==a.rainbow.type?[B.randFromArray(d)]:d;await Ya(r,void 0,l,t,n),a.rainbow.type=e,a.rainbow.current>=a.rainbow.max&&a.rainbow.max>0?Ba(e,a):($(".magic-rainbow").addClass("unavailable"),await B.wait(D.animationGap),$(".magic-rainbow").addClass("empty"),await B.wait(D.animationGap),$(".magic-rainbow").removeClass("unavailable empty activated"),$(".player-cards").removeClass("unavailable"));for(let e=0;e<D.currentMonsters.length;e++)if(Y.updateMonsterStats(D.currentMonsters[e]),Y.dying(D.currentMonsters[e])&&D.playsounds&&ee.play("death"),Y.dead(D.currentMonsters[e])&&B.removeMonster(D.currentMonsters[e]),Y.allDead())return void qe();return Ge(),i}function Da(e,a){if(null!=a){if((e=parseFloat(e))<=0)return;let t=e+a.craft.current,n=a.armor+t-a.health.current;t<0&&(t=0),D.playsounds&&t>0&&ee.play("gainArmor"),n>0?(a.armor=a.health.current,a.cunning.current>0&&Ra(Math.round(n*a.cunning.current),a),a.health.current+=Math.round(n*a.vigor.current),a.health.current>a.health.max&&(a.health.current=a.health.max)):a.armor+=t,se(),D.message(a.name+" ("+a.guid+") gains "+t+" armor")}}async function Ma(e,a){e&&(a+=e.might.current,a*=e.punch.current),a=Math.round(a),await Ya(a,e,[T]),se(),p().dead(T)&&Ue("loss")}async function Ta(e){e.health.current=0,Y.dying(e)&&D.playsounds&&ee.play("death"),Y.dead(e)&&B.removeMonster(e),Y.allDead()&&qe()}async function Ya(e,a,t,n=!1,r=!1,i=!1,s=!1,o=!1,d=!0){if(t.length>0)for(let l=0;l<t.length;l++){if(Y.dead(t[l]))return;for(let e=0;e<D.currentMonsters.length;e++)if(Y.updateMonsterStats(D.currentMonsters[e]),Y.dying(D.currentMonsters[e])&&D.playsounds&&ee.play("death"),Y.dead(D.currentMonsters[e])&&B.removeMonster(D.currentMonsters[e]),Y.allDead())return void qe();if(e=Math.round(e-e*t[l].resistance.current),t[l].veil.current>0){let e={effect:"resistance",amount:t[l].veil.current,turns:1};await Te(e,t[l],1)}let c=0==t[l]||null==t[l]?T:t[l],m=e,u=0,h=0,g=0,f=!1;f=c.unreachable?.enabled;let y=c.tank.enabled;a?.panic?.enabled&&(m+=a.block,a.block=0),f&&(m>0&&(m=1),y=!0);let w=m;if(n||(w=m-c.block),w<=0)c.block-=m,u+=m,D.playsounds&&ee.play("loseBlock");else{n||(c.block>0&&D.playsounds&&ee.play("loseBlock"),u+=c.block,c.block=0);let e=w,a=w,t=e%2==0||0==c.armor?0:1;if(r||(e=Math.floor(w/2),a=Math.ceil(a/2)),!r&&a<=c.armor&&c.armor>0)h+=e+t,u+=h,c.armor-=e+t,y||(g+=e,u+=e,c.health.current-=e,e>D.highestDmgRoll&&!i&&!s&&!o&&"monster"==c.type&&(D.highestDmgRoll=e));else if(r||0==c.armor)g+=w,u+=w,c.health.current-=w,w>D.highestDmgRoll&&!i&&!s&&!o&&"monster"==c.type&&(D.highestDmgRoll=w);else{let e=c.armor,a=w-2*c.armor;c.tank.enabled||(g+=e,u+=e,c.health.current-=e,e>D.highestDmgRoll&&!i&&!s&&!o&&"monster"==c.type&&(D.highestDmgRoll=e)),g+=a,u+=a,c.health.current-=a,a>D.highestDmgRoll&&!i&&!s&&!o&&"monster"==c.type&&(D.highestDmgRoll=a),h+=c.armor,u+=c.armor,c.armor=0}}c.health.current<=0&&(c.health.current=0),c.armor<=0&&(c.armor=0),c.block<=0&&(c.block=0),c.armor>c.health.current&&(c.armor=c.health.current);let b=$(".player .dmg-taken"),v=$(".player .armor-lost"),C=$(".player .health-lost");if("monster"==c.type&&(b=$(".monster[data-guid="+c.guid+"] .dmg-taken"),v=$(".monster[data-guid="+c.guid+"] .armor-lost"),C=$(".monster[data-guid="+c.guid+"] .health-lost")),b.attr("data-amount",u),v.attr("data-amount",h),C.attr("data-amount",g),u>0&&(D.blkAnimations({data:u,to:b}),D.message(c.name+" ("+c.guid+") takes "+u+" total damage"),await B.wait(D.animationDmg)),h>0){if(D.dmgAnimations({data:h,to:v}),await B.wait(D.animationDmg),c.spikes.current>0&&null!=a&&d){let e=Math.round(c.spikes.current);e<1&&(e=1),await Ya(e,void 0,[a]),se(!1)}D.message(c.name+" ("+c.guid+") loses "+h+" armor"),D.playsounds&&ee.play("loseArmor")}if(g>0){if(D.playsounds&&ee.play("takeDmg"),D.dmgAnimations({data:g,to:C}),await B.wait(D.animationDmg),c.retaliate.current>0&&null!=a&&d){let e=Math.round(c.retaliate.current);e<1&&(e=1),await Ya(e,void 0,[a])}c.resurrect.enabled&&(D.toResurrect+=1,D.playsounds&&ee.play("effect44")),c.hardened.current>0&&Ra(c.hardened.current,c),se(!1),D.message(c.name+" ("+c.guid+") loses "+g+" health")}for(let e=0;e<D.currentMonsters.length;e++)if(Y.updateMonsterStats(D.currentMonsters[e]),Y.dying(D.currentMonsters[e])&&D.playsounds&&ee.play("death"),Y.dead(D.currentMonsters[e])&&B.removeMonster(D.currentMonsters[e]),Y.allDead())return void qe();p().dead(T)&&Ue("loss")}}document.addEventListener("mousemove",(e=>{ta&&ia({x:e.clientX,y:e.clientY})}))})();